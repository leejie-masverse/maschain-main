{"version":3,"sources":["scripts.bundle.js"],"names":["this","Element","ElementPrototype","matches","matchesSelector","webkitMatchesSelector","msMatchesSelector","selector","nodes","parentNode","document","querySelectorAll","i","prototype","closest","el","lastTime","vendors","x","length","window","requestAnimationFrame","cancelAnimationFrame","callback","currTime","Date","getTime","timeToCall","Math","max","id","setTimeout","clearTimeout","Document","DocumentFragment","forEach","item","hasOwnProperty","Object","defineProperty","configurable","enumerable","writable","value","argArr","Array","slice","call","arguments","docFrag","createDocumentFragment","argItem","isNode","Node","appendChild","createTextNode","String","insertBefore","firstChild","mUtilElementDataStore","mUtilElementDataStoreID","mUtilDelegatedEventHandlers","mUtil","resizeHandlers","breakpoints","sm","md","lg","xl","_windowResizeHandler","timeout","addEventListener","_runResizeHandlers","init","options","addResizeHandler","push","removeResizeHandler","runResizeHandlers","resize","dispatchEvent","Event","evt","createEvent","initUIEvent","getURLParam","paramName","val","params","location","search","substring","split","unescape","isMobileDevice","getViewPort","width","getBreakpoint","isDesktopDevice","e","a","documentElement","body","height","isInResponsiveRange","mode","breakpoint","getUniqueID","prefix","floor","random","isset","obj","keys","stone","indexOf","Error","undefined","shift","getHighestZindex","position","elem","get","css","parseInt","isNaN","hasFixedPositionedParent","sleep","milliseconds","start","getRandomInt","min","isAngularVersion","Zone","deepExtend","out","key","extend","query","nodeType","getElementById","getElementsByTagName","getElementsByClassName","getByClass","hasClasses","classes","classesArr","hasClass","trim","className","classList","contains","RegExp","test","addClass","classNames","add","removeClass","remove","replace","triggerCustomEvent","eventName","data","CustomEvent","event","detail","initCustomEvent","string","eventTriggered","currentTarget","dataset","triggered","removeChild","find","parent","querySelector","findAll","insertAfter","referenceNode","nextSibling","parents","collectionHas","b","len","all","cur","findParentBySelector","children","log","childNodes","result","l","child","p","f","mozMatchesSelector","s","tagName","element","set","name","customDataTag","has","outerWidth","margin","parseFloat","offsetWidth","offset","rect","win","getClientRects","getBoundingClientRect","ownerDocument","defaultView","top","pageYOffset","left","pageXOffset","visible","offsetHeight","attr","getAttribute","setAttribute","hasAttr","removeAttr","removeAttribute","animate","from","to","duration","update","easing","done","easings","linear","t","c","d","rAF","change","performance","now","loop","timestamp","time","actualCss","prop","cache","HTMLElement","style","cssText","actualHeight","actualWidth","getScroll","method","self","browserSupportsBoxModel","styleProp","getComputedStyle","toLowerCase","getPropertyValue","currentStyle","str","letter","toUpperCase","oldLeft","oldRsLeft","runtimeStyle","pixelLeft","slide","dir","speed","recalcMaxHeight","calcHeight","calcPaddingTop","calcPaddingBottom","paddingTop","paddingBottom","display","overflow","slideUp","slideDown","show","hide","addEvent","type","handler","one","removeEvent","removeEventListener","on","eventId","targets","target","j","off","callee","hash","charCodeAt","animateClass","animationName","animationEnd","animateDelay","animateDuration","scrollTo","targetPos","scrollPos","scrollTop","isArray","ready","attachEvent","readyState","isEmpty","numberString","nStr","x1","x2","rgx","detectIE","ua","navigator","userAgent","msie","rv","edge","isRTL","scrollerInit","ps","Function","disableForMobile","resetHeightOnDestroy","destroy","PerfectScrollbar","wheelSpeed","swipeEasing","wheelPropagation","minScrollbarLength","suppressScrollX","handleWindowResize","scrollerUpdate","console","scrollersUpdate","scrollers","scrollerTop","scrollerDestroy","mApp","colors","brand","metal","light","accent","primary","success","info","warning","danger","focus","initTooltip","skin","triggerValue","tooltip","trigger","template","initTooltips","$","each","initPopover","popover","initPopovers","initPortlet","mPortlet","initPortlets","initCustomTabs","click","preventDefault","tab","tabs","contents","content","initComponents","jQuery","special","touchstart","setup","_","ns","handle","includes","passive","touchmove","wheel","fileName","next","html","block","state","loading","opacity","overlayColor","size","centerX","centerY","message","shadow","createElement","prepend","innerHTML","border","padding","backgroundColor","overlayCSS","cursor","zIndex","onUnblock","blockUI","unblock","unblockUI","blockPage","unblockPage","progress","alignment","unprogress","getColor","mDropdown","elementId","the","defaultOptions","toggle","hoverTimeout","maxHeight","minHeight","persistent","mobileOverlay","Plugin","construct","events","eventHandlers","open","layout","close","arrow","wrapper","defaultDropPos","currentDropPos","placement","align","hideMouseout","setZindex","setContent","clearHovered","adjustArrowPos","eventTrigger","hideOpened","dropdownoff","hideHovered","force","hideClicked","prependTo","dropdown","pos","abs","newZindex","isPersistent","isShown","args","fired","setDefaults","apply","stopPropagation","mHeader","classic","mobile","desktop","minimize","build","lastScrollTop","st","mMenu","accordion","slideSpeed","autoScroll","autoScrollSpeed","expandAll","reset","pauseDropdownHoverTime","uid","reload","handleSubmenuAccordion","getSubmenuMode","isConditionalSubmenuDropdown","handleSubmenuDrodownHoverEnter","handleSubmenuDrodownHoverExit","handleSubmenuDropdownClick","handleSubmenuDropdownTabClick","handleLinkClick","scroll","submenu","default","tablet","handleSubmenuDropdownClose","resumeDropdownHover","showSubmenuDropdown","hideSubmenuDropdown","shown","li","subnav","closables","el_","submenu_","scrollToItem","classAlso","list","adjustSubmenuDropdownArrowPos","createSubmenuDropdownClickDropoff","dropoff","pauseDropdownHover","date","resetActiveItem","i_","len_","setActiveItem","getBreadcrumbs","breadcrumbs","link","text","title","href","submenuLink","reverse","getPageTitle","hideDropdown","items","cnt","mOffcanvas","overlay","classBase","baseClass","classShown","classOverlay","toggleBy","closeBy","togglerClass","bodyToggleSpeed","tooltips","tools","collapse","expand","fullscreen","sticky","head","foot","setupTooltips","onScrollSticky","updateSticky","resetSticky","initSticky","right","destroySticky","removeTooltips","getBody","getSelf","collapsed","fullscreenOn","tip","Tooltip","dispose","updateTitleContent","height1","height2","unFullscreen","mQuicksearch","minLength","requestTimeout","inputTarget","iconCloseTarget","iconCancelTarget","iconSearchTarget","spinnerClass","hasResultClass","templates","error","form","input","iconClose","iconSearch","iconCancel","cancelTimeout","processing","showDropdown","handleCancel","closeDropdown","showProgress","handleCancelIconVisibility","hideProgress","status","handleSearch","showResult","res","showError","msg","mScrollTop","match","mToggle","togglerState","targetState","toggleOn","toggleOff","getState","mWizard","startStep","manualStepForward","steps","btnSubmit","btnNext","btnPrev","btnLast","btnFirst","currentStep","stopped","totalSteps","goTo","updateUI","goNext","goPrev","goFirst","goLast","num","step","number","getNextStep","setStepClass","isLastStep","isFirstStep","isBetweenStep","argument","updateProgress","handleTarget","stop","getPrevStep","current","getStep","fn","mDatatable","checkbox","datatable","Extension","selectedAllRows","selectedRows","unselectedRows","selectorEnabled","setDataSourceParam","vars","stateRemove","requestIds","getDataSourceParam","table","wrap","initVars","initEvent","initSelect","ids","storage","unique","stateKeep","tableHead","is","makeArray","tableBody","map","chk","setActiveAll","setInactive","setActive","not","grep","columns","n","stateGet","getSelectedId","path","rowIds","getObject","lastResponse","array","filter","debug","API","record","isInit","stateId","ajaxParams","isHtmlTable","source","extractTable","setupBaseDOM","setupDOM","spinnerCallback","setDataSourceQuery","getOption","afterRender","extName","extOptions","saveState","cookie","webstorage","dataSet","originalDataSet","dataMapCallback","dataRender","setHeadTitle","tableFoot","header","footer","setupCellField","setupTemplateCell","setupSubDatatable","setupSystemColumn","redraw","fullRender","which","headers","cell","field","column","ii","rowProp","td","rowProps","layoutUpdate","setupHover","getDepth","lockTable","columnHide","resetScroll","lock","lockEnabled","lockEnabledColumns","enable","tablePart","lockLeft","lockScroll","lockRight","rowLeft","appendTo","rowScroll","rowRight","locked","enableLock","isLocked","empty","insertData","screen","enabled","autoHide","rowEvenOdd","sorting","scrollbar","hoverTimer","isScrolling","row","index","adjustLockContainer","containerWidth","dragResize","startX","startWidth","pressed","mousedown","pageX","mousemove","ifLocked","lockedIndex","eq","tri","tr","mouseup","initHeight","theadHeight","tfootHeight","bodyHeight","initialDatatable","clone","theme","class","setOption","tableParts","part","tdi","rowCallback","beforeTemplate","finalValue","dataPlaceholder","span","afterTemplate","append","subtable","initCheckbox","first","adjustCellsWidth","minWidth","dataWidth","adjustCellsHeight","totalRows","rows","ceil","wrapInner","scrollable","tableLocked","mcsOptions","scrollInertia","autoDraggerLength","autoHideScrollbar","autoExpandScrollbar","alwaysShowScrollbar","mouseWheel","scrollAmount","advanced","updateOnContentResize","autoExpandHorizontalScroll","scrollRight","scrollWidth","scrollLeft","clientWidth","scrollHead","scrollFoot","initCustomScrollbar","initDefaultScrollbar","onScrolling","initScrollbar","ths","th","textAlign","action","siblings","buildMeta","localDataUpdate","meta","perpage","pageSize","total","page","end","afterGetData","localPagingCallback","ctx","pager","pagination","serverPaging","serverMeta","paging","serverSorting","serverFiltering","getData","pages","visibility","colLength","rowIndex","join","errorSpan","replaceWith","updateTableComponents","dataType","url","ajax","response","textStatus","jqXHR","setAutoColumns","fail","errorThrown","always","pg","paginateEvent","pagerLayout","getTablePrefix","serverCallback","addPaginateEvent","populate","pagingBreakpoint","icons","pagerNumber","gotoMorePage","prev","more","pagesNumber","pageNumber","gotoPage","last","pageSizeSelect","updatePerpage","pageSizes","selectpicker","paste","openPage","originalEvent","updateInfo","currentPage","getCurrentPage","pagerInput","option","paginationUpdate","pagerMorePrev","pagerMoreNext","pagerFirst","pagerPrev","pagerNext","pagerLast","morePrevPage","moreNextPage","nav","responsive","tds","hidden","subTableCallback","toggleSubTable","parentRow","subTableRow","getTotalColumns","after","subTable","primaryKey","icon","detailCell","raw","isSpinning","spinnerOptions","sortCallback","sort","format","aField","bField","moment","diff","Number","toggleHiddenColumns","detailRow","detailRowTd","detailSubTable","hoverColumn","colIdx","cells","k","v","getExtraSpace","getTableId","suffix","depth","localStorage","setItem","JSON","stringify","Cookies","defValue","getItem","parse","stateUpdate","ori","removeItem","getOneRow","tdOnly","hasOverflowY","innerHeight","sortColumn","int","hIndex","container","tda","tdb","sortObj","sortable","sortClick","setIcon","isEmptyObject","getColumnByField","nestedSearch","getGeneralSearchKey","filterArray","operator","inArray","count","filtered","to_match","matched","m_key","m_value","lhs","toString","getDefaultSortColumn","getHiddenDimensions","includeMargin","props","dim","innerWidth","outerHeight","hiddenParents","addBack","oldProps","old","searchInput","object","reduce","extendObj","levels","createLevel","timer","load","ms","delay","getRecord","rowNumber","getColumn","columnName","setSelectedRecords","getValue","active","checkboxes","getSelectedRecords","getDataSourceQuery","param","getPageSize","getTotalRows","getDataSet","hideColumn","fieldName","showColumn","nodeTr","nodeTd","nodeCols","recentNode","context","bool","scrollColumns","funcName","func","center","defaults","autoColumns","customScrollbar","spinner","asc","desc","rowDetail","resizable","filterable","editable","onEnter","toolbar","navigation","translate","records","noRecords","select","extensions","mLayout","horMenu","asideMenu","asideMenuOffcanvas","horMenuOffcanvas","asideLeftToggle","mainPortlet","initLeftAsideHide","createMainPortlet","initHeader","initAside","initMainPortlet","resetMainPortlet","tmp","headerEl","toggleClass","insideTm","outsideTm","asideLeft","asideOffcanvasClass","menu","menuDesktopMode","onLeftSidebarToggle","datatables","getAsideMenu","closeMobileAsideMenuOffcanvas","closeMobileHorMenuOffcanvas"],"mappings":"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","file":"scripts.bundle.js","sourcesContent":["/**\r\n * @class mUtil  Metronic base utilize class that privides helper functions\r\n */\r\n//== Polyfill\r\n// matches polyfill\r\nthis.Element && function(ElementPrototype) {\r\n    ElementPrototype.matches = ElementPrototype.matches ||\r\n        ElementPrototype.matchesSelector ||\r\n        ElementPrototype.webkitMatchesSelector ||\r\n        ElementPrototype.msMatchesSelector ||\r\n        function(selector) {\r\n            var node = this,\r\n                nodes = (node.parentNode || node.document).querySelectorAll(selector),\r\n                i = -1;\r\n            while (nodes[++i] && nodes[i] != node);\r\n            return !!nodes[i];\r\n        }\r\n}(Element.prototype);\r\n\r\n// closest polyfill\r\nthis.Element && function(ElementPrototype) {\r\n    ElementPrototype.closest = ElementPrototype.closest ||\r\n        function(selector) {\r\n            var el = this;\r\n            while (el.matches && !el.matches(selector)) el = el.parentNode;\r\n            return el.matches ? el : null;\r\n        }\r\n}(Element.prototype);\r\n\r\n\r\n// matches polyfill\r\nthis.Element && function(ElementPrototype) {\r\n    ElementPrototype.matches = ElementPrototype.matches ||\r\n        ElementPrototype.matchesSelector ||\r\n        ElementPrototype.webkitMatchesSelector ||\r\n        ElementPrototype.msMatchesSelector ||\r\n        function(selector) {\r\n            var node = this,\r\n                nodes = (node.parentNode || node.document).querySelectorAll(selector),\r\n                i = -1;\r\n            while (nodes[++i] && nodes[i] != node);\r\n            return !!nodes[i];\r\n        }\r\n}(Element.prototype);\r\n\r\n//\r\n// requestAnimationFrame polyfill by Erik Möller.\r\n//  With fixes from Paul Irish and Tino Zijdel\r\n//\r\n//  http://paulirish.com/2011/requestanimationframe-for-smart-animating/\r\n//  http://my.opera.com/emoller/blog/2011/12/20/requestanimationframe-for-smart-er-animating\r\n//\r\n//  MIT license\r\n//\r\n(function() {\r\n    var lastTime = 0;\r\n    var vendors = ['webkit', 'moz'];\r\n    for (var x = 0; x < vendors.length && !window.requestAnimationFrame; ++x) {\r\n        window.requestAnimationFrame = window[vendors[x] + 'RequestAnimationFrame'];\r\n        window.cancelAnimationFrame =\r\n            window[vendors[x] + 'CancelAnimationFrame'] || window[vendors[x] + 'CancelRequestAnimationFrame'];\r\n    }\r\n\r\n    if (!window.requestAnimationFrame)\r\n        window.requestAnimationFrame = function(callback) {\r\n            var currTime = new Date().getTime();\r\n            var timeToCall = Math.max(0, 16 - (currTime - lastTime));\r\n            var id = window.setTimeout(function() {\r\n                callback(currTime + timeToCall);\r\n            }, timeToCall);\r\n            lastTime = currTime + timeToCall;\r\n            return id;\r\n        };\r\n\r\n    if (!window.cancelAnimationFrame)\r\n        window.cancelAnimationFrame = function(id) {\r\n            clearTimeout(id);\r\n        };\r\n}());\r\n\r\n// Source: https://github.com/jserz/js_piece/blob/master/DOM/ParentNode/prepend()/prepend().md\r\n(function(arr) {\r\n    arr.forEach(function(item) {\r\n        if (item.hasOwnProperty('prepend')) {\r\n            return;\r\n        }\r\n        Object.defineProperty(item, 'prepend', {\r\n            configurable: true,\r\n            enumerable: true,\r\n            writable: true,\r\n            value: function prepend() {\r\n                var argArr = Array.prototype.slice.call(arguments),\r\n                    docFrag = document.createDocumentFragment();\r\n\r\n                argArr.forEach(function(argItem) {\r\n                    var isNode = argItem instanceof Node;\r\n                    docFrag.appendChild(isNode ? argItem : document.createTextNode(String(argItem)));\r\n                });\r\n\r\n                this.insertBefore(docFrag, this.firstChild);\r\n            }\r\n        });\r\n    });\r\n})([Element.prototype, Document.prototype, DocumentFragment.prototype]);\r\n\r\n//== Global variables \r\nwindow.mUtilElementDataStore = {};\r\nwindow.mUtilElementDataStoreID = 0;\r\nwindow.mUtilDelegatedEventHandlers = {};\r\n\r\nvar mUtil = function() {\r\n\r\n    var resizeHandlers = [];\r\n\r\n    /** @type {object} breakpoints The device width breakpoints **/\r\n    var breakpoints = {\r\n        sm: 544, // Small screen / phone           \r\n        md: 768, // Medium screen / tablet            \r\n        lg: 1024, // Large screen / desktop        \r\n        xl: 1200 // Extra large screen / wide desktop\r\n    };\r\n\r\n    /**\r\n     * Handle window resize event with some \r\n     * delay to attach event handlers upon resize complete \r\n     */\r\n    var _windowResizeHandler = function() {\r\n        var _runResizeHandlers = function() {\r\n            // reinitialize other subscribed elements\r\n            for (var i = 0; i < resizeHandlers.length; i++) {\r\n                var each = resizeHandlers[i];\r\n                each.call();\r\n            }\r\n        };\r\n\r\n        var timeout = false; // holder for timeout id\r\n        var delay = 250; // delay after event is \"complete\" to run callback\r\n\r\n        window.addEventListener('resize', function() {\r\n            clearTimeout(timeout);\r\n            timeout = setTimeout(function() {\r\n                _runResizeHandlers();\r\n            }, delay); // wait 50ms until window resize finishes.\r\n        });\r\n    };\r\n\r\n    return {\r\n        /**\r\n         * Class main initializer.\r\n         * @param {object} options.\r\n         * @returns null\r\n         */\r\n        //main function to initiate the theme\r\n        init: function(options) {\r\n            if (options && options.breakpoints) {\r\n                breakpoints = options.breakpoints;\r\n            }\r\n\r\n            _windowResizeHandler();\r\n        },\r\n\r\n        /**\r\n         * Adds window resize event handler.\r\n         * @param {function} callback function.\r\n         */\r\n        addResizeHandler: function(callback) {\r\n            resizeHandlers.push(callback);\r\n        },\r\n\r\n        /**\r\n         * Removes window resize event handler.\r\n         * @param {function} callback function.\r\n         */\r\n        removeResizeHandler: function(callback) {\r\n            for (var i = 0; i < resizeHandlers.length; i++) {\r\n                if (callback === resizeHandlers[i]) {\r\n                    delete resizeHandlers[i];\r\n                }\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Trigger window resize handlers.\r\n         */\r\n        runResizeHandlers: function() {\r\n            _runResizeHandlers();\r\n        },\r\n\r\n        resize: function() {\r\n            if (typeof(Event) === 'function') {\r\n                // modern browsers\r\n                window.dispatchEvent(new Event('resize'));\r\n            } else {\r\n                // for IE and other old browsers\r\n                // causes deprecation warning on modern browsers\r\n                var evt = window.document.createEvent('UIEvents'); \r\n                evt.initUIEvent('resize', true, false, window, 0); \r\n                window.dispatchEvent(evt);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Get GET parameter value from URL.\r\n         * @param {string} paramName Parameter name.\r\n         * @returns {string}  \r\n         */\r\n        getURLParam: function(paramName) {\r\n            var searchString = window.location.search.substring(1),\r\n                i, val, params = searchString.split(\"&\");\r\n\r\n            for (i = 0; i < params.length; i++) {\r\n                val = params[i].split(\"=\");\r\n                if (val[0] == paramName) {\r\n                    return unescape(val[1]);\r\n                }\r\n            }\r\n\r\n            return null;\r\n        },\r\n\r\n        /**\r\n         * Checks whether current device is mobile touch.\r\n         * @returns {boolean}  \r\n         */\r\n        isMobileDevice: function() {\r\n            return (this.getViewPort().width < this.getBreakpoint('lg') ? true : false);\r\n        },\r\n\r\n        /**\r\n         * Checks whether current device is desktop.\r\n         * @returns {boolean}  \r\n         */\r\n        isDesktopDevice: function() {\r\n            return mUtil.isMobileDevice() ? false : true;\r\n        },\r\n\r\n        /**\r\n         * Gets browser window viewport size. Ref:\r\n         * http://andylangton.co.uk/articles/javascript/get-viewport-size-javascript/\r\n         * @returns {object}  \r\n         */\r\n        getViewPort: function() {\r\n            var e = window,\r\n                a = 'inner';\r\n            if (!('innerWidth' in window)) {\r\n                a = 'client';\r\n                e = document.documentElement || document.body;\r\n            }\r\n\r\n            return {\r\n                width: e[a + 'Width'],\r\n                height: e[a + 'Height']\r\n            };\r\n        },\r\n\r\n        /**\r\n         * Checks whether given device mode is currently activated.\r\n         * @param {string} mode Responsive mode name(e.g: desktop,\r\n         *     desktop-and-tablet, tablet, tablet-and-mobile, mobile)\r\n         * @returns {boolean}  \r\n         */\r\n        isInResponsiveRange: function(mode) {\r\n            var breakpoint = this.getViewPort().width;\r\n\r\n            if (mode == 'general') {\r\n                return true;\r\n            } else if (mode == 'desktop' && breakpoint >= (this.getBreakpoint('lg') + 1)) {\r\n                return true;\r\n            } else if (mode == 'tablet' && (breakpoint >= (this.getBreakpoint('md') + 1) && breakpoint < this.getBreakpoint('lg'))) {\r\n                return true;\r\n            } else if (mode == 'mobile' && breakpoint <= this.getBreakpoint('md')) {\r\n                return true;\r\n            } else if (mode == 'desktop-and-tablet' && breakpoint >= (this.getBreakpoint('md') + 1)) {\r\n                return true;\r\n            } else if (mode == 'tablet-and-mobile' && breakpoint <= this.getBreakpoint('lg')) {\r\n                return true;\r\n            } else if (mode == 'minimal-desktop-and-below' && breakpoint <= this.getBreakpoint('xl')) {\r\n                return true;\r\n            }\r\n\r\n            return false;\r\n        },\r\n\r\n        /**\r\n         * Generates unique ID for give prefix.\r\n         * @param {string} prefix Prefix for generated ID\r\n         * @returns {boolean}  \r\n         */\r\n        getUniqueID: function(prefix) {\r\n            return prefix + Math.floor(Math.random() * (new Date()).getTime());\r\n        },\r\n\r\n        /**\r\n         * Gets window width for give breakpoint mode.\r\n         * @param {string} mode Responsive mode name(e.g: xl, lg, md, sm)\r\n         * @returns {number}  \r\n         */\r\n        getBreakpoint: function(mode) {\r\n            return breakpoints[mode];\r\n        },\r\n\r\n        /**\r\n         * Checks whether object has property matchs given key path.\r\n         * @param {object} obj Object contains values paired with given key path\r\n         * @param {string} keys Keys path seperated with dots\r\n         * @returns {object}  \r\n         */\r\n        isset: function(obj, keys) {\r\n            var stone;\r\n\r\n            keys = keys || '';\r\n\r\n            if (keys.indexOf('[') !== -1) {\r\n                throw new Error('Unsupported object path notation.');\r\n            }\r\n\r\n            keys = keys.split('.');\r\n\r\n            do {\r\n                if (obj === undefined) {\r\n                    return false;\r\n                }\r\n\r\n                stone = keys.shift();\r\n\r\n                if (!obj.hasOwnProperty(stone)) {\r\n                    return false;\r\n                }\r\n\r\n                obj = obj[stone];\r\n\r\n            } while (keys.length);\r\n\r\n            return true;\r\n        },\r\n\r\n        /**\r\n         * Gets highest z-index of the given element parents\r\n         * @param {object} el jQuery element object\r\n         * @returns {number}  \r\n         */\r\n        getHighestZindex: function(el) {\r\n            var elem = mUtil.get(el),\r\n                position, value;\r\n\r\n            while (elem && elem !== document) {\r\n                // Ignore z-index if position is set to a value where z-index is ignored by the browser\r\n                // This makes behavior of this function consistent across browsers\r\n                // WebKit always returns auto if the element is positioned\r\n                position = mUtil.css(elem, 'position');\r\n\r\n                if (position === \"absolute\" || position === \"relative\" || position === \"fixed\") {\r\n                    // IE returns 0 when zIndex is not specified\r\n                    // other browsers return a string\r\n                    // we ignore the case of nested elements with an explicit value of 0\r\n                    // <div style=\"z-index: -10;\"><div style=\"z-index: 0;\"></div></div>\r\n                    value = parseInt(mUtil.css(elem, 'z-index'));\r\n\r\n                    if (!isNaN(value) && value !== 0) {\r\n                        return value;\r\n                    }\r\n                }\r\n\r\n                elem = elem.parentNode;\r\n            }\r\n\r\n            return null;\r\n        },\r\n\r\n        /**\r\n         * Checks whether the element has any parent with fixed positionfreg\r\n         * @param {object} el jQuery element object\r\n         * @returns {boolean}  \r\n         */\r\n        hasFixedPositionedParent: function(el) {\r\n            while (el && el !== document) {\r\n                position = mUtil.css(el, 'position');\r\n\r\n                if (position === \"fixed\") {\r\n                    return true;\r\n                }\r\n\r\n                el = el.parentNode;\r\n            }\r\n\r\n            return false;\r\n        },\r\n\r\n        /**\r\n         * Simulates delay\r\n         */\r\n        sleep: function(milliseconds) {\r\n            var start = new Date().getTime();\r\n            for (var i = 0; i < 1e7; i++) {\r\n                if ((new Date().getTime() - start) > milliseconds) {\r\n                    break;\r\n                }\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Gets randomly generated integer value within given min and max range\r\n         * @param {number} min Range start value\r\n         * @param {number} min Range end value\r\n         * @returns {number}  \r\n         */\r\n        getRandomInt: function(min, max) {\r\n            return Math.floor(Math.random() * (max - min + 1)) + min;\r\n        },\r\n\r\n        /**\r\n         * Checks whether Angular library is included\r\n         * @returns {boolean}  \r\n         */\r\n        isAngularVersion: function() {\r\n            return window.Zone !== undefined ? true : false;\r\n        },\r\n\r\n        //== jQuery Workarounds\r\n\r\n        //== Deep extend:  $.extend(true, {}, objA, objB);\r\n        deepExtend: function(out) {\r\n            out = out || {};\r\n\r\n            for (var i = 1; i < arguments.length; i++) {\r\n                var obj = arguments[i];\r\n\r\n                if (!obj)\r\n                    continue;\r\n\r\n                for (var key in obj) {\r\n                    if (obj.hasOwnProperty(key)) {\r\n                        if (typeof obj[key] === 'object')\r\n                            out[key] = mUtil.deepExtend(out[key], obj[key]);\r\n                        else\r\n                            out[key] = obj[key];\r\n                    }\r\n                }\r\n            }\r\n\r\n            return out;\r\n        },\r\n\r\n        //== extend:  $.extend({}, objA, objB); \r\n        extend: function(out) {\r\n            out = out || {};\r\n\r\n            for (var i = 1; i < arguments.length; i++) {\r\n                if (!arguments[i])\r\n                    continue;\r\n\r\n                for (var key in arguments[i]) {\r\n                    if (arguments[i].hasOwnProperty(key))\r\n                        out[key] = arguments[i][key];\r\n                }\r\n            }\r\n\r\n            return out;\r\n        },\r\n\r\n        get: function(query) {\r\n            var el;\r\n\r\n            if (query === document) {\r\n                return document;\r\n            }\r\n\r\n            if (!!(query && query.nodeType === 1)) {\r\n                return query;\r\n            }\r\n\r\n            if (el = document.getElementById(query)) {\r\n                return el;\r\n            } else if (el = document.getElementsByTagName(query)) {\r\n                return el[0];\r\n            } else if (el = document.getElementsByClassName(query)) {\r\n                return el[0];\r\n            } else {\r\n                return null;\r\n            }\r\n        },\r\n\r\n        getByClass: function(query) {\r\n            var el;\r\n            \r\n            if (el = document.getElementsByClassName(query)) {\r\n                return el[0];\r\n            } else {\r\n                return null;\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Checks whether the element has given classes\r\n         * @param {object} el jQuery element object\r\n         * @param {string} Classes string\r\n         * @returns {boolean}  \r\n         */\r\n        hasClasses: function(el, classes) {\r\n            if (!el) {\r\n                return;\r\n            }\r\n\r\n            var classesArr = classes.split(\" \");\r\n\r\n            for (var i = 0; i < classesArr.length; i++) {\r\n                if (mUtil.hasClass(el, mUtil.trim(classesArr[i])) == false) {\r\n                    return false;\r\n                }\r\n            }\r\n\r\n            return true;\r\n        },\r\n\r\n        hasClass: function(el, className) {\r\n            if (!el) {\r\n                return;\r\n            }\r\n\r\n            return el.classList ? el.classList.contains(className) : new RegExp('\\\\b' + className + '\\\\b').test(el.className);\r\n        },\r\n\r\n        addClass: function(el, className) {\r\n            if (!el || typeof className === 'undefined') {\r\n                return;\r\n            }\r\n\r\n            var classNames = className.split(' ');\r\n\r\n            if (el.classList) {\r\n                for (var i = 0; i < classNames.length; i++) {\r\n                    if (classNames[i] && classNames[i].length > 0) {\r\n                        el.classList.add(mUtil.trim(classNames[i]));\r\n                    }\r\n                }\r\n            } else if (!mUtil.hasClass(el, className)) {\r\n                for (var i = 0; i < classNames.length; i++) {\r\n                    el.className += ' ' + mUtil.trim(classNames[i]);\r\n                }\r\n            }\r\n        },\r\n\r\n        removeClass: function(el, className) {\r\n            if (!el) {\r\n                return;\r\n            }\r\n\r\n            var classNames = className.split(' ');\r\n\r\n            if (el.classList) {\r\n                for (var i = 0; i < classNames.length; i++) {\r\n                    el.classList.remove(mUtil.trim(classNames[i]));\r\n                }\r\n            } else if (mUtil.hasClass(el, className)) {\r\n                for (var i = 0; i < classNames.length; i++) {\r\n                    el.className = el.className.replace(new RegExp('\\\\b' + mUtil.trim(classNames[i]) + '\\\\b', 'g'), '');\r\n                }\r\n            }\r\n        },\r\n\r\n        triggerCustomEvent: function(el, eventName, data) {\r\n            if (window.CustomEvent) {\r\n                var event = new CustomEvent(eventName, {\r\n                    detail: data\r\n                });\r\n            } else {\r\n                var event = document.createEvent('CustomEvent');\r\n                event.initCustomEvent(eventName, true, true, data);\r\n            }\r\n\r\n            el.dispatchEvent(event);\r\n        },\r\n\r\n        trim: function(string) {\r\n            return string.trim();\r\n        },\r\n\r\n        eventTriggered: function(e) {\r\n            if (e.currentTarget.dataset.triggered) {\r\n                return true;\r\n            } else {\r\n                e.currentTarget.dataset.triggered = true;\r\n\r\n                return false;\r\n            }\r\n        },\r\n\r\n        remove: function(el) {\r\n            if (el && el.parentNode) {\r\n                el.parentNode.removeChild(el);\r\n            }\r\n        },\r\n\r\n        find: function(parent, query) {\r\n            return parent.querySelector(query);\r\n        },\r\n\r\n        findAll: function(parent, query) {\r\n            return parent.querySelectorAll(query);\r\n        },\r\n\r\n        insertAfter: function(el, referenceNode) {\r\n            return referenceNode.parentNode.insertBefore(el, referenceNode.nextSibling);\r\n        },\r\n\r\n        parents: function(el, query) {\r\n            function collectionHas(a, b) { //helper function (see below)\r\n                for (var i = 0, len = a.length; i < len; i++) {\r\n                    if (a[i] == b) return true;\r\n                }\r\n\r\n                return false;\r\n            }\r\n\r\n            function findParentBySelector(el, selector) {\r\n                var all = document.querySelectorAll(selector);\r\n                var cur = el.parentNode;\r\n\r\n                while (cur && !collectionHas(all, cur)) { //keep going up until you find a match\r\n                    cur = cur.parentNode; //go up\r\n                }\r\n\r\n                return cur; //will return null if not found\r\n            }\r\n\r\n            return findParentBySelector(el, query);\r\n        },\r\n\r\n        children: function(el, selector, log) {\r\n            if (!el || !el.childNodes) {\r\n                return;\r\n            }\r\n\r\n            var result = [],\r\n                i = 0,\r\n                l = el.childNodes.length;\r\n\r\n            for (var i; i < l; ++i) {\r\n                if (el.childNodes[i].nodeType == 1 && mUtil.matches(el.childNodes[i], selector, log)) {\r\n                    result.push(el.childNodes[i]);\r\n                }\r\n            }\r\n\r\n            return result;\r\n        },\r\n\r\n        child: function(el, selector, log) {\r\n            var children = mUtil.children(el, selector, log);\r\n\r\n            return children ? children[0] : null;\r\n        },\r\n\r\n        matches: function(el, selector, log) {\r\n            var p = Element.prototype;\r\n            var f = p.matches || p.webkitMatchesSelector || p.mozMatchesSelector || p.msMatchesSelector || function(s) {\r\n                return [].indexOf.call(document.querySelectorAll(s), this) !== -1;\r\n            };\r\n\r\n            if (el && el.tagName) {\r\n                return f.call(el, selector);\r\n            } else {\r\n                return false;\r\n            }\r\n        },\r\n\r\n        data: function(element) {\r\n            element = mUtil.get(element);\r\n\r\n            return {\r\n                set: function(name, data) {\r\n                    if (element.customDataTag === undefined) {\r\n                        mUtilElementDataStoreID++;\r\n                        element.customDataTag = mUtilElementDataStoreID;\r\n                    }\r\n\r\n                    if (mUtilElementDataStore[element.customDataTag] === undefined) {\r\n                        mUtilElementDataStore[element.customDataTag] = {};\r\n                    }\r\n\r\n                    mUtilElementDataStore[element.customDataTag][name] = data;\r\n                },\r\n\r\n                get: function(name) {\r\n                    return this.has(name) ? mUtilElementDataStore[element.customDataTag][name] : null;\r\n                },\r\n\r\n                has: function(name) {\r\n                    return (mUtilElementDataStore[element.customDataTag] && mUtilElementDataStore[element.customDataTag][name]) ? true : false;\r\n                },\r\n\r\n                remove: function(name) {\r\n                    if (this.has(name)) {\r\n                        delete mUtilElementDataStore[element.customDataTag][name];\r\n                    }\r\n                }\r\n            };\r\n        },\r\n\r\n        outerWidth: function(el, margin) {\r\n            var width;\r\n\r\n            if (margin === true) {\r\n                var width = parseFloat(el.offsetWidth);\r\n                width += parseFloat(mUtil.css(el, 'margin-left')) + parseFloat(mUtil.css(el, 'margin-right'));\r\n\r\n                return parseFloat(width);\r\n            } else {\r\n                var width = parseFloat(el.offsetWidth);\r\n\r\n                return width;\r\n            }\r\n        },\r\n\r\n        offset: function(elem) {\r\n            var rect, win;\r\n            elem = mUtil.get(elem);\r\n\r\n            if ( !elem ) {\r\n                return;\r\n            }\r\n\r\n            // Return zeros for disconnected and hidden (display: none) elements (gh-2310)\r\n            // Support: IE <=11 only\r\n            // Running getBoundingClientRect on a\r\n            // disconnected node in IE throws an error\r\n\r\n            if ( !elem.getClientRects().length ) {\r\n                return { top: 0, left: 0 };\r\n            }\r\n\r\n            // Get document-relative position by adding viewport scroll to viewport-relative gBCR\r\n            rect = elem.getBoundingClientRect();\r\n            win = elem.ownerDocument.defaultView;\r\n\r\n            return {\r\n                top: rect.top + win.pageYOffset,\r\n                left: rect.left + win.pageXOffset\r\n            };\r\n        },\r\n\r\n        height: function(el) {\r\n            return mUtil.css(el, 'height');\r\n        },\r\n\r\n        visible: function(el) {\r\n            return !(el.offsetWidth === 0 && el.offsetHeight === 0);\r\n        },\r\n\r\n        attr: function(el, name, value) {\r\n            el = mUtil.get(el);\r\n\r\n            if (el == undefined) {\r\n                return;\r\n            }\r\n\r\n            if (value !== undefined) {\r\n                el.setAttribute(name, value);\r\n            } else {\r\n                return el.getAttribute(name);\r\n            }\r\n        },\r\n\r\n        hasAttr: function(el, name) {\r\n            el = mUtil.get(el);\r\n\r\n            if (el == undefined) {\r\n                return;\r\n            }\r\n\r\n            return el.getAttribute(name) ? true : false;\r\n        },\r\n\r\n        removeAttr: function(el, name) {\r\n            el = mUtil.get(el);\r\n\r\n            if (el == undefined) {\r\n                return;\r\n            }\r\n\r\n            el.removeAttribute(name);\r\n        },\r\n\r\n        animate: function(from, to, duration, update, easing, done) {\r\n            /**\r\n             * TinyAnimate.easings\r\n             *  Adapted from jQuery Easing\r\n             */\r\n            var easings = {};\r\n            var easing;\r\n\r\n            easings.linear = function(t, b, c, d) {\r\n                return c * t / d + b;\r\n            };\r\n\r\n            easing = easings.linear;\r\n\r\n            // Early bail out if called incorrectly\r\n            if (typeof from !== 'number' ||\r\n                typeof to !== 'number' ||\r\n                typeof duration !== 'number' ||\r\n                typeof update !== 'function') {\r\n                return;\r\n            }\r\n\r\n            // Create mock done() function if necessary\r\n            if (typeof done !== 'function') {\r\n                done = function() {};\r\n            }\r\n\r\n            // Pick implementation (requestAnimationFrame | setTimeout)\r\n            var rAF = window.requestAnimationFrame || function(callback) {\r\n                window.setTimeout(callback, 1000 / 50);\r\n            };\r\n\r\n            // Animation loop\r\n            var canceled = false;\r\n            var change = to - from;\r\n\r\n            function loop(timestamp) {\r\n                var time = (timestamp || +new Date()) - start;\r\n\r\n                if (time >= 0) {\r\n                    update(easing(time, from, change, duration));\r\n                }\r\n                if (time >= 0 && time >= duration) {\r\n                    update(to);\r\n                    done();\r\n                } else {\r\n                    rAF(loop);\r\n                }\r\n            }\r\n\r\n            update(from);\r\n\r\n            // Start animation loop\r\n            var start = window.performance && window.performance.now ? window.performance.now() : +new Date();\r\n\r\n            rAF(loop);\r\n        },\r\n\r\n        actualCss: function(el, prop, cache) {\r\n            if (el instanceof HTMLElement === false) {\r\n                return;\r\n            }\r\n\r\n            if (!el.getAttribute('m-hidden-' + prop) || cache === false) {\r\n                var value;\r\n\r\n                // the element is hidden so:\r\n                // making the el block so we can meassure its height but still be hidden\r\n                el.style.cssText = 'position: absolute; visibility: hidden; display: block;';\r\n\r\n                if (prop == 'width') {\r\n                    value = el.offsetWidth;\r\n                } else if (prop == 'height') {\r\n                    value = el.offsetHeight;\r\n                }\r\n\r\n                el.style.cssText = '';\r\n\r\n                // store it in cache\r\n                el.setAttribute('m-hidden-' + prop, value);\r\n\r\n                return parseFloat(value);\r\n            } else {\r\n                // store it in cache\r\n                return parseFloat(el.getAttribute('m-hidden-' + prop));\r\n            }\r\n        },\r\n\r\n        actualHeight: function(el, cache) {\r\n            return mUtil.actualCss(el, 'height', cache);\r\n        },\r\n\r\n        actualWidth: function(el, cache) {\r\n            return mUtil.actualCss(el, 'width', cache);\r\n        },\r\n\r\n        getScroll: function(element, method) {\r\n            // The passed in `method` value should be 'Top' or 'Left'\r\n            method = 'scroll' + method;\r\n            return (element == window || element == document) ? (\r\n                self[(method == 'scrollTop') ? 'pageYOffset' : 'pageXOffset'] ||\r\n                (browserSupportsBoxModel && document.documentElement[method]) ||\r\n                document.body[method]\r\n            ) : element[method];\r\n        },\r\n\r\n        css: function(el, styleProp, value) {\r\n            el = mUtil.get(el);\r\n\r\n            if (!el) {\r\n                return;\r\n            }\r\n\r\n            if (value !== undefined) {\r\n                el.style[styleProp] = value;\r\n            } else {\r\n                var value, defaultView = (el.ownerDocument || document).defaultView;\r\n                // W3C standard way:\r\n                if (defaultView && defaultView.getComputedStyle) {\r\n                    // sanitize property name to css notation\r\n                    // (hyphen separated words eg. font-Size)\r\n                    styleProp = styleProp.replace(/([A-Z])/g, \"-$1\").toLowerCase();\r\n                    return defaultView.getComputedStyle(el, null).getPropertyValue(styleProp);\r\n                } else if (el.currentStyle) { // IE\r\n                    // sanitize property name to camelCase\r\n                    styleProp = styleProp.replace(/\\-(\\w)/g, function(str, letter) {\r\n                        return letter.toUpperCase();\r\n                    });\r\n                    value = el.currentStyle[styleProp];\r\n                    // convert other units to pixels on IE\r\n                    if (/^\\d+(em|pt|%|ex)?$/i.test(value)) {\r\n                        return (function(value) {\r\n                            var oldLeft = el.style.left,\r\n                                oldRsLeft = el.runtimeStyle.left;\r\n                            el.runtimeStyle.left = el.currentStyle.left;\r\n                            el.style.left = value || 0;\r\n                            value = el.style.pixelLeft + \"px\";\r\n                            el.style.left = oldLeft;\r\n                            el.runtimeStyle.left = oldRsLeft;\r\n                            return value;\r\n                        })(value);\r\n                    }\r\n                    return value;\r\n                }\r\n            }\r\n        },\r\n\r\n        slide: function(el, dir, speed, callback, recalcMaxHeight) {\r\n            if (!el || (dir == 'up' && mUtil.visible(el) === false) || (dir == 'down' && mUtil.visible(el) === true)) {\r\n                return;\r\n            }\r\n\r\n            speed = (speed ? speed : 600);\r\n            var calcHeight = mUtil.actualHeight(el);\r\n            var calcPaddingTop = false;\r\n            var calcPaddingBottom = false;\r\n\r\n            if (mUtil.css(el, 'padding-top') && mUtil.data(el).has('slide-padding-top') !== true) {\r\n                mUtil.data(el).set('slide-padding-top', mUtil.css(el, 'padding-top'));\r\n            }\r\n\r\n            if (mUtil.css(el, 'padding-bottom') && mUtil.data(el).has('slide-padding-bottom') !== true) {\r\n                mUtil.data(el).set('slide-padding-bottom', mUtil.css(el, 'padding-bottom'));\r\n            }\r\n\r\n            if (mUtil.data(el).has('slide-padding-top')) {\r\n                calcPaddingTop = parseInt(mUtil.data(el).get('slide-padding-top'));\r\n            }\r\n\r\n            if (mUtil.data(el).has('slide-padding-bottom')) {\r\n                calcPaddingBottom = parseInt(mUtil.data(el).get('slide-padding-bottom'));\r\n            }\r\n\r\n            if (dir == 'up') { // up          \r\n                el.style.cssText = 'display: block; overflow: hidden;';\r\n\r\n                if (calcPaddingTop) {\r\n                    mUtil.animate(0, calcPaddingTop, speed, function(value) {\r\n                        el.style.paddingTop = (calcPaddingTop - value) + 'px';\r\n                    }, 'linear');\r\n                }\r\n\r\n                if (calcPaddingBottom) {\r\n                    mUtil.animate(0, calcPaddingBottom, speed, function(value) {\r\n                        el.style.paddingBottom = (calcPaddingBottom - value) + 'px';\r\n                    }, 'linear');\r\n                }\r\n\r\n                mUtil.animate(0, calcHeight, speed, function(value) {\r\n                    el.style.height = (calcHeight - value) + 'px';\r\n                }, 'linear', function() {\r\n                    callback();\r\n                    el.style.height = '';\r\n                    el.style.display = 'none';\r\n                });\r\n\r\n\r\n            } else if (dir == 'down') { // down\r\n                el.style.cssText = 'display: block; overflow: hidden;';\r\n\r\n                if (calcPaddingTop) {\r\n                    mUtil.animate(0, calcPaddingTop, speed, function(value) {\r\n                        el.style.paddingTop = value + 'px';\r\n                    }, 'linear', function() {\r\n                        el.style.paddingTop = '';\r\n                    });\r\n                }\r\n\r\n                if (calcPaddingBottom) {\r\n                    mUtil.animate(0, calcPaddingBottom, speed, function(value) {\r\n                        el.style.paddingBottom = value + 'px';\r\n                    }, 'linear', function() {\r\n                        el.style.paddingBottom = '';\r\n                    });\r\n                }\r\n\r\n                mUtil.animate(0, calcHeight, speed, function(value) {\r\n                    el.style.height = value + 'px';\r\n                }, 'linear', function() {\r\n                    callback();\r\n                    el.style.height = '';\r\n                    el.style.display = '';\r\n                    el.style.overflow = '';\r\n                });\r\n            }\r\n        },\r\n\r\n        slideUp: function(el, speed, callback) {\r\n            mUtil.slide(el, 'up', speed, callback);\r\n        },\r\n\r\n        slideDown: function(el, speed, callback) {\r\n            mUtil.slide(el, 'down', speed, callback);\r\n        },\r\n\r\n        show: function(el, display) {\r\n            el.style.display = (display ? display : 'block');\r\n        },\r\n\r\n        hide: function(el) {\r\n            el.style.display = 'none';\r\n        },\r\n\r\n        addEvent: function(el, type, handler, one) {\r\n            el = mUtil.get(el);\r\n            if (typeof el !== 'undefined') {\r\n                el.addEventListener(type, handler);\r\n            }\r\n        },\r\n\r\n        removeEvent: function(el, type, handler) {\r\n            el = mUtil.get(el);\r\n            el.removeEventListener(type, handler);\r\n        },\r\n\r\n        on: function(element, selector, event, handler) {\r\n            if (!selector) {\r\n                return;\r\n            }\r\n\r\n            var eventId = mUtil.getUniqueID('event');\r\n\r\n            mUtilDelegatedEventHandlers[eventId] = function(e) {\r\n                var targets = element.querySelectorAll(selector);\r\n                var target = e.target;\r\n\r\n                while (target && target !== element) {\r\n                    for (var i = 0, j = targets.length; i < j; i++) {\r\n                        if (target === targets[i]) {\r\n                            handler.call(target, e);\r\n                        }\r\n                    }\r\n\r\n                    target = target.parentNode;\r\n                }\r\n            }\r\n\r\n            mUtil.addEvent(element, event, mUtilDelegatedEventHandlers[eventId]);\r\n\r\n            return eventId;\r\n        },\r\n\r\n        off: function(element, event, eventId) {\r\n            if (!element || !mUtilDelegatedEventHandlers[eventId]) {\r\n                return;\r\n            }\r\n\r\n            mUtil.removeEvent(element, event, mUtilDelegatedEventHandlers[eventId]);\r\n\r\n            delete mUtilDelegatedEventHandlers[eventId];\r\n        },\r\n\r\n        one: function onetime(el, type, callback) {\r\n            el = mUtil.get(el);\r\n\r\n            el.addEventListener(type, function(e) {\r\n                // remove event\r\n                e.target.removeEventListener(e.type, arguments.callee);\r\n                // call handler\r\n                return callback(e);\r\n            });\r\n        },\r\n\r\n        hash: function(str) {\r\n            var hash = 0,\r\n                i, chr;\r\n\r\n            if (str.length === 0) return hash;\r\n            for (i = 0; i < str.length; i++) {\r\n                chr = str.charCodeAt(i);\r\n                hash = ((hash << 5) - hash) + chr;\r\n                hash |= 0; // Convert to 32bit integer\r\n            }\r\n\r\n            return hash;\r\n        },\r\n\r\n        animateClass: function(el, animationName, callback) {\r\n            var animationEnd = 'webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend';\r\n\r\n            mUtil.addClass(el, 'animated ' + animationName);\r\n\r\n            mUtil.one(el, animationEnd, function() {\r\n                mUtil.removeClass(el, 'animated ' + animationName);\r\n            });\r\n\r\n            if (callback) {\r\n                mUtil.one(el.animationEnd, callback);\r\n            }\r\n        },\r\n\r\n        animateDelay: function(el, value) {\r\n            var vendors = ['webkit-', 'moz-', 'ms-', 'o-', ''];\r\n            for (var i = 0; i < vendors.length; i++) {\r\n                mUtil.css(el, vendors[i] + 'animation-delay', value);\r\n            }\r\n        },\r\n\r\n        animateDuration: function(el, value) {\r\n            var vendors = ['webkit-', 'moz-', 'ms-', 'o-', ''];\r\n            for (var i = 0; i < vendors.length; i++) {\r\n                mUtil.css(el, vendors[i] + 'animation-duration', value);\r\n            }\r\n        },\r\n\r\n        scrollTo: function(target, offset, duration) {\r\n            var duration = duration ? duration : 500;\r\n            var target = mUtil.get(target);\r\n            var targetPos = target ? mUtil.offset(target).top : 0;\r\n            var scrollPos = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop || 0;\r\n            var from, to;\r\n\r\n            if (targetPos > scrollPos) {\r\n                from = targetPos;\r\n                to = scrollPos;\r\n            } else {\r\n                from = scrollPos;\r\n                to = targetPos;\r\n            }\r\n\r\n            if (offset) {\r\n                to += offset;\r\n            }\r\n\r\n            mUtil.animate(from, to, duration, function(value) {\r\n                document.documentElement.scrollTop = value;\r\n                document.body.parentNode.scrollTop = value;\r\n                document.body.scrollTop = value;\r\n            }); //, easing, done\r\n        },\r\n\r\n        scrollTop: function(offset, duration) {\r\n            mUtil.scrollTo(null, offset, duration);\r\n        },\r\n\r\n        isArray: function(obj) {\r\n            return obj && Array.isArray(obj);\r\n        },\r\n\r\n        ready: function(callback) {\r\n            if (document.attachEvent ? document.readyState === \"complete\" : document.readyState !== \"loading\") {\r\n                callback();\r\n            } else {\r\n                document.addEventListener('DOMContentLoaded', callback);\r\n            }\r\n        },\r\n\r\n        isEmpty: function(obj) {\r\n            for (var prop in obj) {\r\n                if (obj.hasOwnProperty(prop)) {\r\n                    return false;\r\n                }\r\n            }\r\n\r\n            return true;\r\n        },\r\n\r\n        numberString: function(nStr) {\r\n            nStr += '';\r\n            var x = nStr.split('.');\r\n            var x1 = x[0];\r\n            var x2 = x.length > 1 ? '.' + x[1] : '';\r\n            var rgx = /(\\d+)(\\d{3})/;\r\n            while (rgx.test(x1)) {\r\n                x1 = x1.replace(rgx, '$1' + ',' + '$2');\r\n            }\r\n            return x1 + x2;\r\n        },\r\n\r\n        detectIE: function() {\r\n            var ua = window.navigator.userAgent;\r\n\r\n            // Test values; Uncomment to check result …\r\n\r\n            // IE 10\r\n            // ua = 'Mozilla/5.0 (compatible; MSIE 10.0; Windows NT 6.2; Trident/6.0)';\r\n\r\n            // IE 11\r\n            // ua = 'Mozilla/5.0 (Windows NT 6.3; Trident/7.0; rv:11.0) like Gecko';\r\n\r\n            // Edge 12 (Spartan)\r\n            // ua = 'Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/39.0.2171.71 Safari/537.36 Edge/12.0';\r\n\r\n            // Edge 13\r\n            // ua = 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/46.0.2486.0 Safari/537.36 Edge/13.10586';\r\n\r\n            var msie = ua.indexOf('MSIE ');\r\n            if (msie > 0) {\r\n                // IE 10 or older => return version number\r\n                return parseInt(ua.substring(msie + 5, ua.indexOf('.', msie)), 10);\r\n            }\r\n\r\n            var trident = ua.indexOf('Trident/');\r\n            if (trident > 0) {\r\n                // IE 11 => return version number\r\n                var rv = ua.indexOf('rv:');\r\n                return parseInt(ua.substring(rv + 3, ua.indexOf('.', rv)), 10);\r\n            }\r\n\r\n            var edge = ua.indexOf('Edge/');\r\n            if (edge > 0) {\r\n                // Edge (IE 12+) => return version number\r\n                return parseInt(ua.substring(edge + 5, ua.indexOf('.', edge)), 10);\r\n            }\r\n\r\n            // other browser\r\n            return false;\r\n        },\r\n\r\n        isRTL: function() {\r\n            return (mUtil.attr(mUtil.get('html'), 'direction') == 'rtl');\r\n        },\r\n\r\n        //== Scroller\r\n        scrollerInit: function(element, options) {\r\n            //== Define init function\r\n            function init() {\r\n                var ps;\r\n                var height;\r\n\r\n                if (options.height instanceof Function) {\r\n                    height = parseInt(options.height.call());\r\n                } else {\r\n                    height = parseInt(options.height);\r\n                }\r\n\r\n                //== Destroy scroll on table and mobile modes\r\n                if (options.disableForMobile && mUtil.isInResponsiveRange('tablet-and-mobile')) {\r\n                    if (ps = mUtil.data(element).get('ps')) {\r\n                        if (options.resetHeightOnDestroy) {\r\n                            mUtil.css(element, 'height', 'auto');\r\n                        } else {\r\n                            mUtil.css(element, 'overflow', 'auto');\r\n                            if (height > 0) {\r\n                                mUtil.css(element, 'height', height + 'px');\r\n                            }\r\n                        }\r\n\r\n                        ps.destroy();\r\n                        ps = mUtil.data(element).remove('ps');\r\n                    } else if (height > 0){\r\n                        mUtil.css(element, 'overflow', 'auto');\r\n                        mUtil.css(element, 'height', height + 'px');\r\n                    }\r\n\r\n                    return;\r\n                }\r\n\r\n                if (height > 0) {\r\n                    mUtil.css(element, 'height', height + 'px');\r\n                }\r\n\r\n                mUtil.css(element, 'overflow', 'hidden');\r\n\r\n                //== Init scroll\r\n                if (ps = mUtil.data(element).get('ps')) {\r\n                    ps.update();\r\n                } else {\r\n                    mUtil.addClass(element, 'm-scroller');\r\n                    ps = new PerfectScrollbar(element, {\r\n                        wheelSpeed: 0.5,\r\n                        swipeEasing: true,\r\n                        wheelPropagation: false,\r\n                        minScrollbarLength: 40,\r\n                        suppressScrollX: true\r\n                    });\r\n\r\n                    mUtil.data(element).set('ps', ps);\r\n                }\r\n            }\r\n\r\n            //== Init\r\n            init();\r\n\r\n            //== Handle window resize\r\n            if (options.handleWindowResize) {\r\n                mUtil.addResizeHandler(function() {\r\n                    init();\r\n                });\r\n            }\r\n        },\r\n\r\n        scrollerUpdate: function(element) {\r\n            var ps;\r\n            if (ps = mUtil.data(element).get('ps')) {\r\n                console.log('update!');\r\n                ps.update();\r\n            }\r\n        },\r\n\r\n        scrollersUpdate: function(parent) {\r\n            var scrollers = mUtil.findAll(parent, '.ps');\r\n            for (var i = 0, len = scrollers.length; i < len; i++) {\r\n                mUtil.scrollerUpdate(scrollers[i]);\r\n            }\r\n        },\r\n\r\n        scrollerTop: function(element) {\r\n            var ps;\r\n            if (ps = mUtil.data(element).get('ps')) {\r\n                element.scrollTop = 0;\r\n            }\r\n        },\r\n\r\n        scrollerDestroy: function(element) {\r\n            var ps;\r\n            if (ps = mUtil.data(element).get('ps')) {\r\n                ps.destroy();\r\n                ps = mUtil.data(element).remove('ps');\r\n            }\r\n        }\r\n    }\r\n}();\r\n\r\n//== Initialize mUtil class on document ready\r\nmUtil.ready(function() {\r\n    mUtil.init();\r\n});\n/**\r\n * @class mApp  Metronic App class\r\n */\r\n\r\nvar mApp = function() {\r\n\r\n    /** @type {object} colors State colors **/\r\n    var colors = {\r\n        brand:      '#716aca',\r\n        metal:      '#c4c5d6',\r\n        light:      '#ffffff',\r\n        accent:     '#00c5dc',\r\n        primary:    '#5867dd',\r\n        success:    '#34bfa3',\r\n        info:       '#36a3f7',\r\n        warning:    '#ffb822',\r\n        danger:     '#f4516c',\r\n        focus:      '#9816f4'\r\n    }\r\n\r\n    /**\r\n    * Initializes bootstrap tooltip\r\n    */\r\n    var initTooltip = function(el) {\r\n        var skin = el.data('skin') ? 'm-tooltip--skin-' + el.data('skin') : '';\r\n        var width = el.data('width') == 'auto' ? 'm-tooltop--auto-width' : '';\r\n        var triggerValue = el.data('trigger') ? el.data('trigger') : 'hover';\r\n        var placement = el.data('placement') ? el.data('placement') : 'left';\r\n                    \r\n        el.tooltip({\r\n            trigger: triggerValue,\r\n            template: '<div class=\"m-tooltip ' + skin + ' ' + width + ' tooltip\" role=\"tooltip\">\\\r\n                <div class=\"arrow\"></div>\\\r\n                <div class=\"tooltip-inner\"></div>\\\r\n            </div>'\r\n        });\r\n    }\r\n    \r\n    /**\r\n    * Initializes bootstrap tooltips\r\n    */\r\n    var initTooltips = function() {\r\n        // init bootstrap tooltips\r\n        $('[data-toggle=\"m-tooltip\"]').each(function() {\r\n            initTooltip($(this));\r\n        });\r\n    }\r\n\r\n    /**\r\n    * Initializes bootstrap popover\r\n    */\r\n    var initPopover = function(el) {\r\n        var skin = el.data('skin') ? 'm-popover--skin-' + el.data('skin') : '';\r\n        var triggerValue = el.data('trigger') ? el.data('trigger') : 'hover';\r\n            \r\n        el.popover({\r\n            trigger: triggerValue,\r\n            template: '\\\r\n            <div class=\"m-popover ' + skin + ' popover\" role=\"tooltip\">\\\r\n                <div class=\"arrow\"></div>\\\r\n                <h3 class=\"popover-header\"></h3>\\\r\n                <div class=\"popover-body\"></div>\\\r\n            </div>'\r\n        });\r\n    }\r\n\r\n    /**\r\n    * Initializes bootstrap popovers\r\n    */\r\n    var initPopovers = function() {\r\n        // init bootstrap popover\r\n        $('[data-toggle=\"m-popover\"]').each(function() {\r\n            initPopover($(this));\r\n        });\r\n    }\r\n\r\n    /**\r\n    * Initializes bootstrap file input\r\n    */\r\n    var initFileInput = function() {\r\n        // init bootstrap popover\r\n        $('.custom-file-input').on('change',function(){\r\n            var fileName = $(this).val();\r\n            $(this).next('.custom-file-label').addClass(\"selected\").html(fileName);\r\n        });\r\n    }           \r\n\r\n    /**\r\n    * Initializes metronic portlet\r\n    */\r\n    var initPortlet = function(el, options) {\r\n        // init portlet tools\r\n        var el = $(el);\r\n        var portlet = new mPortlet(el[0], options);\r\n    }\r\n\r\n    /**\r\n    * Initializes metronic portlets\r\n    */\r\n    var initPortlets = function() {\r\n        // init portlet tools\r\n        $('[m-portlet=\"true\"]').each(function() {\r\n            var el = $(this);\r\n\r\n            if ( el.data('portlet-initialized') !== true ) {\r\n                initPortlet(el, {});\r\n                el.data('portlet-initialized', true);\r\n            }\r\n        });\r\n    }\r\n\r\n    /**\r\n    * Initializes scrollable contents\r\n    */\r\n    var initScrollers = function() {\r\n        $('[data-scrollable=\"true\"]').each(function(){\r\n            var el = $(this);\r\n            mUtil.scrollerInit(this, {disableForMobile: true, handleWindowResize: true, height: function() {\r\n                if (mUtil.isInResponsiveRange('tablet-and-mobile') && el.data('mobile-height')) {\r\n                    return el.data('mobile-height');\r\n                } else {\r\n                    return el.data('height');\r\n                }\r\n            }});\r\n        });\r\n    }\r\n\r\n    /**\r\n    * Initializes bootstrap alerts\r\n    */\r\n    var initAlerts = function() {\r\n        // init bootstrap popover\r\n        $('body').on('click', '[data-close=alert]', function() {\r\n            $(this).closest('.alert').hide();\r\n        });\r\n    }\r\n\r\n    /**\r\n    * Initializes Metronic custom tabs\r\n    */\r\n    var initCustomTabs = function() {\r\n        // init bootstrap popover\r\n        $('[data-tab-target]').each(function() {\r\n            if ($(this).data('tabs-initialized') == true ) {\r\n                return;\r\n            }\r\n\r\n            $(this).click(function(e) {\r\n                e.preventDefault();\r\n                \r\n                var tab = $(this);\r\n                var tabs = tab.closest('[data-tabs=\"true\"]');\r\n                var contents = $( tabs.data('tabs-contents') );\r\n                var content = $( tab.data('tab-target') );\r\n\r\n                tabs.find('.m-tabs__item.m-tabs__item--active').removeClass('m-tabs__item--active');\r\n                tab.addClass('m-tabs__item--active');\r\n\r\n                contents.find('.m-tabs-content__item.m-tabs-content__item--active').removeClass('m-tabs-content__item--active');\r\n                content.addClass('m-tabs-content__item--active');         \r\n            });\r\n\r\n            $(this).data('tabs-initialized', true);\r\n        });\r\n    }\r\n\r\n\tvar hideTouchWarning = function() {\r\n\t\tjQuery.event.special.touchstart = {\r\n\t\t\tsetup: function(_, ns, handle) {\r\n\t\t\t\tif (typeof this === 'function')\r\n\t\t\t\t\tif (ns.includes('noPreventDefault')) {\r\n\t\t\t\t\t\tthis.addEventListener('touchstart', handle, {passive: false});\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.addEventListener('touchstart', handle, {passive: true});\r\n\t\t\t\t\t}\r\n\t\t\t},\r\n\t\t};\r\n\t\tjQuery.event.special.touchmove = {\r\n\t\t\tsetup: function(_, ns, handle) {\r\n\t\t\t\tif (typeof this === 'function')\r\n\t\t\t\t\tif (ns.includes('noPreventDefault')) {\r\n\t\t\t\t\t\tthis.addEventListener('touchmove', handle, {passive: false});\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.addEventListener('touchmove', handle, {passive: true});\r\n\t\t\t\t\t}\r\n\t\t\t},\r\n\t\t};\r\n\t\tjQuery.event.special.wheel = {\r\n\t\t\tsetup: function(_, ns, handle) {\r\n\t\t\t\tif (typeof this === 'function')\r\n\t\t\t\t\tif (ns.includes('noPreventDefault')) {\r\n\t\t\t\t\t\tthis.addEventListener('wheel', handle, {passive: false});\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.addEventListener('wheel', handle, {passive: true});\r\n\t\t\t\t\t}\r\n\t\t\t},\r\n\t\t};\r\n\t};\r\n\r\n    return {\r\n        /**\r\n        * Main class initializer\r\n        */\r\n        init: function(options) {\r\n            if (options && options.colors) {\r\n                colors = options.colors;\r\n            }\r\n            mApp.initComponents();\r\n        },\r\n\r\n        /**\r\n        * Initializes components\r\n        */\r\n        initComponents: function() {\r\n            hideTouchWarning();\r\n            initScrollers();\r\n            initTooltips();\r\n            initPopovers();\r\n            initAlerts();\r\n            initPortlets();\r\n            initFileInput();\r\n            initCustomTabs();\r\n        },\r\n\r\n\r\n        /**\r\n        * Init custom tabs\r\n        */\r\n        initCustomTabs: function() {\r\n            initCustomTabs();\r\n        },\r\n\r\n        /**\r\n        * \r\n        * @param {object} el jQuery element object\r\n        */\r\n        // wrJangoer function to scroll(focus) to an element\r\n        initTooltips: function() {\r\n            initTooltips();\r\n        },\r\n\r\n        /**\r\n        * \r\n        * @param {object} el jQuery element object\r\n        */\r\n        // wrJangoer function to scroll(focus) to an element\r\n        initTooltip: function(el) {\r\n            initTooltip(el);\r\n        },\r\n\r\n        /**\r\n        * \r\n        * @param {object} el jQuery element object\r\n        */\r\n        // wrJangoer function to scroll(focus) to an element\r\n        initPopovers: function() {\r\n            initPopovers();\r\n        },\r\n\r\n        /**\r\n        * \r\n        * @param {object} el jQuery element object\r\n        */\r\n        // wrJangoer function to scroll(focus) to an element\r\n        initPopover: function(el) {\r\n            initPopover(el);\r\n        },\r\n\r\n        /**\r\n        * \r\n        * @param {object} el jQuery element object\r\n        */\r\n        // function to init portlet\r\n        initPortlet: function(el, options) {\r\n            initPortlet(el, options);\r\n        },\r\n\r\n        /**\r\n        * \r\n        * @param {object} el jQuery element object\r\n        */\r\n        // function to init portlets\r\n        initPortlets: function() {\r\n            initPortlets();\r\n        },\r\n\r\n        /**\r\n        * Blocks element with loading indiciator using http://malsup.com/jquery/block/\r\n        * @param {object} target jQuery element object\r\n        * @param {object} options \r\n        */\r\n        block: function(target, options) {\r\n            var el = $(target);\r\n\r\n            options = $.extend(true, {\r\n                opacity: 0.03,\r\n                overlayColor: '#000000',\r\n                state: 'brand',\r\n                type: 'loader',\r\n                size: 'lg',\r\n                centerX: true,\r\n                centerY: true,\r\n                message: '',\r\n                shadow: true,\r\n                width: 'auto'\r\n            }, options);\r\n\r\n            var skin;\r\n            var state;\r\n            var loading;\r\n\r\n            if (options.type == 'spinner') {\r\n                skin = options.skin ? 'm-spinner--skin-' + options.skin : '';\r\n                state = options.state ? 'm-spinner--' + options.state : '';\r\n                loading = '<div class=\"m-spinner ' + skin + ' ' + state + '\"></div';\r\n            } else {\r\n                skin = options.skin ? 'm-loader--skin-' + options.skin : '';\r\n                state = options.state ? 'm-loader--' + options.state : '';\r\n                size = options.size ? 'm-loader--' + options.size : '';\r\n                loading = '<div class=\"m-loader ' + skin + ' ' + state + ' ' + size + '\"></div';\r\n            }\r\n\r\n            if (options.message && options.message.length > 0) {\r\n                var classes = 'm-blockui ' + (options.shadow === false ? 'm-blockui-no-shadow' : '');\r\n\r\n                html = '<div class=\"' + classes + '\"><span>' + options.message + '</span><span>' + loading + '</span></div>';\r\n\r\n                var el = document.createElement('div');\r\n                mUtil.get('body').prepend(el);\r\n                mUtil.addClass(el, classes);\r\n                el.innerHTML = '<span>' + options.message + '</span><span>' + loading + '</span>';\r\n                options.width = mUtil.actualWidth(el) + 10;\r\n                mUtil.remove(el);\r\n\r\n                if (target == 'body') {\r\n                    html = '<div class=\"' + classes + '\" style=\"margin-left:-'+ (options.width / 2) +'px;\"><span>' + options.message + '</span><span>' + loading + '</span></div>';\r\n                }\r\n            } else {\r\n                html = loading;\r\n            }\r\n\r\n            var params = {\r\n                message: html,\r\n                centerY: options.centerY,\r\n                centerX: options.centerX,\r\n                css: {\r\n                    top: '30%',\r\n                    left: '50%',\r\n                    border: '0',\r\n                    padding: '0',\r\n                    backgroundColor: 'none',\r\n                    width: options.width\r\n                },\r\n                overlayCSS: {\r\n                    backgroundColor: options.overlayColor,\r\n                    opacity: options.opacity,\r\n                    cursor: 'wait',\r\n                    zIndex: '10'\r\n                },\r\n                onUnblock: function() {\r\n                    if (el && el[0]) {\r\n                        mUtil.css(el[0], 'position', '');\r\n                        mUtil.css(el[0], 'zoom', '');\r\n                    }                    \r\n                }\r\n            };\r\n\r\n            if (target == 'body') {\r\n                params.css.top = '50%';\r\n                $.blockUI(params);\r\n            } else {\r\n                var el = $(target);\r\n                el.block(params);\r\n            }\r\n        },\r\n\r\n        /**\r\n        * Un-blocks the blocked element \r\n        * @param {object} target jQuery element object\r\n        */\r\n        unblock: function(target) {\r\n            if (target && target != 'body') {\r\n                $(target).unblock();\r\n            } else {\r\n                $.unblockUI();\r\n            }\r\n        },\r\n\r\n        /**\r\n        * Blocks the page body element with loading indicator\r\n        * @param {object} options \r\n        */\r\n        blockPage: function(options) {\r\n            return mApp.block('body', options);\r\n        },\r\n\r\n        /**\r\n        * Un-blocks the blocked page body element\r\n        */\r\n        unblockPage: function() {\r\n            return mApp.unblock('body');\r\n        },\r\n\r\n        /**\r\n        * Enable loader progress for button and other elements\r\n        * @param {object} target jQuery element object\r\n        * @param {object} options\r\n        */\r\n        progress: function(target, options) {\r\n            var skin = (options && options.skin) ? options.skin : 'light';\r\n            var alignment = (options && options.alignment) ? options.alignment : 'right'; \r\n            var size = (options && options.size) ? 'm-spinner--' + options.size : ''; \r\n            var classes = 'm-loader ' + 'm-loader--' + skin + ' m-loader--' + alignment + ' m-loader--' + size;\r\n\r\n            mApp.unprogress(target);\r\n            \r\n            $(target).addClass(classes);\r\n            $(target).data('progress-classes', classes);\r\n        },\r\n\r\n        /**\r\n        * Disable loader progress for button and other elements\r\n        * @param {object} target jQuery element object\r\n        */\r\n        unprogress: function(target) {\r\n            $(target).removeClass($(target).data('progress-classes'));\r\n        },\r\n\r\n        /**\r\n        * Gets state color's hex code by color name\r\n        * @param {string} name Color name\r\n        * @returns {string}  \r\n        */\r\n        getColor: function(name) {\r\n            return colors[name];\r\n        }\r\n    };\r\n}();\nvar mDropdown = function(elementId, options) {\r\n    //== Main object\r\n    var the = this;\r\n    var init = false;\r\n\r\n    //== Get element object\r\n    var element = mUtil.get(elementId);\r\n    var body = mUtil.get('body');\r\n\r\n    if (!element) {\r\n        return;\r\n    }\r\n\r\n    //== Default options\r\n    var defaultOptions = {\r\n        toggle: 'click',\r\n        hoverTimeout: 300,\r\n        skin: 'light',\r\n        height: 'auto',\r\n        maxHeight: false,\r\n        minHeight: false,\r\n        persistent: false,\r\n        mobileOverlay: true\r\n    };\r\n\r\n    ////////////////////////////\r\n    // ** Private Methods  ** //\r\n    ////////////////////////////\r\n\r\n    var Plugin = {\r\n        /**\r\n         * Run plugin\r\n         * @returns {mdropdown}\r\n         */\r\n        construct: function(options) {\r\n            if (mUtil.data(element).has('dropdown')) {\r\n                the = mUtil.data(element).get('dropdown');\r\n            } else {\r\n                // reset dropdown\r\n                Plugin.init(options);\r\n\r\n                Plugin.setup();\r\n\r\n                mUtil.data(element).set('dropdown', the);\r\n            }\r\n\r\n            return the;\r\n        },\r\n\r\n        /**\r\n         * Handles subdropdown click toggle\r\n         * @returns {mdropdown}\r\n         */\r\n        init: function(options) {\r\n            // merge default and user defined options\r\n            the.options = mUtil.deepExtend({}, defaultOptions, options);\r\n            the.events = [];\r\n            the.eventHandlers = {};\r\n            the.open = false;\r\n            \r\n            the.layout = {};\r\n            the.layout.close = mUtil.find(element, '.m-dropdown__close');\r\n            the.layout.toggle = mUtil.find(element, '.m-dropdown__toggle');\r\n            the.layout.arrow = mUtil.find(element, '.m-dropdown__arrow');\r\n            the.layout.wrapper = mUtil.find(element, '.m-dropdown__wrapper');\r\n            the.layout.defaultDropPos = mUtil.hasClass(element, 'm-dropdown--up') ? 'up' : 'down';\r\n            the.layout.currentDropPos = the.layout.defaultDropPos;\r\n\r\n            if (mUtil.attr(element, 'm-dropdown-toggle') == \"hover\") {\r\n                the.options.toggle = 'hover';\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Setup dropdown\r\n         */\r\n        setup: function() {\r\n            if (the.options.placement) {\r\n                mUtil.addClass(element, 'm-dropdown--' + the.options.placement);\r\n            }\r\n\r\n            if (the.options.align) {\r\n                mUtil.addClass(element, 'm-dropdown--align-' + the.options.align);\r\n            }\r\n\r\n            if (the.options.width) {\r\n                mUtil.css(the.layout.wrapper, 'width', the.options.width + 'px');\r\n            }\r\n\r\n            if (mUtil.attr(element, 'm-dropdown-persistent') == '1') {\r\n                the.options.persistent = true;\r\n            }\r\n\r\n            if (the.options.toggle == 'hover') {    \r\n                mUtil.addEvent(element, 'mouseout', Plugin.hideMouseout);\r\n            } \r\n\r\n            // set zindex\r\n            Plugin.setZindex();\r\n        },\r\n\r\n        /**\r\n         * Toggle dropdown\r\n         */\r\n        toggle: function() {\r\n            if (the.open) {\r\n                return Plugin.hide();\r\n            } else {\r\n                return Plugin.show();\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Set content\r\n         */\r\n        setContent: function(content) {\r\n            var content = mUtil.find(element, '.m-dropdown__content').innerHTML = content;\r\n\r\n            return the;\r\n        },\r\n\r\n        /**\r\n         * Show dropdown\r\n         */\r\n        show: function() {\r\n            if (the.options.toggle == 'hover' && mUtil.hasAttr(element, 'hover')) {\r\n                Plugin.clearHovered();\r\n                return the;\r\n            }\r\n\r\n            if (the.open) {\r\n                return the;\r\n            }\r\n\r\n            if (the.layout.arrow) {\r\n                Plugin.adjustArrowPos();\r\n            }\r\n\r\n            Plugin.eventTrigger('beforeShow');\r\n\r\n            Plugin.hideOpened();\r\n\r\n            mUtil.addClass(element, 'm-dropdown--open');\r\n\r\n            if (mUtil.isMobileDevice() && the.options.mobileOverlay) {\r\n                var zIndex = mUtil.css(element, 'z-index') - 1;\r\n\r\n                var dropdownoff = mUtil.insertAfter(document.createElement('DIV'), element );\r\n\r\n                mUtil.addClass(dropdownoff, 'm-dropdown__dropoff');\r\n                mUtil.css(dropdownoff, 'z-index', zIndex);\r\n                mUtil.data(dropdownoff).set('dropdown', element);\r\n                mUtil.data(element).set('dropoff', dropdownoff);\r\n\r\n                mUtil.addEvent(dropdownoff, 'click', function(e) {\r\n                    Plugin.hide();\r\n                    mUtil.remove(this);\r\n                    e.preventDefault();\r\n                });\r\n            }\r\n\r\n            element.focus();\r\n            element.setAttribute('aria-expanded', 'true');\r\n            the.open = true;\r\n\r\n            //== Update scrollers\r\n            mUtil.scrollersUpdate(element);\r\n\r\n            Plugin.eventTrigger('afterShow');\r\n\r\n            return the;\r\n        },\r\n\r\n        /**\r\n         * Clear dropdown hover\r\n         */\r\n        clearHovered: function() {\r\n            var timeout = mUtil.attr(element, 'timeout');\r\n\r\n            mUtil.removeAttr(element, 'hover');            \r\n            mUtil.removeAttr(element, 'timeout');\r\n\r\n            clearTimeout(timeout);\r\n        },\r\n\r\n        /**\r\n         * Hide hovered dropdown\r\n         */\r\n        hideHovered: function(force) {\r\n            if (force === true) {\r\n                if (Plugin.eventTrigger('beforeHide') === false) {\r\n                    return;\r\n                }\r\n\r\n                Plugin.clearHovered();\r\n                mUtil.removeClass(element, 'm-dropdown--open');\r\n                the.open = false;\r\n                Plugin.eventTrigger('afterHide');\r\n            } else {\r\n                if (mUtil.hasAttr(element, 'hover') === true) {\r\n                    return;\r\n                }\r\n\r\n                if (Plugin.eventTrigger('beforeHide') === false) {\r\n                    return;\r\n                }\r\n\r\n                var timeout = setTimeout(function() {\r\n                    if (mUtil.attr(element, 'hover')) {\r\n                        Plugin.clearHovered();\r\n                        mUtil.removeClass(element, 'm-dropdown--open');\r\n                        the.open = false;\r\n                        Plugin.eventTrigger('afterHide');\r\n                    }\r\n                }, the.options.hoverTimeout);\r\n\r\n                mUtil.attr(element, 'hover', '1');            \r\n                mUtil.attr(element, 'timeout', timeout);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Hide clicked dropdown\r\n         */\r\n        hideClicked: function() {\r\n            if (Plugin.eventTrigger('beforeHide') === false) {\r\n                return;\r\n            }\r\n\r\n            mUtil.removeClass(element, 'm-dropdown--open');\r\n            mUtil.data(element).remove('dropoff');\r\n            the.open = false;\r\n            Plugin.eventTrigger('afterHide');\r\n        },\r\n\r\n        /**\r\n         * Hide dropdown\r\n         */\r\n        hide: function(force) {\r\n            if (the.open === false) {\r\n                return the;\r\n            }\r\n\r\n            if (mUtil.isDesktopDevice() && the.options.toggle == 'hover') {\r\n                Plugin.hideHovered(force);\r\n            } else {\r\n                Plugin.hideClicked();\r\n            }\r\n\r\n            if (the.layout.defaultDropPos == 'down' && the.layout.currentDropPos == 'up') {\r\n                mUtil.removeClass(element, 'm-dropdown--up');\r\n                the.layout.arrow.prependTo(the.layout.wrapper);\r\n                the.layout.currentDropPos = 'down';\r\n            }\r\n\r\n            return the;\r\n        },\r\n\r\n        /**\r\n         * Hide on mouseout\r\n         */\r\n        hideMouseout: function() {\r\n            if (mUtil.isDesktopDevice()) {\r\n                Plugin.hide();\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Hide opened dropdowns\r\n         */\r\n        hideOpened: function() {\r\n            var query = mUtil.findAll(body, '.m-dropdown.m-dropdown--open');\r\n            \r\n            for (var i = 0, j = query.length; i < j; i++) {\r\n                var dropdown = query[i];\r\n                mUtil.data(dropdown).get('dropdown').hide(true);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Adjust dropdown arrow positions\r\n         */\r\n        adjustArrowPos: function() {\r\n            var width = mUtil.outerWidth(element); // ?\r\n\r\n            var alignment = mUtil.hasClass(the.layout.arrow, 'm-dropdown__arrow--right') ? 'right' : 'left';\r\n            var pos = 0;\r\n\r\n            if (the.layout.arrow) {\r\n                if ( mUtil.isInResponsiveRange('mobile') && mUtil.hasClass(element, 'm-dropdown--mobile-full-width') ) {\r\n                    pos = mUtil.offset(element).left + (width / 2) - Math.abs( parseInt(mUtil.css(the.layout.arrow, 'width')) / 2) - parseInt(mUtil.css(the.layout.wrapper, 'left'));\r\n                    \r\n                    mUtil.css(the.layout.arrow, 'right', 'auto');\r\n                    mUtil.css(the.layout.arrow, 'left', pos + 'px');\r\n                    \r\n                    mUtil.css(the.layout.arrow, 'margin-left', 'auto');\r\n                    mUtil.css(the.layout.arrow, 'margin-right', 'auto');\r\n                } else if (mUtil.hasClass(the.layout.arrow, 'm-dropdown__arrow--adjust')) {\r\n                    pos = width / 2 - Math.abs( parseInt(mUtil.css(the.layout.arrow, 'width')) / 2);\r\n                    if (mUtil.hasClass(element, 'm-dropdown--align-push')) {\r\n                        pos = pos + 20;\r\n                    }\r\n\r\n                    if (alignment == 'right') {\r\n                        if (mUtil.isRTL()) {\r\n                            mUtil.css(the.layout.arrow, 'right', 'auto');\r\n                            mUtil.css(the.layout.arrow, 'left', pos + 'px');\r\n                        } else {\r\n                            mUtil.css(the.layout.arrow, 'left', 'auto');\r\n                            mUtil.css(the.layout.arrow, 'right', pos + 'px');\r\n                        }\r\n                    } else {\r\n                        if (mUtil.isRTL()) {\r\n                            mUtil.css(the.layout.arrow, 'left', 'auto');\r\n                            mUtil.css(the.layout.arrow, 'right', pos + 'px');\r\n                        } else {\r\n                            mUtil.css(the.layout.arrow, 'right', 'auto');\r\n                            mUtil.css(the.layout.arrow, 'left', pos + 'px');\r\n                        }                       \r\n                    }\r\n                }\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Get zindex\r\n         */\r\n        setZindex: function() {\r\n            var zIndex = 101; //mUtil.css(the.layout.wrapper, 'z-index');\r\n            var newZindex = mUtil.getHighestZindex(element);\r\n            if (newZindex >= zIndex) {\r\n                zIndex = newZindex + 1;\r\n            }\r\n            \r\n            mUtil.css(the.layout.wrapper, 'z-index', zIndex);\r\n        },\r\n\r\n        /**\r\n         * Check persistent\r\n         */\r\n        isPersistent: function() {\r\n            return the.options.persistent;\r\n        },\r\n\r\n        /**\r\n         * Check persistent\r\n         */\r\n        isShown: function() {\r\n            return the.open;\r\n        },\r\n\r\n        /**\r\n         * Trigger events\r\n         */\r\n        eventTrigger: function(name, args) {\r\n            for (var i = 0; i < the.events.length; i++) {\r\n                var event = the.events[i];\r\n                if (event.name == name) {\r\n                    if (event.one == true) {\r\n                        if (event.fired == false) {\r\n                            the.events[i].fired = true;\r\n                            event.handler.call(this, the, args);\r\n                        }\r\n                    } else {\r\n                        event.handler.call(this, the, args);\r\n                    }\r\n                }\r\n            }\r\n        },\r\n\r\n        addEvent: function(name, handler, one) {\r\n            the.events.push({\r\n                name: name,\r\n                handler: handler,\r\n                one: one,\r\n                fired: false\r\n            });\r\n        }\r\n    };\r\n\r\n    //////////////////////////\r\n    // ** Public Methods ** //\r\n    //////////////////////////\r\n\r\n    /**\r\n     * Set default options \r\n     */\r\n\r\n    the.setDefaults = function(options) {\r\n        defaultOptions = options;\r\n    };\r\n\r\n    /**\r\n     * Show dropdown\r\n     * @returns {mDropdown}\r\n     */\r\n    the.show = function() {\r\n        return Plugin.show();\r\n    };\r\n\r\n    /**\r\n     * Hide dropdown\r\n     * @returns {mDropdown}\r\n     */\r\n    the.hide = function() {\r\n        return Plugin.hide();\r\n    };\r\n\r\n    /**\r\n     * Toggle dropdown\r\n     * @returns {mDropdown}\r\n     */\r\n    the.toggle = function() {\r\n        return Plugin.toggle();\r\n    };\r\n\r\n    /**\r\n     * Toggle dropdown\r\n     * @returns {mDropdown}\r\n     */\r\n    the.isPersistent = function() {\r\n        return Plugin.isPersistent();\r\n    };\r\n\r\n    /**\r\n     * Check shown state\r\n     * @returns {mDropdown}\r\n     */\r\n    the.isShown = function() {\r\n        return Plugin.isShown();\r\n    };\r\n\r\n    /**\r\n     * Set dropdown content\r\n     * @returns {mDropdown}\r\n     */\r\n    the.setContent = function(content) {\r\n        return Plugin.setContent(content);\r\n    };\r\n\r\n    /**\r\n     * Register event\r\n     */\r\n    the.on = function(name, handler) {\r\n        return Plugin.addEvent(name, handler);\r\n    };\r\n\r\n    /**\r\n     * Register event\r\n     */\r\n    the.one = function(name, handler) {\r\n        return Plugin.addEvent(name, handler, true);\r\n    };\r\n\r\n    ///////////////////////////////\r\n    // ** Plugin Construction ** //\r\n    ///////////////////////////////\r\n\r\n    //== Run plugin\r\n    Plugin.construct.apply(the, [options]);\r\n\r\n    //== Init done\r\n    init = true;\r\n\r\n    // Return plugin instance\r\n    return the;\r\n};\r\n\r\n//== Plugin global lazy initialization\r\nmUtil.on(document, '[m-dropdown-toggle=\"click\"] .m-dropdown__toggle', 'click', function(e) {\r\n    var element = this.closest('.m-dropdown');  \r\n    var dropdown;\r\n\r\n    if (element) {\r\n        if (mUtil.data(element).has('dropdown')) {\r\n            dropdown = mUtil.data(element).get('dropdown');\r\n        } else {                 \r\n            dropdown = new mDropdown(element);\r\n        }             \r\n\r\n        dropdown.toggle();\r\n\r\n        e.preventDefault();\r\n    } \r\n});\r\n\r\nmUtil.on(document, '[m-dropdown-toggle=\"hover\"] .m-dropdown__toggle', 'click', function(e) {\r\n    if (mUtil.isDesktopDevice()) {\r\n        if (mUtil.attr(this, 'href') == '#') {\r\n            e.preventDefault();\r\n        }\r\n    } else if (mUtil.isMobileDevice()) {\r\n        var element = this.closest('.m-dropdown');\r\n        var dropdown;\r\n\r\n        if (element) {\r\n            if (mUtil.data(element).has('dropdown')) {\r\n                dropdown = mUtil.data(element).get('dropdown');\r\n            } else {                        \r\n                dropdown = new mDropdown(element);\r\n            }  \r\n\r\n            dropdown.toggle();\r\n\r\n            e.preventDefault();\r\n        }\r\n    }\r\n});\r\n\r\nmUtil.on(document, '[m-dropdown-toggle=\"hover\"]', 'mouseover', function(e) {\r\n    if (mUtil.isDesktopDevice()) {\r\n        var element = this;\r\n        var dropdown;\r\n\r\n        if (element) {\r\n            if (mUtil.data(element).has('dropdown')) {\r\n                dropdown = mUtil.data(element).get('dropdown');\r\n            } else {                        \r\n                dropdown = new mDropdown(element);\r\n            }              \r\n\r\n            dropdown.show();\r\n\r\n            e.preventDefault();\r\n        }\r\n    }\r\n});\r\n\r\ndocument.addEventListener(\"click\", function(e) {\r\n    var query;\r\n    var body = mUtil.get('body');\r\n    var target = e.target;\r\n\r\n    //== Handle dropdown close\r\n    if (query = body.querySelectorAll('.m-dropdown.m-dropdown--open')) {\r\n        for (var i = 0, len = query.length; i < len; i++) {\r\n            var element = query[i];\r\n            if (mUtil.data(element).has('dropdown') === false) {\r\n                return;\r\n            }\r\n\r\n            var the = mUtil.data(element).get('dropdown');\r\n            var toggle = mUtil.find(element, '.m-dropdown__toggle');\r\n\r\n            if (mUtil.hasClass(element, 'm-dropdown--disable-close')) {\r\n                e.preventDefault();\r\n                e.stopPropagation();\r\n                //return;\r\n            }\r\n\r\n            if (toggle && target !== toggle && toggle.contains(target) === false && target.contains(toggle) === false) {\r\n                if (the.isPersistent() === true) {\r\n                    if (element.contains(target) === false) {\r\n                        the.hide();\r\n                    }    \r\n                } else {\r\n                    the.hide();\r\n                }\r\n            } else if (element.contains(target) === false) {\r\n                the.hide();\r\n            } \r\n        }\r\n    }\r\n});\nvar mHeader = function(elementId, options) {\r\n    //== Main object\r\n    var the = this;\r\n    var init = false;\r\n\r\n    //== Get element object\r\n    var element = mUtil.get(elementId);\r\n    var body = mUtil.get('body');\r\n\r\n    if (element === undefined) {\r\n        return;\r\n    }\r\n\r\n    //== Default options\r\n    var defaultOptions = {\r\n        classic: false,\r\n        offset: {\r\n            mobile: 150,\r\n            desktop: 200\r\n        },\r\n        minimize: {\r\n            mobile: false,\r\n            desktop: false\r\n        }\r\n    };\r\n\r\n    ////////////////////////////\r\n    // ** Private Methods  ** //\r\n    ////////////////////////////\r\n\r\n    var Plugin = {\r\n        /**\r\n         * Run plugin\r\n         * @returns {mHeader}\r\n         */\r\n        construct: function(options) {\r\n            if (mUtil.data(element).has('header')) {\r\n                the = mUtil.data(element).get('header');\r\n            } else {\r\n                // reset header\r\n                Plugin.init(options);\r\n\r\n                // build header\r\n                Plugin.build();\r\n\r\n                mUtil.data(element).set('header', the);\r\n            }\r\n\r\n            return the;\r\n        },\r\n\r\n        /**\r\n         * Handles subheader click toggle\r\n         * @returns {mHeader}\r\n         */\r\n        init: function(options) {\r\n            the.events = [];\r\n\r\n            // merge default and user defined options\r\n            the.options = mUtil.deepExtend({}, defaultOptions, options);\r\n        },\r\n\r\n        /**\r\n         * Reset header\r\n         * @returns {mHeader}\r\n         */\r\n        build: function() {\r\n            var lastScrollTop = 0;\r\n\r\n            if (the.options.minimize.mobile === false && the.options.minimize.desktop === false) {\r\n                return;\r\n            }\r\n\r\n            window.addEventListener('scroll', function() {\r\n                var offset = 0, on, off, st;\r\n\r\n                if (mUtil.isInResponsiveRange('desktop')) {\r\n                    offset = the.options.offset.desktop;\r\n                    on = the.options.minimize.desktop.on;\r\n                    off = the.options.minimize.desktop.off;\r\n                } else if (mUtil.isInResponsiveRange('tablet-and-mobile')) {\r\n                    offset = the.options.offset.mobile;\r\n                    on = the.options.minimize.mobile.on;\r\n                    off = the.options.minimize.mobile.off;\r\n                }\r\n\r\n                st = window.pageYOffset;\r\n\r\n                if (\r\n                    (mUtil.isInResponsiveRange('tablet-and-mobile') && the.options.classic && the.options.classic.mobile) ||\r\n                    (mUtil.isInResponsiveRange('desktop') && the.options.classic && the.options.classic.desktop)\r\n\r\n                ) {\r\n                    if (st > offset) { // down scroll mode\r\n                        mUtil.addClass(body, on);\r\n                        mUtil.removeClass(body, off);\r\n                    } else { // back scroll mode\r\n                        mUtil.addClass(body, off);\r\n                        mUtil.removeClass(body, on);\r\n                    }\r\n                } else {\r\n                    if (st > offset && lastScrollTop < st) { // down scroll mode\r\n                        mUtil.addClass(body, on);\r\n                        mUtil.removeClass(body, off);\r\n                    } else { // back scroll mode\r\n                        mUtil.addClass(body, off);\r\n                        mUtil.removeClass(body, on);\r\n                    }\r\n\r\n                    lastScrollTop = st;\r\n                }\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Trigger events\r\n         */\r\n        eventTrigger: function(name, args) {\r\n            for (var i = 0; i < the.events.length; i++) {\r\n                var event = the.events[i];\r\n                if (event.name == name) {\r\n                    if (event.one == true) {\r\n                        if (event.fired == false) {\r\n                            the.events[i].fired = true;\r\n                            event.handler.call(this, the, args);\r\n                        }\r\n                    } else {\r\n                        event.handler.call(this, the, args);\r\n                    }\r\n                }\r\n            }\r\n        },\r\n\r\n        addEvent: function(name, handler, one) {\r\n            the.events.push({\r\n                name: name,\r\n                handler: handler,\r\n                one: one,\r\n                fired: false\r\n            });\r\n        }\r\n    };\r\n\r\n    //////////////////////////\r\n    // ** Public Methods ** //\r\n    //////////////////////////\r\n\r\n    /**\r\n     * Set default options \r\n     */\r\n\r\n    the.setDefaults = function(options) {\r\n        defaultOptions = options;\r\n    };\r\n\r\n    /**\r\n     * Register event\r\n     */\r\n    the.on = function(name, handler) {\r\n        return Plugin.addEvent(name, handler);\r\n    };\r\n\r\n    ///////////////////////////////\r\n    // ** Plugin Construction ** //\r\n    ///////////////////////////////\r\n\r\n    //== Run plugin\r\n    Plugin.construct.apply(the, [options]);\r\n\r\n    //== Init done\r\n    init = true;\r\n\r\n    // Return plugin instance\r\n    return the;\r\n};\nvar mMenu = function(elementId, options) {\r\n    //== Main object\r\n    var the = this;\r\n    var init = false;\r\n\r\n    //== Get element object\r\n    var element = mUtil.get(elementId);\r\n    var body = mUtil.get('body');  \r\n\r\n    if (!element) {\r\n        return;\r\n    }\r\n\r\n    //== Default options\r\n    var defaultOptions = {       \r\n        // accordion submenu mode\r\n        accordion: {\r\n            slideSpeed: 200, // accordion toggle slide speed in milliseconds\r\n            autoScroll: false, // enable auto scrolling(focus) to the clicked menu item\r\n            autoScrollSpeed: 1200,\r\n            expandAll: true // allow having multiple expanded accordions in the menu\r\n        },\r\n\r\n        // dropdown submenu mode\r\n        dropdown: {\r\n            timeout: 500 // timeout in milliseconds to show and hide the hoverable submenu dropdown\r\n        }\r\n    };\r\n\r\n    ////////////////////////////\r\n    // ** Private Methods  ** //\r\n    ////////////////////////////\r\n\r\n    var Plugin = {\r\n        /**\r\n         * Run plugin\r\n         * @returns {mMenu}\r\n         */\r\n        construct: function(options) {\r\n            if (mUtil.data(element).has('menu')) {\r\n                the = mUtil.data(element).get('menu');\r\n            } else {\r\n                // reset menu\r\n                Plugin.init(options);\r\n\r\n                // reset menu\r\n                Plugin.reset();\r\n\r\n                // build menu\r\n                Plugin.build();\r\n\r\n                mUtil.data(element).set('menu', the);\r\n            }\r\n\r\n            return the;\r\n        },\r\n\r\n        /**\r\n         * Handles submenu click toggle\r\n         * @returns {mMenu}\r\n         */\r\n        init: function(options) {\r\n            the.events = [];\r\n\r\n            the.eventHandlers = {};\r\n\r\n            // merge default and user defined options\r\n            the.options = mUtil.deepExtend({}, defaultOptions, options);\r\n\r\n            // pause menu\r\n            the.pauseDropdownHoverTime = 0;\r\n\r\n            the.uid = mUtil.getUniqueID();\r\n        },\r\n\r\n        reload: function() {\r\n             // reset menu\r\n            Plugin.reset();\r\n\r\n            // build menu\r\n            Plugin.build();\r\n        },\r\n\r\n        /**\r\n         * Reset menu\r\n         * @returns {mMenu}\r\n         */\r\n        build: function() {\r\n            //== General accordion submenu toggle\r\n            the.eventHandlers['event_1'] = mUtil.on( element, '.m-menu__toggle', 'click', Plugin.handleSubmenuAccordion);\r\n\r\n            //== Dropdown mode(hoverable)\r\n            if (Plugin.getSubmenuMode() === 'dropdown' || Plugin.isConditionalSubmenuDropdown()) {\r\n                // dropdown submenu - hover toggle\r\n                the.eventHandlers['event_2'] = mUtil.on( element, '[m-menu-submenu-toggle=\"hover\"]', 'mouseover', Plugin.handleSubmenuDrodownHoverEnter);\r\n                the.eventHandlers['event_3'] = mUtil.on( element, '[m-menu-submenu-toggle=\"hover\"]', 'mouseout', Plugin.handleSubmenuDrodownHoverExit);\r\n\r\n                // dropdown submenu - click toggle\r\n                the.eventHandlers['event_4'] = mUtil.on( element, '[m-menu-submenu-toggle=\"click\"] > .m-menu__toggle, [m-menu-submenu-toggle=\"click\"] > .m-menu__link .m-menu__toggle', 'click', Plugin.handleSubmenuDropdownClick);\r\n                the.eventHandlers['event_5'] = mUtil.on( element, '[m-menu-submenu-toggle=\"tab\"] > .m-menu__toggle, [m-menu-submenu-toggle=\"tab\"] > .m-menu__link .m-menu__toggle', 'click', Plugin.handleSubmenuDropdownTabClick);\r\n            }\r\n\r\n            //== General link click\r\n            the.eventHandlers['event_6'] = mUtil.on(element, '.m-menu__item:not(.m-menu__item--submenu) > .m-menu__link:not(.m-menu__toggle):not(.m-menu__link--toggle-skip)', 'click', Plugin.handleLinkClick);\r\n\r\n            //== Init scrollable menu\r\n            if (the.options.scroll && the.options.scroll.height) {\r\n                Plugin.scrollerInit();\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Reset menu\r\n         * @returns {mMenu}\r\n         */\r\n        reset: function() { \r\n            mUtil.off( element, 'click', the.eventHandlers['event_1']);\r\n\r\n            // dropdown submenu - hover toggle\r\n            mUtil.off( element, 'mouseover', the.eventHandlers['event_2']);\r\n            mUtil.off( element, 'mouseout', the.eventHandlers['event_3']);\r\n\r\n            // dropdown submenu - click toggle\r\n            mUtil.off( element, 'click', the.eventHandlers['event_4']);\r\n            mUtil.off( element, 'click', the.eventHandlers['event_5']);\r\n            \r\n            mUtil.off(element, 'click', the.eventHandlers['event_6']);\r\n        },\r\n\r\n        /**\r\n         * Init scroll menu\r\n         *\r\n        */\r\n        scrollerInit: function() {\r\n            if ( the.options.scroll && the.options.scroll.height ) {\r\n                mUtil.scrollerInit(element, {disableForMobile: true, resetHeightOnDestroy: true, handleWindowResize: true, height: the.options.scroll.height});\r\n            }            \r\n        },\r\n\r\n        /**\r\n         * Update scroll menu\r\n        */\r\n        scrollerUpdate: function() {\r\n            if ( the.options.scroll && the.options.scroll.height ) {\r\n                mUtil.scrollerUpdate(element);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Scroll top\r\n        */\r\n        scrollerTop: function() {\r\n            if ( the.options.scroll && the.options.scroll.height ) {\r\n                mUtil.scrollerTop(element);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Get submenu mode for current breakpoint and menu state\r\n         * @returns {mMenu}\r\n         */\r\n        getSubmenuMode: function(el) {\r\n            if ( mUtil.isInResponsiveRange('desktop') ) {\r\n                if (el && mUtil.hasAttr(el, 'm-menu-submenu-toggle')) {\r\n                    return mUtil.attr(el, 'm-menu-submenu-toggle');\r\n                }\r\n\r\n                if ( mUtil.isset(the.options.submenu, 'desktop.state.body') ) {\r\n                    if ( mUtil.hasClass(body, the.options.submenu.desktop.state.body) ) {\r\n                        return the.options.submenu.desktop.state.mode;\r\n                    } else {\r\n                        return the.options.submenu.desktop.default;\r\n                    }\r\n                } else if ( mUtil.isset(the.options.submenu, 'desktop') ) {\r\n                    return the.options.submenu.desktop;\r\n                }\r\n            } else if ( mUtil.isInResponsiveRange('tablet') && mUtil.isset(the.options.submenu, 'tablet') ) {\r\n                return the.options.submenu.tablet;\r\n            } else if ( mUtil.isInResponsiveRange('mobile') && mUtil.isset(the.options.submenu, 'mobile') ) {\r\n                return the.options.submenu.mobile;\r\n            } else {\r\n                return false;\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Get submenu mode for current breakpoint and menu state\r\n         * @returns {mMenu}\r\n         */\r\n        isConditionalSubmenuDropdown: function() {\r\n            if ( mUtil.isInResponsiveRange('desktop') && mUtil.isset(the.options.submenu, 'desktop.state.body') ) {\r\n                return true;\r\n            } else {\r\n                return false;\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Handles menu link click\r\n         * @returns {mMenu}\r\n         */\r\n        handleLinkClick: function(e) {\r\n            if ( Plugin.eventTrigger('linkClick', this) === false ) {\r\n                e.preventDefault();\r\n            };\r\n\r\n            if ( Plugin.getSubmenuMode(this) === 'dropdown' || Plugin.isConditionalSubmenuDropdown() ) {\r\n                Plugin.handleSubmenuDropdownClose(e, this);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Handles submenu hover toggle\r\n         * @returns {mMenu}\r\n         */\r\n        handleSubmenuDrodownHoverEnter: function(e) {\r\n            if ( Plugin.getSubmenuMode(this) === 'accordion' ) {\r\n                return;\r\n            }\r\n\r\n            if ( the.resumeDropdownHover() === false ) {\r\n                return;\r\n            }\r\n\r\n            var item = this;\r\n\r\n            if ( item.getAttribute('data-hover') == '1' ) {\r\n                item.removeAttribute('data-hover');\r\n                clearTimeout( item.getAttribute('data-timeout') );\r\n                item.removeAttribute('data-timeout');\r\n                //Plugin.hideSubmenuDropdown(item, false);\r\n            }\r\n\r\n            Plugin.showSubmenuDropdown(item);\r\n        },\r\n\r\n        /**\r\n         * Handles submenu hover toggle\r\n         * @returns {mMenu}\r\n         */\r\n        handleSubmenuDrodownHoverExit: function(e) {\r\n            if ( the.resumeDropdownHover() === false ) {\r\n                return;\r\n            }\r\n\r\n            if ( Plugin.getSubmenuMode(this) === 'accordion' ) {\r\n                return;\r\n            }\r\n\r\n            var item = this;\r\n            var time = the.options.dropdown.timeout;\r\n\r\n            var timeout = setTimeout(function() {\r\n                if ( item.getAttribute('data-hover') == '1' ) {\r\n                    Plugin.hideSubmenuDropdown(item, true);\r\n                } \r\n            }, time);\r\n\r\n            item.setAttribute('data-hover', '1');\r\n            item.setAttribute('data-timeout', timeout);  \r\n        },\r\n\r\n        /**\r\n         * Handles submenu click toggle\r\n         * @returns {mMenu}\r\n         */\r\n        handleSubmenuDropdownClick: function(e) {\r\n            if ( Plugin.getSubmenuMode(this) === 'accordion' ) {\r\n                return;\r\n            }\r\n \r\n            var item = this.closest('.m-menu__item'); \r\n\r\n            if ( item.getAttribute('m-menu-submenu-mode') == 'accordion' ) {\r\n                return;\r\n            }\r\n\r\n            if ( mUtil.hasClass(item, 'm-menu__item--hover') === false ) {\r\n                mUtil.addClass(item, 'm-menu__item--open-dropdown');\r\n                Plugin.showSubmenuDropdown(item);\r\n            } else {\r\n                mUtil.removeClass(item, 'm-menu__item--open-dropdown' );\r\n                Plugin.hideSubmenuDropdown(item, true);\r\n            }\r\n\r\n            e.preventDefault();\r\n        },\r\n\r\n        /**\r\n         * Handles tab click toggle\r\n         * @returns {mMenu}\r\n         */\r\n        handleSubmenuDropdownTabClick: function(e) {\r\n            if (Plugin.getSubmenuMode(this) === 'accordion') {\r\n                return;\r\n            }\r\n\r\n            var item = this.closest('.m-menu__item');\r\n\r\n            if (item.getAttribute('m-menu-submenu-mode') == 'accordion') {\r\n                return;\r\n            }\r\n\r\n            if (mUtil.hasClass(item, 'm-menu__item--hover') == false) {\r\n                mUtil.addClass(item, 'm-menu__item--open-dropdown');\r\n                Plugin.showSubmenuDropdown(item);\r\n            }\r\n\r\n            e.preventDefault();\r\n        },\r\n\r\n        /**\r\n         * Handles submenu dropdown close on link click\r\n         * @returns {mMenu}\r\n         */\r\n        handleSubmenuDropdownClose: function(e, el) {\r\n            // exit if its not submenu dropdown mode\r\n            if (Plugin.getSubmenuMode(el) === 'accordion') {\r\n                return;\r\n            }\r\n\r\n            var shown = element.querySelectorAll('.m-menu__item.m-menu__item--submenu.m-menu__item--hover:not(.m-menu__item--tabs)');\r\n\r\n            // check if currently clicked link's parent item ha\r\n            if (shown.length > 0 && mUtil.hasClass(el, 'm-menu__toggle') === false && el.querySelectorAll('.m-menu__toggle').length === 0) {\r\n                // close opened dropdown menus\r\n                for (var i = 0, len = shown.length; i < len; i++) {\r\n                    Plugin.hideSubmenuDropdown(shown[0], true);\r\n                }\r\n            }\r\n        },\r\n\r\n        /**\r\n         * helper functions\r\n         * @returns {mMenu}\r\n         */\r\n        handleSubmenuAccordion: function(e, el) {\r\n            var query;\r\n            var item = el ? el : this;\r\n\r\n            if ( Plugin.getSubmenuMode(el) === 'dropdown' && (query = item.closest('.m-menu__item') ) ) {\r\n                if (query.getAttribute('m-menu-submenu-mode') != 'accordion' ) {\r\n                    e.preventDefault();\r\n                    return;\r\n                }\r\n            }\r\n\r\n            var li = item.closest('.m-menu__item');\r\n            var submenu = mUtil.child(li, '.m-menu__submenu, .m-menu__inner');\r\n\r\n            if (mUtil.hasClass(item.closest('.m-menu__item'), 'm-menu__item--open-always')) {\r\n                return;\r\n            }\r\n\r\n            if ( li && submenu ) {\r\n                e.preventDefault();\r\n                var speed = the.options.accordion.slideSpeed;\r\n                var hasClosables = false;\r\n\r\n                if ( mUtil.hasClass(li, 'm-menu__item--open') === false ) {\r\n                    // hide other accordions                    \r\n                    if ( the.options.accordion.expandAll === false ) {\r\n                        var subnav = item.closest('.m-menu__nav, .m-menu__subnav');\r\n                        var closables = mUtil.children(subnav, '.m-menu__item.m-menu__item--open.m-menu__item--submenu:not(.m-menu__item--expanded):not(.m-menu__item--open-always)');\r\n\r\n                        if ( subnav && closables ) {\r\n                            for (var i = 0, len = closables.length; i < len; i++) {\r\n                                var el_ = closables[0];\r\n                                var submenu_ = mUtil.child(el_, '.m-menu__submenu');\r\n                                if ( submenu_ ) {\r\n                                    mUtil.slideUp(submenu_, speed, function() {\r\n                                        Plugin.scrollerUpdate();\r\n                                        mUtil.removeClass(el_, 'm-menu__item--open');\r\n                                    });                    \r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n\r\n                    mUtil.slideDown(submenu, speed, function() {\r\n                        Plugin.scrollToItem(item);\r\n                        Plugin.scrollerUpdate();\r\n                        \r\n                        Plugin.eventTrigger('submenuToggle', submenu);\r\n                    });\r\n                \r\n                    mUtil.addClass(li, 'm-menu__item--open');\r\n\r\n                } else {\r\n                    mUtil.slideUp(submenu, speed, function() {\r\n                        Plugin.scrollToItem(item);\r\n                        Plugin.eventTrigger('submenuToggle', submenu);\r\n                    });\r\n\r\n                    mUtil.removeClass(li, 'm-menu__item--open');       \r\n                }\r\n            }\r\n        },\r\n\r\n        /**\r\n         * scroll to item function\r\n         * @returns {mMenu}\r\n         */\r\n        scrollToItem: function(item) {\r\n            // handle auto scroll for accordion submenus\r\n            if ( mUtil.isInResponsiveRange('desktop') && the.options.accordion.autoScroll && element.getAttribute('m-menu-scrollable') !== '1' ) {\r\n                mUtil.scrollTo(item, the.options.accordion.autoScrollSpeed);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * helper functions\r\n         * @returns {mMenu}\r\n         */\r\n        hideSubmenuDropdown: function(item, classAlso) {\r\n            // remove submenu activation class\r\n            if ( classAlso ) {\r\n                mUtil.removeClass(item, 'm-menu__item--hover');\r\n                mUtil.removeClass(item, 'm-menu__item--active-tab');\r\n            }\r\n\r\n            // clear timeout\r\n            item.removeAttribute('data-hover');\r\n\r\n            if ( item.getAttribute('m-menu-dropdown-toggle-class') ) {\r\n                mUtil.removeClass(body, item.getAttribute('m-menu-dropdown-toggle-class'));\r\n            }\r\n\r\n            var timeout = item.getAttribute('data-timeout');\r\n            item.removeAttribute('data-timeout');\r\n            clearTimeout(timeout);\r\n        },\r\n\r\n        /**\r\n         * helper functions\r\n         * @returns {mMenu}\r\n         */\r\n        showSubmenuDropdown: function(item) {\r\n            // close active submenus\r\n            var list = element.querySelectorAll('.m-menu__item--submenu.m-menu__item--hover, .m-menu__item--submenu.m-menu__item--active-tab');\r\n\r\n            if ( list ) {\r\n                for (var i = 0, len = list.length; i < len; i++) {\r\n                    var el = list[i];\r\n                    if ( item !== el && el.contains(item) === false && item.contains(el) === false ) {\r\n                        Plugin.hideSubmenuDropdown(el, true);\r\n                    }\r\n                }\r\n            } \r\n\r\n            // adjust submenu position\r\n            Plugin.adjustSubmenuDropdownArrowPos(item);\r\n\r\n            // add submenu activation class\r\n            mUtil.addClass(item, 'm-menu__item--hover');\r\n            \r\n            if ( item.getAttribute('m-menu-dropdown-toggle-class') ) {\r\n                mUtil.addClass(body, item.getAttribute('m-menu-dropdown-toggle-class'));\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Handles submenu slide toggle\r\n         * @returns {mMenu}\r\n         */\r\n        createSubmenuDropdownClickDropoff: function(el) {\r\n            var query;\r\n            var zIndex = (query = mUtil.child(el, '.m-menu__submenu') ? mUtil.css(query, 'z-index') : 0) - 1;\r\n\r\n            var dropoff = document.createElement('<div class=\"m-menu__dropoff\" style=\"background: transparent; position: fixed; top: 0; bottom: 0; left: 0; right: 0; z-index: ' + zIndex + '\"></div>');\r\n\r\n            body.appendChild(dropoff);\r\n\r\n            mUtil.addEvent(dropoff, 'click', function(e) {\r\n                e.stopPropagation();\r\n                e.preventDefault();\r\n                mUtil.remove(this);\r\n                Plugin.hideSubmenuDropdown(el, true);\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Handles submenu click toggle\r\n         * @returns {mMenu}\r\n         */\r\n        adjustSubmenuDropdownArrowPos: function(item) {\r\n            var submenu = mUtil.child(item, '.m-menu__submenu');\r\n            var arrow = mUtil.child( submenu, '.m-menu__arrow.m-menu__arrow--adjust');\r\n            var subnav = mUtil.child( submenu, '.m-menu__subnav');\r\n\r\n            if ( arrow ) { \r\n                var pos = 0; \r\n                var link = mUtil.child(item, '.m-menu__link');\r\n\r\n                if ( mUtil.hasClass(submenu, 'm-menu__submenu--classic') || mUtil.hasClass(submenu, 'm-menu__submenu--fixed') ) {\r\n                    if ( mUtil.hasClass(submenu, 'm-menu__submenu--right')) {\r\n                        pos = mUtil.outerWidth(item) / 2;\r\n                        if (mUtil.hasClass(submenu, 'm-menu__submenu--pull')) {\r\n                            if (mUtil.isRTL()) {\r\n                                pos = pos + Math.abs( parseFloat(mUtil.css(submenu, 'margin-left')) );\r\n                            } else {\r\n                                pos = pos + Math.abs( parseFloat(mUtil.css(submenu, 'margin-right')) );\r\n                            }\r\n                        }\r\n                        pos = parseInt(mUtil.css(submenu, 'width')) - pos;\r\n                    } else if ( mUtil.hasClass(submenu, 'm-menu__submenu--left') ) {\r\n                        pos = mUtil.outerWidth(item) / 2;\r\n                        if ( mUtil.hasClass(submenu, 'm-menu__submenu--pull')) {\r\n                            if (mUtil.isRTL()) {\r\n                                pos = pos + Math.abs( parseFloat(mUtil.css(submenu, 'margin-right')) );\r\n                            } else {\r\n                                pos = pos + Math.abs( parseFloat(mUtil.css(submenu, 'margin-left')) );\r\n                            }\r\n                        }\r\n                    }\r\n\r\n                    if (mUtil.isRTL()) {\r\n                        mUtil.css(arrow, 'right', pos + 'px');  \r\n                    } else {\r\n                        mUtil.css(arrow, 'left', pos + 'px');  \r\n                    }\r\n                } else {\r\n                    if ( mUtil.hasClass(submenu, 'm-menu__submenu--center') || mUtil.hasClass(submenu, 'm-menu__submenu--full') ) {\r\n                        pos = mUtil.offset(item).left - ((mUtil.getViewPort().width - parseInt(mUtil.css(submenu, 'width'))) / 2);\r\n                        pos = pos + (mUtil.outerWidth(item) / 2);\r\n\r\n                        mUtil.css(arrow, 'left', pos + 'px');\r\n                        if (mUtil.isRTL()) {\r\n                            mUtil.css(arrow, 'right', 'auto');\r\n                        }                        \r\n                    }\r\n                }\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Handles submenu hover toggle\r\n         * @returns {mMenu}\r\n         */\r\n        pauseDropdownHover: function(time) {\r\n            var date = new Date();\r\n\r\n            the.pauseDropdownHoverTime = date.getTime() + time;\r\n        },\r\n\r\n        /**\r\n         * Handles submenu hover toggle\r\n         * @returns {mMenu}\r\n         */\r\n        resumeDropdownHover: function() {\r\n            var date = new Date();\r\n\r\n            return (date.getTime() > the.pauseDropdownHoverTime ? true : false);\r\n        },\r\n\r\n        /**\r\n         * Reset menu's current active item\r\n         * @returns {mMenu}\r\n         */\r\n        resetActiveItem: function(item) {\r\n            var list;\r\n            var parents;\r\n\r\n            list = element.querySelectorAll('.m-menu__item--active');\r\n            \r\n            for (var i = 0, len = list.length; i < len; i++) {\r\n                var el = list[0];\r\n                mUtil.removeClass(el, 'm-menu__item--active');\r\n                mUtil.hide( mUtil.child(el, '.m-menu__submenu') );\r\n                parents = mUtil.parents(el, '.m-menu__item--submenu');\r\n\r\n                for (var i_ = 0, len_ = parents.length; i_ < len_; i_++) {\r\n                    var el_ = parents[i];\r\n                    mUtil.removeClass(el_, 'm-menu__item--open');\r\n                    mUtil.hide( mUtil.child(el_, '.m-menu__submenu') );\r\n                }\r\n            }\r\n\r\n            // close open submenus\r\n            if ( the.options.accordion.expandAll === false ) {\r\n                if ( list = element.querySelectorAll('.m-menu__item--open') ) {\r\n                    for (var i = 0, len = list.length; i < len; i++) {\r\n                        mUtil.removeClass(parents[0], 'm-menu__item--open');\r\n                    }\r\n                }\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Sets menu's active item\r\n         * @returns {mMenu}\r\n         */\r\n        setActiveItem: function(item) {\r\n            // reset current active item\r\n            Plugin.resetActiveItem();\r\n\r\n            mUtil.addClass(item, 'm-menu__item--active');\r\n            \r\n            var parents = mUtil.parents(item, '.m-menu__item--submenu');\r\n            for (var i = 0, len = parents.length; i < len; i++) {\r\n                mUtil.addClass(parents[i], 'm-menu__item--open');\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Returns page breadcrumbs for the menu's active item\r\n         * @returns {mMenu}\r\n         */\r\n        getBreadcrumbs: function(item) {\r\n            var query;\r\n            var breadcrumbs = [];\r\n            var link = mUtil.child(item, '.m-menu__link');\r\n\r\n            breadcrumbs.push({\r\n                text: (query = mUtil.child(link, '.m-menu__link-text') ? query.innerHTML : ''),\r\n                title: link.getAttribute('title'),\r\n                href: link.getAttribute('href')\r\n            });\r\n\r\n            var parents = mUtil.parents(item, '.m-menu__item--submenu');\r\n            for (var i = 0, len = parents.length; i < len; i++) {\r\n                var submenuLink = mUtil.child(parents[i], '.m-menu__link');\r\n\r\n                breadcrumbs.push({\r\n                    text: (query = mUtil.child(submenuLink, '.m-menu__link-text') ? query.innerHTML : ''),\r\n                    title: submenuLink.getAttribute('title'),\r\n                    href: submenuLink.getAttribute('href')\r\n                });\r\n            }\r\n\r\n            return  breadcrumbs.reverse();\r\n        },\r\n\r\n        /**\r\n         * Returns page title for the menu's active item\r\n         * @returns {mMenu}\r\n         */\r\n        getPageTitle: function(item) {\r\n            var query;\r\n\r\n            return (query = mUtil.child(item, '.m-menu__link-text') ? query.innerHTML : '');\r\n        },\r\n\r\n        /**\r\n         * Trigger events\r\n         */\r\n        eventTrigger: function(name, args) {\r\n            for (var i = 0; i < the.events.length; i++ ) {\r\n                var event = the.events[i];\r\n                if ( event.name == name ) {\r\n                    if ( event.one == true ) {\r\n                        if ( event.fired == false ) {\r\n                            the.events[i].fired = true;\r\n                            event.handler.call(this, the, args);\r\n                        }\r\n                    } else {\r\n                        event.handler.call(this, the, args);\r\n                    }\r\n                }\r\n            }\r\n        },\r\n\r\n        addEvent: function(name, handler, one) {\r\n            the.events.push({\r\n                name: name,\r\n                handler: handler,\r\n                one: one,\r\n                fired: false\r\n            });\r\n        }\r\n    };\r\n\r\n    //////////////////////////\r\n    // ** Public Methods ** //\r\n    //////////////////////////\r\n\r\n    /**\r\n     * Set default options \r\n     */\r\n\r\n    the.setDefaults = function(options) {\r\n        defaultOptions = options;\r\n    };\r\n\r\n    /**\r\n     * Set active menu item\r\n     */\r\n    the.scrollerUpdate = function() {\r\n        return Plugin.scrollerUpdate();\r\n    };\r\n\r\n    /**\r\n     * Set active menu item\r\n     */\r\n    the.scrollerTop = function() {\r\n        return Plugin.scrollerTop();\r\n    };\r\n\r\n    /**\r\n     * Set active menu item\r\n     */\r\n    the.setActiveItem = function(item) {\r\n        return Plugin.setActiveItem(item);\r\n    };\r\n\r\n    the.reload = function() {\r\n        return Plugin.reload();\r\n    };\r\n\r\n    /**\r\n     * Set breadcrumb for menu item\r\n     */\r\n    the.getBreadcrumbs = function(item) {\r\n        return Plugin.getBreadcrumbs(item);\r\n    };\r\n\r\n    /**\r\n     * Set page title for menu item\r\n     */\r\n    the.getPageTitle = function(item) {\r\n        return Plugin.getPageTitle(item);\r\n    };\r\n\r\n    /**\r\n     * Get submenu mode\r\n     */\r\n    the.getSubmenuMode = function(el) {\r\n        return Plugin.getSubmenuMode(el);\r\n    };\r\n\r\n    /**\r\n     * Hide dropdown submenu\r\n     * @returns {jQuery}\r\n     */\r\n    the.hideDropdown = function(item) {\r\n        Plugin.hideSubmenuDropdown(item, true);\r\n    };\r\n\r\n    /**\r\n     * Disable menu for given time\r\n     * @returns {jQuery}\r\n     */\r\n    the.pauseDropdownHover = function(time) {\r\n        Plugin.pauseDropdownHover(time);\r\n    };\r\n\r\n    /**\r\n     * Disable menu for given time\r\n     * @returns {jQuery}\r\n     */\r\n    the.resumeDropdownHover = function() {\r\n        return Plugin.resumeDropdownHover();\r\n    };\r\n\r\n    /**\r\n     * Register event\r\n     */\r\n    the.on = function(name, handler) {\r\n        return Plugin.addEvent(name, handler);\r\n    };\r\n\r\n    the.one = function(name, handler) {\r\n        return Plugin.addEvent(name, handler, true);\r\n    };\r\n\r\n    ///////////////////////////////\r\n    // ** Plugin Construction ** //\r\n    ///////////////////////////////\r\n\r\n    //== Run plugin\r\n    Plugin.construct.apply(the, [options]);\r\n\r\n    //== Handle plugin on window resize\r\n    mUtil.addResizeHandler(function() {\r\n        if (init) {\r\n            the.reload();\r\n        }  \r\n    });\r\n\r\n    //== Init done\r\n    init = true;\r\n\r\n    // Return plugin instance\r\n    return the;\r\n};\r\n\r\n// Plugin global lazy initialization\r\ndocument.addEventListener(\"click\", function (e) {\r\n    var body = mUtil.get('body');\r\n    var query;\r\n    if ( query = body.querySelectorAll('.m-menu__nav .m-menu__item.m-menu__item--submenu.m-menu__item--hover:not(.m-menu__item--tabs)[m-menu-submenu-toggle=\"click\"]') ) {\r\n        for (var i = 0, len = query.length; i < len; i++) {\r\n            var element = query[i].closest('.m-menu__nav').parentNode;\r\n\r\n            if ( element ) {\r\n                var the = mUtil.data(element).get('menu');\r\n\r\n                if ( !the ) {\r\n                    break;\r\n                }\r\n\r\n                if ( !the || the.getSubmenuMode() !== 'dropdown' ) {\r\n                    break;\r\n                }\r\n\r\n                if ( e.target !== element && element.contains(e.target) === false ) {\r\n                    var items;\r\n                    if ( items = element.querySelectorAll('.m-menu__item--submenu.m-menu__item--hover:not(.m-menu__item--tabs)[m-menu-submenu-toggle=\"click\"]') ) {\r\n                        for (var j = 0, cnt = items.length; j < cnt; j++) {\r\n                            the.hideDropdown(items[j]);\r\n                        }\r\n                    }\r\n                }\r\n            }            \r\n        }\r\n    } \r\n});\nvar mOffcanvas = function(elementId, options) {\r\n    //== Main object\r\n    var the = this;\r\n    var init = false;\r\n\r\n    //== Get element object\r\n    var element = mUtil.get(elementId);\r\n    var body = mUtil.get('body');\r\n\r\n    if (!element) {\r\n        return;\r\n    }\r\n\r\n    //== Default options\r\n    var defaultOptions = {};\r\n\r\n    ////////////////////////////\r\n    // ** Private Methods  ** //\r\n    ////////////////////////////\r\n\r\n    var Plugin = {\r\n        /**\r\n         * Run plugin\r\n         * @returns {moffcanvas}\r\n         */\r\n        construct: function(options) {\r\n            if (mUtil.data(element).has('offcanvas')) {\r\n                the = mUtil.data(element).get('offcanvas');\r\n            } else {\r\n                // reset offcanvas\r\n                Plugin.init(options);\r\n                \r\n                // build offcanvas\r\n                Plugin.build();\r\n\r\n                mUtil.data(element).set('offcanvas', the);\r\n            }\r\n\r\n            return the;\r\n        },\r\n\r\n        /**\r\n         * Handles suboffcanvas click toggle\r\n         * @returns {moffcanvas}\r\n         */\r\n        init: function(options) {\r\n            the.events = [];\r\n\r\n            // merge default and user defined options\r\n            the.options = mUtil.deepExtend({}, defaultOptions, options);\r\n            the.overlay;\r\n\r\n            the.classBase = the.options.baseClass;\r\n            the.classShown = the.classBase + '--on';\r\n            the.classOverlay = the.classBase + '-overlay';\r\n\r\n            the.state = mUtil.hasClass(element, the.classShown) ? 'shown' : 'hidden';\r\n        },\r\n\r\n        build: function() {\r\n            //== offcanvas toggle\r\n            if (the.options.toggleBy) {\r\n                if (typeof the.options.toggleBy === 'string') { \r\n                    mUtil.addEvent( the.options.toggleBy, 'click', Plugin.toggle); \r\n                } else if (the.options.toggleBy && the.options.toggleBy[0] && the.options.toggleBy[0].target) {\r\n                    for (var i in the.options.toggleBy) { \r\n                        mUtil.addEvent( the.options.toggleBy[i].target, 'click', Plugin.toggle); \r\n                    }\r\n                } else if (the.options.toggleBy && the.options.toggleBy.target) {\r\n                    mUtil.addEvent( the.options.toggleBy.target, 'click', Plugin.toggle); \r\n                } \r\n            }\r\n\r\n            //== offcanvas close\r\n            var closeBy = mUtil.get(the.options.closeBy);\r\n            if (closeBy) {\r\n                mUtil.addEvent(closeBy, 'click', Plugin.hide);\r\n            }\r\n        },\r\n\r\n\r\n        /**\r\n         * Handles offcanvas toggle\r\n         */\r\n        toggle: function() {;\r\n            Plugin.eventTrigger('toggle'); \r\n\r\n            if (the.state == 'shown') {\r\n                Plugin.hide(this);\r\n            } else {\r\n                Plugin.show(this);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Handles offcanvas show\r\n         */\r\n        show: function(target) {\r\n            if (the.state == 'shown') {\r\n                return;\r\n            }\r\n\r\n            Plugin.eventTrigger('beforeShow');\r\n\r\n            Plugin.togglerClass(target, 'show');\r\n\r\n            //== Offcanvas panel\r\n            mUtil.addClass(body, the.classShown);\r\n            mUtil.addClass(element, the.classShown);\r\n\r\n            the.state = 'shown';\r\n\r\n            if (the.options.overlay) {\r\n                the.overlay = mUtil.insertAfter(document.createElement('DIV') , element );\r\n                mUtil.addClass(the.overlay, the.classOverlay);\r\n                mUtil.addEvent(the.overlay, 'click', function(e) {\r\n                    e.stopPropagation();\r\n                    e.preventDefault();\r\n                    Plugin.hide(target);       \r\n                });\r\n            }\r\n\r\n            Plugin.eventTrigger('afterShow');\r\n        },\r\n\r\n        /**\r\n         * Handles offcanvas hide\r\n         */\r\n        hide: function(target) {\r\n            if (the.state == 'hidden') {\r\n                return;\r\n            }\r\n\r\n            Plugin.eventTrigger('beforeHide');\r\n\r\n            Plugin.togglerClass(target, 'hide');\r\n\r\n            mUtil.removeClass(body, the.classShown);\r\n            mUtil.removeClass(element, the.classShown);\r\n\r\n            the.state = 'hidden';\r\n\r\n            if (the.options.overlay && the.overlay) {\r\n                mUtil.remove(the.overlay);\r\n            }\r\n\r\n            Plugin.eventTrigger('afterHide');\r\n        },\r\n\r\n        /**\r\n         * Handles toggler class\r\n         */\r\n        togglerClass: function(target, mode) {\r\n            //== Toggler\r\n            var id = mUtil.attr(target, 'id');\r\n            var toggleBy;\r\n\r\n            if (the.options.toggleBy && the.options.toggleBy[0] && the.options.toggleBy[0].target) {\r\n                for (var i in the.options.toggleBy) {\r\n                    if (the.options.toggleBy[i].target === id) {\r\n                        toggleBy = the.options.toggleBy[i];\r\n                    }        \r\n                }\r\n            } else if (the.options.toggleBy && the.options.toggleBy.target) {\r\n                toggleBy = the.options.toggleBy;\r\n            }\r\n\r\n            if (toggleBy) {                \r\n                var el = mUtil.get(toggleBy.target);\r\n                \r\n                if (mode === 'show') {\r\n                    mUtil.addClass(el, toggleBy.state);\r\n                }\r\n\r\n                if (mode === 'hide') {\r\n                    mUtil.removeClass(el, toggleBy.state);\r\n                }\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Trigger events\r\n         */\r\n        eventTrigger: function(name, args) {\r\n            for (var i = 0; i < the.events.length; i++) {\r\n                var event = the.events[i];\r\n                if (event.name == name) {\r\n                    if (event.one == true) {\r\n                        if (event.fired == false) {\r\n                            the.events[i].fired = true;\r\n                            event.handler.call(this, the, args);\r\n                        }\r\n                    } else {\r\n                        event.handler.call(this, the, args);\r\n                    }\r\n                }\r\n            }\r\n        },\r\n\r\n        addEvent: function(name, handler, one) {\r\n            the.events.push({\r\n                name: name,\r\n                handler: handler,\r\n                one: one,\r\n                fired: false\r\n            });\r\n        }\r\n    };\r\n\r\n    //////////////////////////\r\n    // ** Public Methods ** //\r\n    //////////////////////////\r\n\r\n    /**\r\n     * Set default options \r\n     */\r\n\r\n    the.setDefaults = function(options) {\r\n        defaultOptions = options;\r\n    };\r\n\r\n    /**\r\n     * Hide \r\n     */\r\n    the.hide = function() {\r\n        return Plugin.hide();\r\n    };\r\n\r\n    /**\r\n     * Show \r\n     */\r\n    the.show = function() {\r\n        return Plugin.show();\r\n    };\r\n\r\n    /**\r\n     * Get suboffcanvas mode\r\n     */\r\n    the.on = function(name, handler) {\r\n        return Plugin.addEvent(name, handler);\r\n    };\r\n\r\n    /**\r\n     * Set offcanvas content\r\n     * @returns {mOffcanvas}\r\n     */\r\n    the.one = function(name, handler) {\r\n        return Plugin.addEvent(name, handler, true);\r\n    };\r\n\r\n    ///////////////////////////////\r\n    // ** Plugin Construction ** //\r\n    ///////////////////////////////\r\n\r\n    //== Run plugin\r\n    Plugin.construct.apply(the, [options]);\r\n\r\n    //== Init done\r\n    init = true;\r\n\r\n    // Return plugin instance\r\n    return the;\r\n};\n// plugin setup\r\nvar mPortlet = function(elementId, options) {\r\n    //== Main object\r\n    var the = this;\r\n    var init = false;\r\n\r\n    //== Get element object\r\n    var element = mUtil.get(elementId);\r\n    var body = mUtil.get('body');\r\n\r\n    if (!element) {\r\n        return;\r\n    }\r\n\r\n    //== Default options\r\n    var defaultOptions = {\r\n        bodyToggleSpeed: 400,\r\n        tooltips: true,\r\n        tools: {\r\n            toggle: {\r\n                collapse: 'Collapse',\r\n                expand: 'Expand'\r\n            },\r\n            reload: 'Reload',\r\n            remove: 'Remove',\r\n            fullscreen: {\r\n                on: 'Fullscreen',\r\n                off: 'Exit Fullscreen'\r\n            }\r\n        },\r\n        sticky: {\r\n            offset: 300,\r\n            zIndex: 101\r\n        }\r\n    };\r\n\r\n    ////////////////////////////\r\n    // ** Private Methods  ** //\r\n    ////////////////////////////\r\n\r\n    var Plugin = {\r\n        /**\r\n         * Construct\r\n         */\r\n\r\n        construct: function(options) {\r\n            if (mUtil.data(element).has('portlet')) {\r\n                the = mUtil.data(element).get('portlet');\r\n            } else {\r\n                // reset menu\r\n                Plugin.init(options);\r\n\r\n                // build menu\r\n                Plugin.build();\r\n\r\n                mUtil.data(element).set('portlet', the);\r\n            }\r\n\r\n            return the;\r\n        },\r\n\r\n        /**\r\n         * Init portlet\r\n         */\r\n        init: function(options) {\r\n            the.element = element;\r\n            the.events = [];\r\n\r\n            // merge default and user defined options\r\n            the.options = mUtil.deepExtend({}, defaultOptions, options);\r\n            the.head = mUtil.child(element, '.m-portlet__head');\r\n            the.foot = mUtil.child(element, '.m-portlet__foot');\r\n\r\n            if (mUtil.child(element, '.m-portlet__body')) {\r\n                the.body = mUtil.child(element, '.m-portlet__body');\r\n            } else if (mUtil.child(element, '.m-form').length !== 0) {\r\n                the.body = mUtil.child(element, '.m-form');\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Build Form Wizard\r\n         */\r\n        build: function() {\r\n            //== Remove\r\n            var remove = mUtil.find(the.head, '[m-portlet-tool=remove]');\r\n            if (remove) {\r\n                mUtil.addEvent(remove, 'click', function(e) {\r\n                    e.preventDefault();\r\n                    Plugin.remove();\r\n                });\r\n            }\r\n\r\n            //== Reload\r\n            var reload = mUtil.find(the.head, '[m-portlet-tool=reload]');\r\n            if (reload) {\r\n                mUtil.addEvent(reload, 'click', function(e) {\r\n                    e.preventDefault();\r\n                    Plugin.reload();\r\n                });\r\n            }\r\n\r\n            //== Toggle\r\n            var toggle = mUtil.find(the.head, '[m-portlet-tool=toggle]');\r\n            if (toggle) {\r\n                mUtil.addEvent(toggle, 'click', function(e) {\r\n                    e.preventDefault();\r\n                    Plugin.toggle();\r\n                });\r\n            }\r\n\r\n            //== Fullscreen\r\n            var fullscreen = mUtil.find(the.head, '[m-portlet-tool=fullscreen]');\r\n            if (fullscreen) {\r\n                mUtil.addEvent(fullscreen, 'click', function(e) {\r\n                    e.preventDefault();\r\n                    Plugin.fullscreen();\r\n                });\r\n            }\r\n\r\n            Plugin.setupTooltips();\r\n        },\r\n\r\n        /**\r\n         * Window scroll handle event for sticky portlet\r\n         */\r\n        onScrollSticky: function() {\r\n            var st = window.pageYOffset;\r\n            var offset = the.options.sticky.offset;\r\n\r\n\r\n            if (st > offset) {\r\n                if (mUtil.hasClass(body, 'm-portlet--sticky') === false) {\r\n                    Plugin.eventTrigger('stickyOn');\r\n\r\n                    mUtil.addClass(body, 'm-portlet--sticky');\r\n                    mUtil.addClass(element, 'm-portlet--sticky');\r\n\r\n                    Plugin.updateSticky();\r\n                }\r\n            } else { // back scroll mode\r\n                if (mUtil.hasClass(body, 'm-portlet--sticky')) {\r\n                    Plugin.eventTrigger('stickyOff');\r\n\r\n                    mUtil.removeClass(body, 'm-portlet--sticky');\r\n                    mUtil.removeClass(element, 'm-portlet--sticky');\r\n\r\n                    Plugin.resetSticky();\r\n                }\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Init sticky portlet\r\n         */\r\n        initSticky: function() {\r\n            if (!the.head) {\r\n                return;\r\n            }\r\n\r\n            window.addEventListener('scroll', Plugin.onScrollSticky);\r\n        },\r\n\r\n        /**\r\n         * Update sticky portlet positions\r\n         */\r\n        updateSticky: function() {\r\n            if (!the.head) {\r\n                return;\r\n            }\r\n\r\n            var top;\r\n\r\n            if (mUtil.hasClass(body, 'm-portlet--sticky')) {\r\n                if (the.options.sticky.position.top instanceof Function) {\r\n                    top = parseInt(the.options.sticky.position.top.call());\r\n                } else {\r\n                    top = parseInt(the.options.sticky.position.top);\r\n                }\r\n\r\n                var left;\r\n                if (the.options.sticky.position.left instanceof Function) {\r\n                    left = parseInt(the.options.sticky.position.left.call());\r\n                } else {\r\n                    left = parseInt(the.options.sticky.position.left);\r\n                }\r\n\r\n                var right;\r\n                if (the.options.sticky.position.right instanceof Function) {\r\n                    right = parseInt(the.options.sticky.position.right.call());\r\n                } else {\r\n                    right = parseInt(the.options.sticky.position.right);\r\n                }\r\n\r\n                mUtil.css(the.head, 'z-index', the.options.sticky.zIndex);\r\n                mUtil.css(the.head, 'top', top + 'px');\r\n\r\n                if (mUtil.isRTL()) {\r\n                    mUtil.css(the.head, 'left', right + 'px');\r\n                    mUtil.css(the.head, 'right',left  + 'px');\r\n                } else {\r\n                    mUtil.css(the.head, 'left', left + 'px');\r\n                    mUtil.css(the.head, 'right', right + 'px');\r\n                }\r\n                \r\n            }\r\n        },\r\n\r\n        /**\r\n         * Reset sticky portlet positions\r\n         */\r\n        resetSticky: function() {\r\n            if (!the.head) {\r\n                return;\r\n            }\r\n\r\n            if (mUtil.hasClass(body, 'm-portlet--sticky') === false) {\r\n                mUtil.css(the.head, 'z-index', '');\r\n                mUtil.css(the.head, 'top', '');\r\n                mUtil.css(the.head, 'left', '');\r\n                mUtil.css(the.head, 'right', '');\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Destroy sticky portlet\r\n         */\r\n        destroySticky: function() {\r\n            if (!the.head) {\r\n                return;\r\n            }\r\n\r\n            Plugin.resetSticky();\r\n\r\n            window.removeEventListener('scroll', Plugin.onScrollSticky);\r\n        },\r\n\r\n        /**\r\n         * Remove portlet\r\n         */\r\n        remove: function() {\r\n            if (Plugin.eventTrigger('beforeRemove') === false) {\r\n                return;\r\n            }\r\n\r\n            if (mUtil.hasClass(body, 'm-portlet--fullscreen') && mUtil.hasClass(element, 'm-portlet--fullscreen')) {\r\n                Plugin.fullscreen('off');\r\n            }\r\n\r\n            Plugin.removeTooltips();\r\n\r\n            mUtil.remove(element);\r\n\r\n            Plugin.eventTrigger('afterRemove');\r\n        },\r\n\r\n        /**\r\n         * Set content\r\n         */\r\n        setContent: function(html) {\r\n            if (html) {\r\n                the.body.innerHTML = html;\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Get body\r\n         */\r\n        getBody: function() {\r\n            return the.body;\r\n        },\r\n\r\n        /**\r\n         * Get self\r\n         */\r\n        getSelf: function() {\r\n            return element;\r\n        },\r\n\r\n        /**\r\n         * Setup tooltips\r\n         */\r\n        setupTooltips: function() {\r\n            if (the.options.tooltips) {\r\n                var collapsed = mUtil.hasClass(element, 'm-portlet--collapse') || mUtil.hasClass(element, 'm-portlet--collapsed');\r\n                var fullscreenOn = mUtil.hasClass(body, 'm-portlet--fullscreen') && mUtil.hasClass(element, 'm-portlet--fullscreen');\r\n\r\n                //== Remove\r\n                var remove = mUtil.find(the.head, '[m-portlet-tool=remove]');\r\n                if (remove) {\r\n                    var placement = (fullscreenOn ? 'bottom' : 'top');\r\n                    var tip = new Tooltip(remove, {\r\n                        title: the.options.tools.remove,\r\n                        placement: placement,\r\n                        offset: (fullscreenOn ? '0,10px,0,0' : '0,5px'),\r\n                        trigger: 'hover',\r\n                        template: '<div class=\"m-tooltip m-tooltip--portlet tooltip bs-tooltip-' + placement + '\" role=\"tooltip\">\\\r\n                            <div class=\"tooltip-arrow arrow\"></div>\\\r\n                            <div class=\"tooltip-inner\"></div>\\\r\n                        </div>'\r\n                    });\r\n\r\n                    mUtil.data(remove).set('tooltip', tip);\r\n                }\r\n\r\n                //== Reload\r\n                var reload = mUtil.find(the.head, '[m-portlet-tool=reload]');\r\n                if (reload) {\r\n                    var placement = (fullscreenOn ? 'bottom' : 'top');\r\n                    var tip = new Tooltip(reload, {\r\n                        title: the.options.tools.reload,\r\n                        placement: placement,\r\n                        offset: (fullscreenOn ? '0,10px,0,0' : '0,5px'),\r\n                        trigger: 'hover',\r\n                        template: '<div class=\"m-tooltip m-tooltip--portlet tooltip bs-tooltip-' + placement + '\" role=\"tooltip\">\\\r\n                            <div class=\"tooltip-arrow arrow\"></div>\\\r\n                            <div class=\"tooltip-inner\"></div>\\\r\n                        </div>'\r\n                    });\r\n\r\n                    mUtil.data(reload).set('tooltip', tip);\r\n                }\r\n\r\n                //== Toggle\r\n                var toggle = mUtil.find(the.head, '[m-portlet-tool=toggle]');\r\n                if (toggle) {\r\n                    var placement = (fullscreenOn ? 'bottom' : 'top');\r\n                    var tip = new Tooltip(toggle, {\r\n                        title: (collapsed ? the.options.tools.toggle.expand : the.options.tools.toggle.collapse),\r\n                        placement: placement,\r\n                        offset: (fullscreenOn ? '0,10px,0,0' : '0,5px'),\r\n                        trigger: 'hover',\r\n                        template: '<div class=\"m-tooltip m-tooltip--portlet tooltip bs-tooltip-' + placement + '\" role=\"tooltip\">\\\r\n                            <div class=\"tooltip-arrow arrow\"></div>\\\r\n                            <div class=\"tooltip-inner\"></div>\\\r\n                        </div>'\r\n                    });\r\n\r\n                    mUtil.data(toggle).set('tooltip', tip);\r\n                }\r\n\r\n                //== Fullscreen\r\n                var fullscreen = mUtil.find(the.head, '[m-portlet-tool=fullscreen]');\r\n                if (fullscreen) {\r\n                    var placement = (fullscreenOn ? 'bottom' : 'top');\r\n                    var tip = new Tooltip(fullscreen, {\r\n                        title: (fullscreenOn ? the.options.tools.fullscreen.off : the.options.tools.fullscreen.on),\r\n                        placement: placement,\r\n                        offset: (fullscreenOn ? '0,10px,0,0' : '0,5px'),\r\n                        trigger: 'hover',\r\n                        template: '<div class=\"m-tooltip m-tooltip--portlet tooltip bs-tooltip-' + placement + '\" role=\"tooltip\">\\\r\n                            <div class=\"tooltip-arrow arrow\"></div>\\\r\n                            <div class=\"tooltip-inner\"></div>\\\r\n                        </div>'\r\n                    });\r\n\r\n                    mUtil.data(fullscreen).set('tooltip', tip);\r\n                }\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Setup tooltips\r\n         */\r\n        removeTooltips: function() {\r\n            if (the.options.tooltips) {\r\n                //== Remove\r\n                var remove = mUtil.find(the.head, '[m-portlet-tool=remove]');\r\n                if (remove && mUtil.data(remove).has('tooltip')) {\r\n                    mUtil.data(remove).get('tooltip').dispose();\r\n                }\r\n\r\n                //== Reload\r\n                var reload = mUtil.find(the.head, '[m-portlet-tool=reload]');\r\n                if (reload && mUtil.data(reload).has('tooltip')) {\r\n                    mUtil.data(reload).get('tooltip').dispose();\r\n                }\r\n\r\n                //== Toggle\r\n                var toggle = mUtil.find(the.head, '[m-portlet-tool=toggle]');\r\n                if (toggle && mUtil.data(toggle).has('tooltip')) {\r\n                    mUtil.data(toggle).get('tooltip').dispose();\r\n                }\r\n\r\n                //== Fullscreen\r\n                var fullscreen = mUtil.find(the.head, '[m-portlet-tool=fullscreen]');\r\n                if (fullscreen && mUtil.data(fullscreen).has('tooltip')) {\r\n                    mUtil.data(fullscreen).get('tooltip').dispose();\r\n                }\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Reload\r\n         */\r\n        reload: function() {\r\n            Plugin.eventTrigger('reload');\r\n        },\r\n\r\n        /**\r\n         * Toggle\r\n         */\r\n        toggle: function() {\r\n            if (mUtil.hasClass(element, 'm-portlet--collapse') || mUtil.hasClass(element, 'm-portlet--collapsed')) {\r\n                Plugin.expand();\r\n            } else {\r\n                Plugin.collapse();\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Collapse\r\n         */\r\n        collapse: function() {\r\n            if (Plugin.eventTrigger('beforeCollapse') === false) {\r\n                return;\r\n            }\r\n\r\n            mUtil.slideUp(the.body, the.options.bodyToggleSpeed, function() {\r\n                Plugin.eventTrigger('afterCollapse');\r\n            });\r\n\r\n            mUtil.addClass(element, 'm-portlet--collapse');\r\n\r\n            var toggle = mUtil.find(the.head, '[m-portlet-tool=toggle]');\r\n            if (toggle && mUtil.data(toggle).has('tooltip')) {\r\n                mUtil.data(toggle).get('tooltip').updateTitleContent(the.options.tools.toggle.expand);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Expand\r\n         */\r\n        expand: function() {\r\n            if (Plugin.eventTrigger('beforeExpand') === false) {\r\n                return;\r\n            }\r\n\r\n            mUtil.slideDown(the.body, the.options.bodyToggleSpeed, function() {\r\n                Plugin.eventTrigger('afterExpand');\r\n            });\r\n\r\n            mUtil.removeClass(element, 'm-portlet--collapse');\r\n            mUtil.removeClass(element, 'm-portlet--collapsed');\r\n\r\n            var toggle = mUtil.find(the.head, '[m-portlet-tool=toggle]');\r\n            if (toggle && mUtil.data(toggle).has('tooltip')) {\r\n                mUtil.data(toggle).get('tooltip').updateTitleContent(the.options.tools.toggle.collapse);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Toggle\r\n         */\r\n        fullscreen: function(mode) {\r\n            var d = {};\r\n            var speed = 300;\r\n\r\n            if (mode === 'off' || (mUtil.hasClass(body, 'm-portlet--fullscreen') && mUtil.hasClass(element, 'm-portlet--fullscreen'))) {\r\n                Plugin.eventTrigger('beforeFullscreenOff');\r\n\r\n                mUtil.removeClass(body, 'm-portlet--fullscreen');\r\n                mUtil.removeClass(element, 'm-portlet--fullscreen');\r\n\r\n                Plugin.removeTooltips();\r\n                Plugin.setupTooltips();\r\n\r\n                if (the.foot) {\r\n                    mUtil.css(the.body, 'margin-bottom', '');\r\n                    mUtil.css(the.foot, 'margin-top', '');\r\n                }\r\n\r\n                Plugin.eventTrigger('afterFullscreenOff');\r\n            } else {\r\n                Plugin.eventTrigger('beforeFullscreenOn');\r\n\r\n                mUtil.addClass(element, 'm-portlet--fullscreen');\r\n                mUtil.addClass(body, 'm-portlet--fullscreen');\r\n\r\n                Plugin.removeTooltips();\r\n                Plugin.setupTooltips();\r\n\r\n\r\n                if (the.foot) {\r\n                    var height1 = parseInt(mUtil.css(the.foot, 'height'));\r\n                    var height2 = parseInt(mUtil.css(the.foot, 'height')) + parseInt(mUtil.css(the.head, 'height'));\r\n                    mUtil.css(the.body, 'margin-bottom', height1 + 'px');\r\n                    mUtil.css(the.foot, 'margin-top', '-' + height2 + 'px');\r\n                }\r\n\r\n                Plugin.eventTrigger('afterFullscreenOn');\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Trigger events\r\n         */\r\n        eventTrigger: function(name) {\r\n            //mUtil.triggerCustomEvent(name);\r\n            for (i = 0; i < the.events.length; i++) {\r\n                var event = the.events[i];\r\n                if (event.name == name) {\r\n                    if (event.one == true) {\r\n                        if (event.fired == false) {\r\n                            the.events[i].fired = true;\r\n                            event.handler.call(this, the);\r\n                        }\r\n                    } else {\r\n                        event.handler.call(this, the);\r\n                    }\r\n                }\r\n            }\r\n        },\r\n\r\n        addEvent: function(name, handler, one) {\r\n            the.events.push({\r\n                name: name,\r\n                handler: handler,\r\n                one: one,\r\n                fired: false\r\n            });\r\n\r\n            return the;\r\n        }\r\n    };\r\n\r\n    //////////////////////////\r\n    // ** Public Methods ** //\r\n    //////////////////////////\r\n\r\n    /**\r\n     * Set default options \r\n     */\r\n\r\n    the.setDefaults = function(options) {\r\n        defaultOptions = options;\r\n    };\r\n\r\n    /**\r\n     * Remove portlet\r\n     * @returns {mPortlet}\r\n     */\r\n    the.remove = function() {\r\n        return Plugin.remove(html);\r\n    };\r\n\r\n    /**\r\n     * Init sticky portlet\r\n     * @returns {mPortlet}\r\n     */\r\n    the.initSticky = function() {\r\n        return Plugin.initSticky();\r\n    };\r\n\r\n    /**\r\n     * Update sticky portlet scroll event\r\n     * @returns {mPortlet}\r\n     */\r\n    the.updateSticky = function() {\r\n        return Plugin.updateSticky();\r\n    };\r\n\r\n    /**\r\n     * Reset sticky portlet positions\r\n     * @returns {mPortlet}\r\n     */\r\n    the.resetSticky = function() {\r\n        return Plugin.resetSticky();\r\n    };\r\n\r\n    /**\r\n     * Destroy sticky portlet scroll event\r\n     * @returns {mPortlet}\r\n     */\r\n    the.destroySticky = function() {\r\n        return Plugin.destroySticky();\r\n    };\r\n\r\n    /**\r\n     * Reload portlet\r\n     * @returns {mPortlet}\r\n     */\r\n    the.reload = function() {\r\n        return Plugin.reload();\r\n    };\r\n\r\n    /**\r\n     * Set portlet content\r\n     * @returns {mPortlet}\r\n     */\r\n    the.setContent = function(html) {\r\n        return Plugin.setContent(html);\r\n    };\r\n\r\n    /**\r\n     * Toggle portlet\r\n     * @returns {mPortlet}\r\n     */\r\n    the.toggle = function() {\r\n        return Plugin.toggle();\r\n    };\r\n\r\n    /**\r\n     * Collapse portlet\r\n     * @returns {mPortlet}\r\n     */\r\n    the.collapse = function() {\r\n        return Plugin.collapse();\r\n    };\r\n\r\n    /**\r\n     * Expand portlet\r\n     * @returns {mPortlet}\r\n     */\r\n    the.expand = function() {\r\n        return Plugin.expand();\r\n    };\r\n\r\n    /**\r\n     * Fullscreen portlet\r\n     * @returns {mPortlet}\r\n     */\r\n    the.fullscreen = function() {\r\n        return Plugin.fullscreen('on');\r\n    };\r\n\r\n    /**\r\n     * Fullscreen portlet\r\n     * @returns {mPortlet}\r\n     */\r\n    the.unFullscreen = function() {\r\n        return Plugin.fullscreen('off');\r\n    };\r\n\r\n    /**\r\n     * Get portletbody \r\n     * @returns {jQuery}\r\n     */\r\n    the.getBody = function() {\r\n        return Plugin.getBody();\r\n    };\r\n\r\n    /**\r\n     * Get portletbody \r\n     * @returns {jQuery}\r\n     */\r\n    the.getSelf = function() {\r\n        return Plugin.getSelf();\r\n    };\r\n\r\n    /**\r\n     * Attach event\r\n     */\r\n    the.on = function(name, handler) {\r\n        return Plugin.addEvent(name, handler);\r\n    };\r\n\r\n    /**\r\n     * Attach event that will be fired once\r\n     */\r\n    the.one = function(name, handler) {\r\n        return Plugin.addEvent(name, handler, true);\r\n    };\r\n\r\n    //== Construct plugin\r\n    Plugin.construct.apply(the, [options]);\r\n\r\n    return the;\r\n};\n// plugin setup\r\nvar mQuicksearch = function(elementId, options) {\r\n    //== Main object\r\n    var the = this;\r\n    var init = false;\r\n\r\n    //== Get element object\r\n    var element = mUtil.get(elementId);\r\n    var body = mUtil.get('body');  \r\n\r\n    if (!element) {\r\n        return;\r\n    }\r\n\r\n    //== Default options\r\n    var defaultOptions = {\r\n        mode: 'default', //'default/dropdown'\r\n        minLength: 1,\r\n        maxHeight: 300,\r\n        requestTimeout: 200, // ajax request fire timeout in milliseconds \r\n        inputTarget: 'm_quicksearch_input',\r\n        iconCloseTarget: 'm_quicksearch_close',\r\n        iconCancelTarget: 'm_quicksearch_cancel',\r\n        iconSearchTarget: 'm_quicksearch_search',\r\n        \r\n        spinnerClass: 'm-loader m-loader--skin-light m-loader--right',\r\n        hasResultClass: 'm-list-search--has-result',\r\n        \r\n        templates: {\r\n            error: '<div class=\"m-search-results m-search-results--skin-light\"><span class=\"m-search-result__message\">{{message}}</div></div>'\r\n        }\r\n    };\r\n\r\n    ////////////////////////////\r\n    // ** Private Methods  ** //\r\n    ////////////////////////////\r\n\r\n    var Plugin = {\r\n        /**\r\n         * Construct\r\n         */\r\n\r\n        construct: function(options) {\r\n            if (mUtil.data(element).has('quicksearch')) {\r\n                the = mUtil.data(element).get('quicksearch');\r\n            } else {\r\n                // reset menu\r\n                Plugin.init(options);\r\n\r\n                // build menu\r\n                Plugin.build();\r\n\r\n                mUtil.data(element).set('quicksearch', the);\r\n            }\r\n\r\n            return the;\r\n        },\r\n\r\n        init: function(options) {\r\n            the.element = element;\r\n            the.events = [];\r\n\r\n            // merge default and user defined options\r\n            the.options = mUtil.deepExtend({}, defaultOptions, options);\r\n\r\n            // search query\r\n            the.query = '';\r\n\r\n            // form\r\n            the.form = mUtil.find(element, 'form');\r\n\r\n            // input element\r\n            the.input = mUtil.get(the.options.inputTarget);\r\n\r\n            // close icon\r\n            the.iconClose = mUtil.get(the.options.iconCloseTarget);\r\n\r\n            if (the.options.mode == 'default') {\r\n                // search icon\r\n                the.iconSearch = mUtil.get(the.options.iconSearchTarget);\r\n\r\n                // cancel icon\r\n                the.iconCancel = mUtil.get(the.options.iconCancelTarget);\r\n            }\r\n\r\n            // dropdown\r\n            the.dropdown = new mDropdown(element, {\r\n                mobileOverlay: false\r\n            });\r\n\r\n            // cancel search timeout\r\n            the.cancelTimeout;\r\n\r\n            // ajax processing state\r\n            the.processing = false;\r\n\r\n            // ajax request fire timeout\r\n            the.requestTimeout = false;\r\n        },\r\n\r\n        /**\r\n         * Build plugin\r\n         */\r\n        build: function() {\r\n            // attach input keyup handler\r\n            mUtil.addEvent(the.input, 'keyup', Plugin.search);\r\n\r\n            if (the.options.mode == 'default') {\r\n                mUtil.addEvent(the.input, 'focus', Plugin.showDropdown);\r\n                mUtil.addEvent(the.iconCancel, 'click', Plugin.handleCancel);\r\n\r\n                mUtil.addEvent(the.iconSearch, 'click', function() {\r\n                    if (mUtil.isInResponsiveRange('tablet-and-mobile')) {\r\n                        mUtil.addClass(body, 'm-header-search--mobile-expanded');\r\n                        the.input.focus();\r\n                    }\r\n                });\r\n\r\n                mUtil.addEvent(the.iconClose, 'click', function() {\r\n                    if (mUtil.isInResponsiveRange('tablet-and-mobile')) {\r\n                        mUtil.removeClass(body, 'm-header-search--mobile-expanded');\r\n                        Plugin.closeDropdown();\r\n                    }\r\n                });\r\n            } else if (the.options.mode == 'dropdown') {\r\n                the.dropdown.on('afterShow', function() {\r\n                    the.input.focus();\r\n                });\r\n\r\n                mUtil.addEvent(the.iconClose, 'click', Plugin.closeDropdown);\r\n            }\r\n        },\r\n\r\n        showProgress: function() {\r\n            the.processing = true;\r\n            mUtil.addClass(the.form, the.options.spinnerClass);\r\n            Plugin.handleCancelIconVisibility('off');\r\n\r\n            return the;\r\n        },\r\n\r\n        hideProgress: function() {\r\n            the.processing = false;\r\n            mUtil.removeClass(the.form, the.options.spinnerClass);\r\n            Plugin.handleCancelIconVisibility('on');\r\n            mUtil.addClass(element, the.options.hasResultClass);\r\n\r\n            return the;\r\n        },\r\n\r\n        /**\r\n         * Search handler\r\n         */\r\n        search: function(e) {\r\n            the.query = the.input.value;\r\n\r\n            if (the.query.length === 0) {\r\n                Plugin.handleCancelIconVisibility('on');\r\n                mUtil.removeClass(element, the.options.hasResultClass);\r\n                mUtil.removeClass(the.form, the.options.spinnerClass);\r\n            }\r\n\r\n            if (the.query.length < the.options.minLength || the.processing == true) {\r\n                return;\r\n            }\r\n\r\n            if (the.requestTimeout) {\r\n                clearTimeout(the.requestTimeout);\r\n            }\r\n\r\n            the.requestTimeout = false;\r\n\r\n            the.requestTimeout = setTimeout(function() {\r\n                Plugin.eventTrigger('search');\r\n            }, the.options.requestTimeout);            \r\n\r\n            return the;\r\n        },\r\n\r\n        /**\r\n         * Handle cancel icon visibility\r\n         */\r\n        handleCancelIconVisibility: function(status) {\r\n            if (status == 'on') {\r\n                if (the.input.value.length === 0) {\r\n                    if (the.iconCancel) mUtil.css(the.iconCancel, 'visibility', 'hidden');\r\n                    if (the.iconClose) mUtil.css(the.iconClose, 'visibility', 'visible');\r\n                } else {\r\n                    clearTimeout(the.cancelTimeout);\r\n                    the.cancelTimeout = setTimeout(function() {\r\n                        if (the.iconCancel) mUtil.css(the.iconCancel, 'visibility', 'visible');\r\n                        if (the.iconClose) mUtil.css(the.iconClose, 'visibility', 'visible');\r\n                    }, 500);\r\n                }\r\n            } else {\r\n                if (the.iconCancel) mUtil.css(the.iconCancel, 'visibility', 'hidden');\r\n                if (the.iconClose) mUtil.css(the.iconClose, 'visibility', 'hidden');\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Cancel handler\r\n         */\r\n        handleCancel: function(e) {\r\n            the.input.value = '';\r\n            mUtil.css(the.iconCancel, 'visibility', 'hidden');\r\n            mUtil.removeClass(element, the.options.hasResultClass);\r\n\r\n            Plugin.closeDropdown();\r\n        },\r\n\r\n        /**\r\n         * Cancel handler\r\n         */\r\n        closeDropdown: function() {\r\n            the.dropdown.hide();\r\n        },\r\n\r\n        /**\r\n         * Show dropdown\r\n         */\r\n        showDropdown: function(e) {\r\n            if (the.dropdown.isShown() == false && the.input.value.length > the.options.minLength && the.processing == false) {\r\n                console.log('show!!!');\r\n                the.dropdown.show();\r\n                if (e) {\r\n                    e.preventDefault();\r\n                    e.stopPropagation();\r\n                }                \r\n            }\r\n        },\r\n\r\n        /**\r\n         * Trigger events\r\n         */\r\n        eventTrigger: function(name) {\r\n            //mUtil.triggerCustomEvent(name);\r\n            for (i = 0; i < the.events.length; i++) {\r\n                var event = the.events[i];\r\n                if (event.name == name) {\r\n                    if (event.one == true) {\r\n                        if (event.fired == false) {\r\n                            the.events[i].fired = true;\r\n                            event.handler.call(this, the);\r\n                        }\r\n                    } else {\r\n                        event.handler.call(this, the);\r\n                    }\r\n                }\r\n            }\r\n        },\r\n\r\n        addEvent: function(name, handler, one) {\r\n            the.events.push({\r\n                name: name,\r\n                handler: handler,\r\n                one: one,\r\n                fired: false\r\n            });\r\n\r\n            return the;\r\n        }\r\n    };\r\n\r\n    //////////////////////////\r\n    // ** Public Methods ** //\r\n    //////////////////////////\r\n\r\n    /**\r\n     * Set default options \r\n     */\r\n\r\n    the.setDefaults = function(options) {\r\n        defaultOptions = options;\r\n    };\r\n\r\n    /**\r\n     * quicksearch off \r\n     */\r\n    the.search = function() {\r\n        return Plugin.handleSearch();\r\n    };\r\n\r\n    the.showResult = function(res) {\r\n        the.dropdown.setContent(res);\r\n        Plugin.showDropdown();\r\n\r\n        return the;\r\n    };\r\n\r\n    the.showError = function(text) {\r\n        var msg = the.options.templates.error.replace('{{message}}', text);\r\n        the.dropdown.setContent(msg);\r\n        Plugin.showDropdown();\r\n\r\n        return the;\r\n    };\r\n\r\n    /**\r\n     *  \r\n     */\r\n    the.showProgress = function() {\r\n        return Plugin.showProgress();\r\n    };\r\n\r\n    the.hideProgress = function() {\r\n        return Plugin.hideProgress();\r\n    };\r\n\r\n    /**\r\n     * quicksearch off \r\n     */\r\n    the.search = function() {\r\n        return Plugin.search();\r\n    };\r\n\r\n    /**\r\n     * Attach event\r\n     * @returns {mQuicksearch}\r\n     */\r\n    the.on = function(name, handler) {\r\n        return Plugin.addEvent(name, handler);\r\n    };\r\n\r\n    /**\r\n     * Attach event that will be fired once\r\n     * @returns {mQuicksearch}\r\n     */\r\n    the.one = function(name, handler) {\r\n        return Plugin.addEvent(name, handler, true);\r\n    };\r\n\r\n    //== Construct plugin\r\n    Plugin.construct.apply(the, [options]);\r\n\r\n    return the;\r\n};\nvar mScrollTop = function(elementId, options) {\r\n    //== Main object\r\n    var the = this;\r\n    var init = false;\r\n\r\n    //== Get element object\r\n    var element = mUtil.get(elementId);\r\n    var body = mUtil.get('body');\r\n\r\n    if (!element) {\r\n        return;\r\n    }\r\n\r\n    //== Default options\r\n    var defaultOptions = {\r\n        offset: 300,\r\n        speed: 600\r\n    };\r\n\r\n    ////////////////////////////\r\n    // ** Private Methods  ** //\r\n    ////////////////////////////\r\n\r\n    var Plugin = {\r\n        /**\r\n         * Run plugin\r\n         * @returns {mscrolltop}\r\n         */\r\n        construct: function(options) {\r\n            if (mUtil.data(element).has('scrolltop')) {\r\n                the = mUtil.data(element).get('scrolltop');\r\n            } else {\r\n                // reset scrolltop\r\n                Plugin.init(options);\r\n\r\n                // build scrolltop\r\n                Plugin.build();\r\n\r\n                mUtil.data(element).set('scrolltop', the);\r\n            }\r\n\r\n            return the;\r\n        },\r\n\r\n        /**\r\n         * Handles subscrolltop click toggle\r\n         * @returns {mscrolltop}\r\n         */\r\n        init: function(options) {\r\n            the.events = [];\r\n\r\n            // merge default and user defined options\r\n            the.options = mUtil.deepExtend({}, defaultOptions, options);\r\n        },\r\n\r\n        build: function() {\r\n            // handle window scroll\r\n            if (navigator.userAgent.match(/iPhone|iPad|iPod/i)) {\r\n                window.addEventListener('touchend', function() {\r\n                    Plugin.handle();\r\n                });\r\n\r\n                window.addEventListener('touchcancel', function() {\r\n                    Plugin.handle();\r\n                });\r\n\r\n                window.addEventListener('touchleave', function() {\r\n                    Plugin.handle();\r\n                });\r\n            } else {\r\n                window.addEventListener('scroll', function() { \r\n                    Plugin.handle();\r\n                });\r\n            }\r\n\r\n            // handle button click \r\n            mUtil.addEvent(element, 'click', Plugin.scroll);\r\n        },\r\n\r\n        /**\r\n         * Handles scrolltop click scrollTop\r\n         */\r\n        handle: function() {\r\n            var pos = window.pageYOffset; // current vertical position\r\n            if (pos > the.options.offset) {\r\n                mUtil.addClass(body, 'm-scroll-top--shown');\r\n            } else {\r\n                mUtil.removeClass(body, 'm-scroll-top--shown');\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Handles scrolltop click scrollTop\r\n         */\r\n        scroll: function(e) {\r\n            e.preventDefault();\r\n\r\n            mUtil.scrollTop(0, the.options.speed);\r\n        },\r\n\r\n\r\n        /**\r\n         * Trigger events\r\n         */\r\n        eventTrigger: function(name, args) {\r\n            for (var i = 0; i < the.events.length; i++) {\r\n                var event = the.events[i];\r\n                if (event.name == name) {\r\n                    if (event.one == true) {\r\n                        if (event.fired == false) {\r\n                            the.events[i].fired = true;\r\n                            event.handler.call(this, the, args);\r\n                        }\r\n                    } else {\r\n                        event.handler.call(this, the, args);\r\n                    }\r\n                }\r\n            }\r\n        },\r\n\r\n        addEvent: function(name, handler, one) {\r\n            the.events.push({\r\n                name: name,\r\n                handler: handler,\r\n                one: one,\r\n                fired: false\r\n            });\r\n        }\r\n    };\r\n\r\n    //////////////////////////\r\n    // ** Public Methods ** //\r\n    //////////////////////////\r\n\r\n    /**\r\n     * Set default options \r\n     */\r\n\r\n    the.setDefaults = function(options) {\r\n        defaultOptions = options;\r\n    };\r\n\r\n    /**\r\n     * Get subscrolltop mode\r\n     */\r\n    the.on = function(name, handler) {\r\n        return Plugin.addEvent(name, handler);\r\n    };\r\n\r\n    /**\r\n     * Set scrolltop content\r\n     * @returns {mscrolltop}\r\n     */\r\n    the.one = function(name, handler) {\r\n        return Plugin.addEvent(name, handler, true);\r\n    };\r\n\r\n    ///////////////////////////////\r\n    // ** Plugin Construction ** //\r\n    ///////////////////////////////\r\n\r\n    //== Run plugin\r\n    Plugin.construct.apply(the, [options]);\r\n\r\n    //== Init done\r\n    init = true;\r\n\r\n    // Return plugin instance\r\n    return the;\r\n};\n// plugin setup\r\nvar mToggle = function(elementId, options) {\r\n    //== Main object\r\n    var the = this;\r\n    var init = false;\r\n\r\n    //== Get element object\r\n    var element = mUtil.get(elementId);\r\n    var body = mUtil.get('body');  \r\n\r\n    if (!element) {\r\n        return;\r\n    }\r\n\r\n    //== Default options\r\n    var defaultOptions = {\r\n        togglerState: '',\r\n        targetState: ''\r\n    };    \r\n\r\n    ////////////////////////////\r\n    // ** Private Methods  ** //\r\n    ////////////////////////////\r\n\r\n    var Plugin = {\r\n        /**\r\n         * Construct\r\n         */\r\n\r\n        construct: function(options) {\r\n            if (mUtil.data(element).has('toggle')) {\r\n                the = mUtil.data(element).get('toggle');\r\n            } else {\r\n                // reset menu\r\n                Plugin.init(options);\r\n\r\n                // build menu\r\n                Plugin.build();\r\n\r\n                mUtil.data(element).set('toggle', the);\r\n            }\r\n\r\n            return the;\r\n        },\r\n\r\n        /**\r\n         * Handles subtoggle click toggle\r\n         */\r\n        init: function(options) {\r\n            the.element = element;\r\n            the.events = [];\r\n\r\n            // merge default and user defined options\r\n            the.options = mUtil.deepExtend({}, defaultOptions, options);\r\n\r\n            the.target = mUtil.get(the.options.target);\r\n            the.targetState = the.options.targetState;\r\n            the.togglerState = the.options.togglerState;\r\n\r\n            the.state = mUtil.hasClasses(the.target, the.targetState) ? 'on' : 'off';\r\n        },\r\n\r\n        /**\r\n         * Setup toggle\r\n         */\r\n        build: function() {\r\n            mUtil.addEvent(element, 'mouseup', Plugin.toggle);\r\n        },\r\n        \r\n        /**\r\n         * Handles offcanvas click toggle\r\n         */\r\n        toggle: function() {\r\n            if (the.state == 'off') {\r\n                Plugin.toggleOn();\r\n            } else {\r\n                Plugin.toggleOff();\r\n            }\r\n\r\n            return the;\r\n        },\r\n\r\n        /**\r\n         * Handles toggle click toggle\r\n         */\r\n        toggleOn: function() {\r\n            Plugin.eventTrigger('beforeOn');\r\n\r\n            mUtil.addClass(the.target, the.targetState);\r\n\r\n            if (the.togglerState) {\r\n                mUtil.addClass(element, the.togglerState);\r\n            }\r\n\r\n            the.state = 'on';\r\n\r\n            Plugin.eventTrigger('afterOn');\r\n\r\n            Plugin.eventTrigger('toggle');\r\n\r\n            return the;\r\n        },\r\n\r\n        /**\r\n         * Handles toggle click toggle\r\n         */\r\n        toggleOff: function() {\r\n            Plugin.eventTrigger('beforeOff');\r\n\r\n            mUtil.removeClass(the.target, the.targetState);\r\n\r\n            if (the.togglerState) {\r\n                mUtil.removeClass(element, the.togglerState);\r\n            }\r\n\r\n            the.state = 'off';\r\n\r\n            Plugin.eventTrigger('afterOff');\r\n\r\n            Plugin.eventTrigger('toggle');\r\n\r\n            return the;\r\n        },\r\n\r\n        /**\r\n         * Trigger events\r\n         */\r\n        eventTrigger: function(name) {\r\n            for (i = 0; i < the.events.length; i++) {\r\n                var event = the.events[i];\r\n\r\n                if (event.name == name) {\r\n                    if (event.one == true) {\r\n                        if (event.fired == false) {\r\n                            the.events[i].fired = true;                            \r\n                            event.handler.call(this, the);\r\n                        }\r\n                    } else {\r\n                        event.handler.call(this, the);\r\n                    }\r\n                }\r\n            }\r\n        },\r\n\r\n        addEvent: function(name, handler, one) {\r\n            the.events.push({\r\n                name: name,\r\n                handler: handler,\r\n                one: one,\r\n                fired: false\r\n            });\r\n\r\n            return the;\r\n        }\r\n    };\r\n\r\n    //////////////////////////\r\n    // ** Public Methods ** //\r\n    //////////////////////////\r\n\r\n    /**\r\n     * Set default options \r\n     */\r\n\r\n    the.setDefaults = function(options) {\r\n        defaultOptions = options;\r\n    };\r\n\r\n    /**\r\n     * Get toggle state \r\n     */\r\n    the.getState = function() {\r\n        return the.state;\r\n    };\r\n\r\n    /**\r\n     * Toggle \r\n     */\r\n    the.toggle = function() {\r\n        return Plugin.toggle();\r\n    };\r\n\r\n    /**\r\n     * Toggle on \r\n     */\r\n    the.toggleOn = function() {\r\n        return Plugin.toggleOn();\r\n    };\r\n\r\n    /**\r\n     * Toggle off \r\n     */\r\n    the.toggle = function() {\r\n        return Plugin.toggleOff();\r\n    };\r\n\r\n    /**\r\n     * Attach event\r\n     * @returns {mToggle}\r\n     */\r\n    the.on = function(name, handler) {\r\n        return Plugin.addEvent(name, handler);\r\n    };\r\n\r\n    /**\r\n     * Attach event that will be fired once\r\n     * @returns {mToggle}\r\n     */\r\n    the.one = function(name, handler) {\r\n        return Plugin.addEvent(name, handler, true);\r\n    };\r\n\r\n    //== Construct plugin\r\n    Plugin.construct.apply(the, [options]);\r\n\r\n    return the;\r\n};\n// plugin setup\r\nvar mWizard = function(elementId, options) {\r\n    //== Main object\r\n    var the = this;\r\n    var init = false;\r\n\r\n    //== Get element object\r\n    var element = mUtil.get(elementId);\r\n    var body = mUtil.get('body');\r\n\r\n    if (!element) {\r\n        return; \r\n    }\r\n\r\n    //== Default options\r\n    var defaultOptions = {\r\n        startStep: 1,\r\n        manualStepForward: false\r\n    };\r\n\r\n    ////////////////////////////\r\n    // ** Private Methods  ** //\r\n    ////////////////////////////\r\n\r\n    var Plugin = {\r\n        /**\r\n         * Construct\r\n         */\r\n\r\n        construct: function(options) {\r\n            if (mUtil.data(element).has('wizard')) {\r\n                the = mUtil.data(element).get('wizard');\r\n            } else {\r\n                // reset menu\r\n                Plugin.init(options);\r\n\r\n                // build menu\r\n                Plugin.build();\r\n\r\n                mUtil.data(element).set('wizard', the);\r\n            }\r\n\r\n            return the;\r\n        },\r\n\r\n        /**\r\n         * Init wizard\r\n         */\r\n        init: function(options) {\r\n            the.element = element;\r\n            the.events = [];\r\n\r\n            // merge default and user defined options\r\n            the.options = mUtil.deepExtend({}, defaultOptions, options);\r\n\r\n            //== Elements\r\n            the.steps = mUtil.findAll(element, '.m-wizard__step');\r\n\r\n            the.progress = mUtil.find(element, '.m-wizard__progress .progress-bar');\r\n            the.btnSubmit = mUtil.find(element, '[data-wizard-action=\"submit\"]');\r\n            the.btnNext = mUtil.find(element, '[data-wizard-action=\"next\"]');\r\n            the.btnPrev = mUtil.find(element, '[data-wizard-action=\"prev\"]');\r\n            the.btnLast = mUtil.find(element, '[data-wizard-action=\"last\"]');\r\n            the.btnFirst = mUtil.find(element, '[data-wizard-action=\"first\"]');\r\n\r\n            //== Variables\r\n            the.events = [];\r\n            the.currentStep = 1;\r\n            the.stopped = false;\r\n            the.totalSteps = the.steps.length;\r\n\r\n            //== Init current step\r\n            if (the.options.startStep > 1) {\r\n                Plugin.goTo(the.options.startStep);\r\n            }\r\n\r\n            //== Init UI\r\n            Plugin.updateUI();\r\n        },\r\n\r\n        /**\r\n         * Build Form Wizard\r\n         */\r\n        build: function() {\r\n            //== Next button event handler\r\n            mUtil.addEvent(the.btnNext, 'click', function(e) {\r\n                e.preventDefault();\r\n                Plugin.goNext();\r\n            });\r\n\r\n            //== Prev button event handler\r\n            mUtil.addEvent(the.btnPrev, 'click', function(e) {\r\n                e.preventDefault();\r\n                Plugin.goPrev();\r\n            });\r\n\r\n            //== First button event handler\r\n            mUtil.addEvent(the.btnFirst, 'click', function(e) {\r\n                e.preventDefault();\r\n                Plugin.goFirst();\r\n            });\r\n\r\n            //== Last button event handler\r\n            mUtil.addEvent(the.btnLast, 'click', function(e) {\r\n                e.preventDefault();\r\n                Plugin.goLast();\r\n            });\r\n\r\n            mUtil.on(element, '.m-wizard__step a.m-wizard__step-number', 'click', function() {\r\n                var step = this.closest('.m-wizard__step');\r\n                var steps = mUtil.parents(this, '.m-wizard__steps')\r\n                var find = mUtil.findAll(steps, '.m-wizard__step');\r\n                var num;\r\n\r\n                for (var i = 0, j = find.length; i < j; i++) {\r\n                    if (step === find[i]) {\r\n                        num = (i + 1);\r\n                        break;\r\n                    }\r\n                }\r\n\r\n                if (num) {\r\n                    if (the.options.manualStepForward === false) {\r\n                        if (num < the.currentStep) {\r\n                            Plugin.goTo(num);\r\n                        }\r\n                    } else {\r\n                        Plugin.goTo(num);\r\n                    }                    \r\n                }\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Handles wizard click wizard\r\n         */\r\n        goTo: function(number) {\r\n            //== Skip if this step is already shown\r\n            if (number === the.currentStep || number > the.totalSteps || number < 0) {\r\n                return;\r\n            }\r\n\r\n            //== Validate step number\r\n            if (number) {\r\n                number = parseInt(number);\r\n            } else {\r\n                number = Plugin.getNextStep();\r\n            }\r\n\r\n            //== Before next and prev events\r\n            var callback;\r\n\r\n            if (number > the.currentStep) {\r\n                callback = Plugin.eventTrigger('beforeNext');\r\n            } else {\r\n                callback = Plugin.eventTrigger('beforePrev');\r\n            }\r\n            \r\n            //== Skip if stopped\r\n            if (the.stopped === true) {\r\n                the.stopped = false;\r\n                return;\r\n            }\r\n\r\n            //== Continue if no exit\r\n            if (callback !== false) {\r\n                //== Before change\r\n                Plugin.eventTrigger('beforeChange');\r\n\r\n                //== Set current step \r\n                the.currentStep = number;\r\n\r\n                //== Update UI\r\n                Plugin.updateUI();\r\n\r\n                //== Trigger change event\r\n                Plugin.eventTrigger('change');\r\n            }\r\n\r\n            //== After next and prev events\r\n            if (number > the.startStep) {\r\n                Plugin.eventTrigger('afterNext');\r\n            } else {\r\n                Plugin.eventTrigger('afterPrev');\r\n            }\r\n\r\n            return the;\r\n        },\r\n\r\n        /**\r\n         * Set step class\r\n         */\r\n        setStepClass: function() {\r\n            if (Plugin.isLastStep()) {\r\n                mUtil.addClass(element, 'm-wizard--step-last');\r\n            } else {\r\n                mUtil.removeClass(element, 'm-wizard--step-last');\r\n            }\r\n\r\n            if (Plugin.isFirstStep()) {\r\n                mUtil.addClass(element, 'm-wizard--step-first');\r\n            } else {\r\n                mUtil.removeClass(element, 'm-wizard--step-first');\r\n            }\r\n\r\n            if (Plugin.isBetweenStep()) {\r\n                mUtil.addClass(element, 'm-wizard--step-between');\r\n            } else {\r\n                mUtil.removeClass(element, 'm-wizard--step-between');\r\n            }\r\n        },\r\n\r\n        updateUI: function(argument) {\r\n            //== Update progress bar\r\n            Plugin.updateProgress();\r\n\r\n            //== Show current target content\r\n            Plugin.handleTarget();\r\n\r\n            //== Set classes\r\n            Plugin.setStepClass();\r\n\r\n            //== Apply nav step classes\r\n            for (var i = 0, j = the.steps.length; i < j; i++) {\r\n                mUtil.removeClass(the.steps[i], 'm-wizard__step--current m-wizard__step--done');\r\n            }\r\n\r\n            for (var i = 1; i < the.currentStep; i++) {\r\n                mUtil.addClass(the.steps[i - 1], 'm-wizard__step--done');\r\n            }\r\n            \r\n            mUtil.addClass(the.steps[the.currentStep - 1], 'm-wizard__step--current');\r\n        },\r\n\r\n        /**\r\n         * Cancel\r\n         */\r\n        stop: function() {\r\n            the.stopped = true;\r\n        },\r\n\r\n        /**\r\n         * Resume\r\n         */\r\n        start: function() {\r\n            the.stopped = false;\r\n        },\r\n\r\n        /**\r\n         * Check last step\r\n         */\r\n        isLastStep: function() {\r\n            return the.currentStep === the.totalSteps;\r\n        },\r\n\r\n        /**\r\n         * Check first step\r\n         */\r\n        isFirstStep: function() {\r\n            return the.currentStep === 1;\r\n        },\r\n\r\n        /**\r\n         * Check between step\r\n         */\r\n        isBetweenStep: function() {\r\n            return Plugin.isLastStep() === false && Plugin.isFirstStep() === false;\r\n        },\r\n\r\n        /**\r\n         * Go to the next step\r\n         */\r\n        goNext: function() {\r\n            return Plugin.goTo(Plugin.getNextStep());\r\n        },\r\n\r\n        /**\r\n         * Go to the prev step\r\n         */\r\n        goPrev: function() {\r\n            return Plugin.goTo(Plugin.getPrevStep());\r\n        },\r\n\r\n        /**\r\n         * Go to the last step\r\n         */\r\n        goLast: function() {\r\n            return Plugin.goTo(the.totalSteps);\r\n        },\r\n\r\n        /**\r\n         * Go to the first step\r\n         */\r\n        goFirst: function() {\r\n            return Plugin.goTo(1);\r\n        },\r\n\r\n        /**\r\n         * Set progress\r\n         */\r\n        updateProgress: function() {\r\n            //== Calculate progress position\r\n            if (!the.progress) {\r\n                return;\r\n            }\r\n\r\n            //== Update progress\r\n            if (mUtil.hasClass(element, 'm-wizard--1')) {\r\n                var width = 100 * ((the.currentStep) / (the.totalSteps));\r\n                var number = mUtil.find(element, '.m-wizard__step-number');\r\n                var offset = parseInt(mUtil.css(number, 'width'));\r\n                mUtil.css(the.progress, 'width', 'calc(' + width + '% + ' + (offset / 2) + 'px)');\r\n            } else if (mUtil.hasClass(element, 'm-wizard--2')) {\r\n                if (the.currentStep === 1) {\r\n                    //return;\r\n                }\r\n\r\n                var progress = (the.currentStep - 1) * (100 * (1 / (the.totalSteps - 1)));\r\n\r\n                if (mUtil.isInResponsiveRange('minimal-desktop-and-below')) {\r\n                    mUtil.css(the.progress, 'height', progress + '%');\r\n                } else {\r\n                    mUtil.css(the.progress, 'width', progress + '%');\r\n                }\r\n            } else {\r\n                var width = 100 * ((the.currentStep) / (the.totalSteps));\r\n                mUtil.css(the.progress, 'width', width + '%');\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Show/hide target content\r\n         */\r\n        handleTarget: function() {\r\n            var step = the.steps[the.currentStep - 1];\r\n            var target = mUtil.get(mUtil.attr(step, 'm-wizard-target'));\r\n            var current = mUtil.find(element, '.m-wizard__form-step--current');\r\n            \r\n            mUtil.removeClass(current, 'm-wizard__form-step--current');\r\n            mUtil.addClass(target, 'm-wizard__form-step--current');\r\n        },\r\n\r\n        /**\r\n         * Get next step\r\n         */\r\n        getNextStep: function() {\r\n            if (the.totalSteps >= (the.currentStep + 1)) {\r\n                return the.currentStep + 1;\r\n            } else {\r\n                return the.totalSteps;\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Get prev step\r\n         */\r\n        getPrevStep: function() {\r\n            if ((the.currentStep - 1) >= 1) {\r\n                return the.currentStep - 1;\r\n            } else {\r\n                return 1;\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Trigger events\r\n         */\r\n        eventTrigger: function(name) {\r\n            //mUtil.triggerCustomEvent(name);\r\n            for (i = 0; i < the.events.length; i++) {\r\n                var event = the.events[i];\r\n                if (event.name == name) {\r\n                    if (event.one == true) {\r\n                        if (event.fired == false) {\r\n                            the.events[i].fired = true;\r\n                            event.handler.call(this, the);\r\n                        }\r\n                    } else {\r\n                        event.handler.call(this, the);\r\n                    }\r\n                }\r\n            }\r\n        },\r\n\r\n        addEvent: function(name, handler, one) {\r\n            the.events.push({\r\n                name: name,\r\n                handler: handler,\r\n                one: one,\r\n                fired: false\r\n            });\r\n\r\n            return the;\r\n        }\r\n    };\r\n\r\n    //////////////////////////\r\n    // ** Public Methods ** //\r\n    //////////////////////////\r\n\r\n    /**\r\n     * Set default options \r\n     */\r\n\r\n    the.setDefaults = function(options) {\r\n        defaultOptions = options;\r\n    };\r\n\r\n    /**\r\n     * Go to the next step \r\n     */\r\n    the.goNext = function() {\r\n        return Plugin.goNext();\r\n    };\r\n\r\n    /**\r\n     * Go to the prev step \r\n     */\r\n    the.goPrev = function() {\r\n        return Plugin.goPrev();\r\n    };\r\n\r\n    /**\r\n     * Go to the last step \r\n     */\r\n    the.goLast = function() {\r\n        return Plugin.goLast();\r\n    };\r\n\r\n    /**\r\n     * Cancel step \r\n     */\r\n    the.stop = function() {\r\n        return Plugin.stop();\r\n    };\r\n\r\n    /**\r\n     * Resume step \r\n     */\r\n    the.start = function() {\r\n        return Plugin.start();\r\n    };\r\n\r\n    /**\r\n     * Go to the first step \r\n     */\r\n    the.goFirst = function() {\r\n        return Plugin.goFirst();\r\n    };\r\n\r\n    /**\r\n     * Go to a step\r\n     */\r\n    the.goTo = function(number) {\r\n        return Plugin.goTo(number);\r\n    };\r\n\r\n    /**\r\n     * Get current step number \r\n     */\r\n    the.getStep = function() {\r\n        return the.currentStep;\r\n    };\r\n\r\n    /**\r\n     * Check last step \r\n     */\r\n    the.isLastStep = function() {\r\n        return Plugin.isLastStep();\r\n    };\r\n\r\n    /**\r\n     * Check first step \r\n     */\r\n    the.isFirstStep = function() {\r\n        return Plugin.isFirstStep();\r\n    };\r\n    \r\n    /**\r\n     * Attach event\r\n     */\r\n    the.on = function(name, handler) {\r\n        return Plugin.addEvent(name, handler);\r\n    };\r\n\r\n    /**\r\n     * Attach event that will be fired once\r\n     */\r\n    the.one = function(name, handler) {\r\n        return Plugin.addEvent(name, handler, true);\r\n    };\r\n\r\n    //== Construct plugin\r\n    Plugin.construct.apply(the, [options]);\r\n\r\n    return the;\r\n};\n(function ($) {\r\n\r\n\t$.fn.mDatatable = $.fn.mDatatable || {};\r\n\r\n\t/**\r\n\t * @param datatable Main datatable plugin instance\r\n\t * @param options Extension options\r\n\t * @returns {*}\r\n\t */\r\n\t$.fn.mDatatable.checkbox = function (datatable, options) {\r\n\r\n\t\tvar Extension = {\r\n\t\t\tselectedAllRows: false,\r\n\t\t\tselectedRows: [],\r\n\t\t\tunselectedRows: [],\r\n\r\n\t\t\tinit: function () {\r\n\t\t\t\tif (Extension.selectorEnabled()) {\r\n\t\t\t\t\t// reset\r\n\t\t\t\t\tdatatable.setDataSourceParam(options.vars.selectedAllRows, false);\r\n\t\t\t\t\tdatatable.stateRemove('checkbox');\r\n\r\n\t\t\t\t\t// requestIds is not null\r\n\t\t\t\t\tif (options.vars.requestIds) {\r\n\t\t\t\t\t\t// request ids in response\r\n\t\t\t\t\t\tdatatable.setDataSourceParam(options.vars.requestIds, true);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// remove selected checkbox on datatable reload\r\n\t\t\t\t\t$(datatable).on('m-datatable--on-reloaded', function () {\r\n\t\t\t\t\t\tdatatable.stateRemove('checkbox');\r\n\t\t\t\t\t\tdatatable.setDataSourceParam(options.vars.selectedAllRows, false);\r\n\t\t\t\t\t\tExtension.selectedAllRows = false;\r\n\t\t\t\t\t\tExtension.selectedRows = [];\r\n\t\t\t\t\t\tExtension.unselectedRows = [];\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\t// select all on extension init\r\n\t\t\t\t\tExtension.selectedAllRows = datatable.getDataSourceParam(options.vars.selectedAllRows);\r\n\r\n\t\t\t\t\t$(datatable).on('m-datatable--on-layout-updated', function (e, args) {\r\n\t\t\t\t\t\tif (args.table != $(datatable.wrap).attr('id')) return;\r\n\t\t\t\t\t\tdatatable.ready(function () {\r\n\t\t\t\t\t\t\tExtension.initVars();\r\n\t\t\t\t\t\t\tExtension.initEvent();\r\n\t\t\t\t\t\t\tExtension.initSelect();\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\t$(datatable).on('m-datatable--on-check', function (e, ids) {\r\n\t\t\t\t\t\tids.forEach(function (id) {\r\n\t\t\t\t\t\t\tExtension.selectedRows.push(id);\r\n\t\t\t\t\t\t\t// // remove from unselected rows\r\n\t\t\t\t\t\t\tExtension.unselectedRows = Extension.remove(Extension.unselectedRows, id);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tvar storage = {};\r\n\t\t\t\t\t\tstorage['selectedRows'] = $.unique(Extension.selectedRows);\r\n\t\t\t\t\t\tstorage['unselectedRows'] = $.unique(Extension.unselectedRows);\r\n\t\t\t\t\t\tdatatable.stateKeep('checkbox', storage);\r\n\t\t\t\t\t});\r\n\t\t\t\t\t$(datatable).on('m-datatable--on-uncheck', function (e, ids) {\r\n\t\t\t\t\t\tids.forEach(function (id) {\r\n\t\t\t\t\t\t\tExtension.unselectedRows.push(id);\r\n\t\t\t\t\t\t\t// // remove from selected rows\r\n\t\t\t\t\t\t\tExtension.selectedRows = Extension.remove(Extension.selectedRows, id);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tvar storage = {};\r\n\t\t\t\t\t\tstorage['selectedRows'] = $.unique(Extension.selectedRows);\r\n\t\t\t\t\t\tstorage['unselectedRows'] = $.unique(Extension.unselectedRows);\r\n\t\t\t\t\t\tdatatable.stateKeep('checkbox', storage);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * Init checkbox clicks event\r\n\t\t\t */\r\n\t\t\tinitEvent: function () {\r\n\t\t\t\t// select all checkbox click\r\n\t\t\t\t$(datatable.tableHead).find('.m-checkbox--all > [type=\"checkbox\"]').click(function (e) {\r\n\t\t\t\t\t// clear selected and unselected rows\r\n\t\t\t\t\tExtension.selectedRows = Extension.unselectedRows = [];\r\n\t\t\t\t\tdatatable.stateRemove('checkbox');\r\n\r\n\t\t\t\t\t// select all rows\r\n\t\t\t\t\tif ($(this).is(':checked')) {\r\n\t\t\t\t\t\tExtension.selectedAllRows = true;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tExtension.selectedAllRows = false;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// local select all current page rows\r\n\t\t\t\t\tif (!options.vars.requestIds) {\r\n\t\t\t\t\t\tif ($(this).is(':checked')) {\r\n\t\t\t\t\t\t\tExtension.selectedRows = $.makeArray($(datatable.tableBody).find('.m-checkbox--single > [type=\"checkbox\"]').map(function (i, chk) {\r\n\t\t\t\t\t\t\t\treturn $(chk).val();\r\n\t\t\t\t\t\t\t}));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tvar storage = {};\r\n\t\t\t\t\t\tstorage['selectedRows'] = $.unique(Extension.selectedRows);\r\n\t\t\t\t\t\tdatatable.stateKeep('checkbox', storage);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// keep selectedAllRows in datasource params\r\n\t\t\t\t\tdatatable.setDataSourceParam(options.vars.selectedAllRows, Extension.selectedAllRows);\r\n\r\n\t\t\t\t\t$(datatable).trigger('m-datatable--on-click-checkbox', [$(this)]);\r\n\t\t\t\t});\r\n\r\n\t\t\t\t// single row checkbox click\r\n\t\t\t\t$(datatable.tableBody).find('.m-checkbox--single > [type=\"checkbox\"]').click(function (e) {\r\n\t\t\t\t\tvar id = $(this).val();\r\n\t\t\t\t\tif ($(this).is(':checked')) {\r\n\t\t\t\t\t\tExtension.selectedRows.push(id);\r\n\t\t\t\t\t\t// remove from unselected rows\r\n\t\t\t\t\t\tExtension.unselectedRows = Extension.remove(Extension.unselectedRows, id);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tExtension.unselectedRows.push(id);\r\n\t\t\t\t\t\t// remove from selected rows\r\n\t\t\t\t\t\tExtension.selectedRows = Extension.remove(Extension.selectedRows, id);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// local checkbox header check\r\n\t\t\t\t\tif (!options.vars.requestIds && Extension.selectedRows.length < 1) {\r\n\t\t\t\t\t\t// remove select all checkbox, if there is no checked checkbox left\r\n\t\t\t\t\t\t$(datatable.tableHead).find('.m-checkbox--all > [type=\"checkbox\"]').prop('checked', false);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar storage = {};\r\n\t\t\t\t\tstorage['selectedRows'] = $.unique(Extension.selectedRows);\r\n\t\t\t\t\tstorage['unselectedRows'] = $.unique(Extension.unselectedRows);\r\n\t\t\t\t\tdatatable.stateKeep('checkbox', storage);\r\n\r\n\t\t\t\t\t$(datatable).trigger('m-datatable--on-click-checkbox', [$(this)]);\r\n\t\t\t\t});\r\n\t\t\t},\r\n\r\n\t\t\tinitSelect: function () {\r\n\t\t\t\t// selected all rows from server\r\n\t\t\t\tif (Extension.selectedAllRows && options.vars.requestIds) {\r\n\t\t\t\t\tif (!datatable.hasClass('m-datatable--error')) {\r\n\t\t\t\t\t\t// set header select all checkbox checked\r\n\t\t\t\t\t\t$(datatable.tableHead).find('.m-checkbox--all > [type=\"checkbox\"]').prop('checked', true);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// set all checkbox in table body\r\n\t\t\t\t\tdatatable.setActiveAll(true);\r\n\r\n\t\t\t\t\t// remove unselected rows\r\n\t\t\t\t\tExtension.unselectedRows.forEach(function (id) {\r\n\t\t\t\t\t\tdatatable.setInactive(id);\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// single check for server and local\r\n\t\t\t\t\tExtension.selectedRows.forEach(function (id) {\r\n\t\t\t\t\t\tdatatable.setActive(id);\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\t// local checkbox; check if all checkboxes of currect page are checked\r\n\t\t\t\t\tif (!datatable.hasClass('m-datatable--error') && $(datatable.tableBody).find('.m-checkbox--single > [type=\"checkbox\"]').not(':checked').length < 1) {\r\n\t\t\t\t\t\t// set header select all checkbox checked\r\n\t\t\t\t\t\t$(datatable.tableHead).find('.m-checkbox--all > [type=\"checkbox\"]').prop('checked', true);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * Check if selector is enabled from options\r\n\t\t\t */\r\n\t\t\tselectorEnabled: function () {\r\n\t\t\t\treturn $.grep(datatable.options.columns, function (n, i) {\r\n\t\t\t\t\treturn n.selector || false;\r\n\t\t\t\t})[0];\r\n\t\t\t},\r\n\r\n\t\t\tinitVars: function () {\r\n\t\t\t\t// get single select/unselect from localstorage\r\n\t\t\t\tvar storage = datatable.stateGet('checkbox');\r\n\t\t\t\tif (typeof storage !== 'undefined') {\r\n\t\t\t\t\tExtension.selectedRows = storage['selectedRows'] || [];\r\n\t\t\t\t\tExtension.unselectedRows = storage['unselectedRows'] || [];\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\tgetSelectedId: function (path) {\r\n\t\t\t\tExtension.initVars();\r\n\r\n\t\t\t\t// server selected all rows\r\n\t\t\t\tif (Extension.selectedAllRows && options.vars.requestIds) {\r\n\t\t\t\t\tif (typeof path === 'undefined') path = options.vars.rowIds;\r\n\r\n\t\t\t\t\t// if selected all rows, return id from response meta\r\n\t\t\t\t\tvar selectedAllRows = datatable.getObject(path, datatable.lastResponse) || [];\r\n\r\n\t\t\t\t\tif (selectedAllRows.length > 0) {\r\n\t\t\t\t\t\t// remove single unselected rows from selectedAllRows ids from server response emta\r\n\t\t\t\t\t\tExtension.unselectedRows.forEach(function (id) {\r\n\t\t\t\t\t\t\tselectedAllRows = Extension.remove(selectedAllRows, parseInt(id));\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn selectedAllRows;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// else return single checked selected rows\r\n\t\t\t\treturn Extension.selectedRows;\r\n\t\t\t},\r\n\r\n\t\t\tremove: function (array, element) {\r\n\t\t\t\treturn array.filter(function (e) {\r\n\t\t\t\t\treturn e !== element;\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t};\r\n\r\n\t\t// make the extension accessible from datatable init\r\n\t\tdatatable.checkbox = function () {\r\n\t\t\treturn Extension;\r\n\t\t};\r\n\r\n\t\tif (typeof options === 'object') {\r\n\t\t\toptions = $.extend(true, {}, $.fn.mDatatable.checkbox.default, options);\r\n\t\t\tExtension.init.apply(this, [options]);\r\n\t\t}\r\n\r\n\t\treturn datatable;\r\n\t};\r\n\r\n\t$.fn.mDatatable.checkbox.default = {\r\n\t\tvars: {\r\n\t\t\t// select all rows flag to be sent to the server\r\n\t\t\tselectedAllRows: 'selectedAllRows',\r\n\t\t\t// request id parameter's name\r\n\t\t\trequestIds: 'requestIds',\r\n\t\t\t// response path to all rows id\r\n\t\t\trowIds: 'meta.rowIds',\r\n\t\t},\r\n\t};\r\n\r\n}(jQuery));\n(function ($) {\r\n\r\n\tif (typeof mUtil === 'undefined') throw new Error('mUtil is required and must be included before mDatatable.');\r\n\r\n\t// plugin setup\r\n\t$.fn.mDatatable = function (options) {\r\n\t\tif ($(this).length === 0) {\r\n\t\t\tconsole.log('No mDatatable element exist.');\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// global variables\r\n\t\tvar datatable = this;\r\n\r\n\t\t// debug enabled?\r\n\t\t// 1) state will be cleared on each refresh\r\n\t\t// 2) enable some logs\r\n\t\t// 3) etc.\r\n\t\tdatatable.debug = false;\r\n\r\n\t\tdatatable.API = {\r\n\t\t\trecord: null,\r\n\t\t\tvalue: null,\r\n\t\t\tparams: null,\r\n\t\t};\r\n\r\n\t\tvar Plugin = {\r\n\t\t\t/********************\r\n\t\t\t ** PRIVATE METHODS\r\n\t\t\t ********************/\r\n\t\t\tisInit: false,\r\n\t\t\toffset: 110,\r\n\t\t\tstateId: 'meta',\r\n\t\t\tajaxParams: {},\r\n\r\n\t\t\tinit: function (options) {\r\n\t\t\t\tvar isHtmlTable = false;\r\n\t\t\t\t// data source option empty is normal table\r\n\t\t\t\tif (options.data.source === null) {\r\n\t\t\t\t\tPlugin.extractTable();\r\n\t\t\t\t\tisHtmlTable = true;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tPlugin.setupBaseDOM.call();\r\n\t\t\t\tPlugin.setupDOM(datatable.table);\r\n\t\t\t\tPlugin.spinnerCallback(true);\r\n\r\n\t\t\t\t// set custom query from options\r\n\t\t\t\tPlugin.setDataSourceQuery(Plugin.getOption('data.source.read.params.query'));\r\n\r\n\t\t\t\t// on event after layout had done setup, show datatable\r\n\t\t\t\t$(datatable).on('m-datatable--on-layout-updated', Plugin.afterRender);\r\n\r\n\t\t\t\tif (datatable.debug) Plugin.stateRemove(Plugin.stateId);\r\n\r\n\t\t\t\t// initialize extensions\r\n\t\t\t\t$.each(Plugin.getOption('extensions'), function (extName, extOptions) {\r\n\t\t\t\t\tif (typeof $.fn.mDatatable[extName] === 'function')\r\n\t\t\t\t\t\tnew $.fn.mDatatable[extName](datatable, extOptions);\r\n\t\t\t\t});\r\n\r\n\t\t\t\t// get data\r\n\t\t\t\tif (options.data.type === 'remote' || options.data.type === 'local') {\r\n\t\t\t\t\tif (options.data.saveState === false\r\n\t\t\t\t\t\t|| options.data.saveState.cookie === false\r\n\t\t\t\t\t\t&& options.data.saveState.webstorage === false) {\r\n\t\t\t\t\t\tPlugin.stateRemove(Plugin.stateId);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// get data for local datatable and local table\r\n\t\t\t\t\tif (options.data.type === 'local' && typeof options.data.source === 'object') {\r\n\t\t\t\t\t\tdatatable.dataSet = datatable.originalDataSet = Plugin.dataMapCallback(options.data.source);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tPlugin.dataRender();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (!isHtmlTable) {\r\n\t\t\t\t\t// if not a html table, setup header\r\n\t\t\t\t\tPlugin.setHeadTitle();\r\n\t\t\t\t\tif (Plugin.getOption('layout.footer')) {\r\n\t\t\t\t\t\tPlugin.setHeadTitle(datatable.tableFoot);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// hide header\r\n\t\t\t\tif (typeof options.layout.header !== 'undefined' &&\r\n\t\t\t\t\toptions.layout.header === false) {\r\n\t\t\t\t\t$(datatable.table).find('thead').remove();\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// hide footer\r\n\t\t\t\tif (typeof options.layout.footer !== 'undefined' &&\r\n\t\t\t\t\toptions.layout.footer === false) {\r\n\t\t\t\t\t$(datatable.table).find('tfoot').remove();\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// for normal and local data type, run layoutUpdate\r\n\t\t\t\tif (options.data.type === null ||\r\n\t\t\t\t\toptions.data.type === 'local') {\r\n\t\t\t\t\tPlugin.setupCellField.call();\r\n\t\t\t\t\tPlugin.setupTemplateCell.call();\r\n\r\n\t\t\t\t\t// setup nested datatable, if option enabled\r\n\t\t\t\t\tPlugin.setupSubDatatable.call();\r\n\r\n\t\t\t\t\t// setup extra system column properties\r\n\t\t\t\t\tPlugin.setupSystemColumn.call();\r\n\t\t\t\t\tPlugin.redraw();\r\n\t\t\t\t}\r\n\r\n\t\t\t\t$(window).resize(Plugin.fullRender);\r\n\r\n\t\t\t\t$(datatable).height('');\r\n\r\n\t\t\t\t$(Plugin.getOption('search.input')).on('keyup', function (e) {\r\n\t\t\t\t\tif (Plugin.getOption('search.onEnter') && e.which !== 13) return;\r\n\t\t\t\t\tPlugin.search($(this).val());\r\n\t\t\t\t});\r\n\r\n\t\t\t\treturn datatable;\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * Extract static HTML table content into datasource\r\n\t\t\t */\r\n\t\t\textractTable: function () {\r\n\t\t\t\tvar columns = [];\r\n\t\t\t\tvar headers = $(datatable).find('tr:first-child th').get().map(function (cell, i) {\r\n\t\t\t\t\tvar field = $(cell).data('field');\r\n\t\t\t\t\tif (typeof field === 'undefined') {\r\n\t\t\t\t\t\tfield = $(cell).text().trim();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar column = {field: field, title: field};\r\n\t\t\t\t\tfor (var ii in options.columns) {\r\n\t\t\t\t\t\tif (options.columns[ii].field === field) {\r\n\t\t\t\t\t\t\tcolumn = $.extend(true, {}, options.columns[ii], column);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcolumns.push(column);\r\n\t\t\t\t\treturn field;\r\n\t\t\t\t});\r\n\t\t\t\t// auto create columns config\r\n\t\t\t\toptions.columns = columns;\r\n\r\n\t\t\t\tvar rowProp = [];\r\n\t\t\t\tvar source = [];\r\n\r\n\t\t\t\t$(datatable).find('tr').each(function () {\r\n\t\t\t\t\tif ($(this).find('td').length) {\r\n\t\t\t\t\t\trowProp.push($(this).prop('attributes'));\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar td = {};\r\n\t\t\t\t\t$(this).find('td').each(function (i, cell) {\r\n\t\t\t\t\t\ttd[headers[i]] = cell.innerHTML.trim();\r\n\t\t\t\t\t});\r\n\t\t\t\t\tif (!mUtil.isEmpty(td)) {\r\n\t\t\t\t\t\tsource.push(td);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\toptions.data.attr.rowProps = rowProp;\r\n\t\t\t\toptions.data.source = source;\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * One time layout update on init\r\n\t\t\t */\r\n\t\t\tlayoutUpdate: function () {\r\n\t\t\t\t// setup nested datatable, if option enabled\r\n\t\t\t\tPlugin.setupSubDatatable.call();\r\n\r\n\t\t\t\t// setup extra system column properties\r\n\t\t\t\tPlugin.setupSystemColumn.call();\r\n\r\n\t\t\t\t// setup cell hover event\r\n\t\t\t\tPlugin.setupHover.call();\r\n\r\n\t\t\t\tif (typeof options.detail === 'undefined'\r\n\t\t\t\t\t// temporary disable lock column in subtable\r\n\t\t\t\t\t&& Plugin.getDepth() === 1) {\r\n\t\t\t\t\t// lock columns handler\r\n\t\t\t\t\tPlugin.lockTable.call();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tPlugin.columnHide.call();\r\n\r\n\t\t\t\tPlugin.resetScroll();\r\n\r\n\t\t\t\tif (!Plugin.isInit) {\r\n\t\t\t\t\t$(datatable).trigger('m-datatable--on-init', {table: $(datatable.wrap).attr('id'), options: options});\r\n\t\t\t\t\tPlugin.isInit = true;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t$(datatable).trigger('m-datatable--on-layout-updated', {table: $(datatable.wrap).attr('id')});\r\n\t\t\t},\r\n\r\n\t\t\tlockTable: function () {\r\n\t\t\t\t// todo; revise lock table responsive\r\n\t\t\t\tvar lock = {\r\n\t\t\t\t\tlockEnabled: false,\r\n\t\t\t\t\tinit: function () {\r\n\t\t\t\t\t\t// check if table should be locked columns\r\n\t\t\t\t\t\tlock.lockEnabled = Plugin.lockEnabledColumns();\r\n\t\t\t\t\t\tif (lock.lockEnabled.left.length === 0 &&\r\n\t\t\t\t\t\t\tlock.lockEnabled.right.length === 0) {\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tlock.enable();\r\n\t\t\t\t\t},\r\n\t\t\t\t\tenable: function () {\r\n\t\t\t\t\t\tvar enableLock = function (tablePart) {\r\n\t\t\t\t\t\t\t// check if already has lock column\r\n\t\t\t\t\t\t\tif ($(tablePart).find('.m-datatable__lock').length > 0) {\r\n\t\t\t\t\t\t\t\tPlugin.log('Locked container already exist in: ', tablePart);\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t// check if no rows exists\r\n\t\t\t\t\t\t\tif ($(tablePart).find('.m-datatable__row').length === 0) {\r\n\t\t\t\t\t\t\t\tPlugin.log('No row exist in: ', tablePart);\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t// locked div container\r\n\t\t\t\t\t\t\tvar lockLeft = $('<div/>').addClass('m-datatable__lock m-datatable__lock--left');\r\n\t\t\t\t\t\t\tvar lockScroll = $('<div/>').addClass('m-datatable__lock m-datatable__lock--scroll');\r\n\t\t\t\t\t\t\tvar lockRight = $('<div/>').addClass('m-datatable__lock m-datatable__lock--right');\r\n\r\n\t\t\t\t\t\t\t$(tablePart).find('.m-datatable__row').each(function () {\r\n\t\t\t\t\t\t\t\tvar rowLeft = $('<tr/>').addClass('m-datatable__row').appendTo(lockLeft);\r\n\t\t\t\t\t\t\t\tvar rowScroll = $('<tr/>').addClass('m-datatable__row').appendTo(lockScroll);\r\n\t\t\t\t\t\t\t\tvar rowRight = $('<tr/>').addClass('m-datatable__row').appendTo(lockRight);\r\n\t\t\t\t\t\t\t\t$(this).find('.m-datatable__cell').each(function () {\r\n\t\t\t\t\t\t\t\t\tvar locked = $(this).data('locked');\r\n\t\t\t\t\t\t\t\t\tif (typeof locked !== 'undefined') {\r\n\t\t\t\t\t\t\t\t\t\tif (typeof locked.left !== 'undefined' || locked === true) {\r\n\t\t\t\t\t\t\t\t\t\t\t// default locked to left\r\n\t\t\t\t\t\t\t\t\t\t\t$(this).appendTo(rowLeft);\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\tif (typeof locked.right !== 'undefined') {\r\n\t\t\t\t\t\t\t\t\t\t\t$(this).appendTo(rowRight);\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t$(this).appendTo(rowScroll);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t// remove old row\r\n\t\t\t\t\t\t\t\t$(this).remove();\r\n\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t\tif (lock.lockEnabled.left.length > 0) {\r\n\t\t\t\t\t\t\t\t$(datatable.wrap).addClass('m-datatable--lock');\r\n\t\t\t\t\t\t\t\t$(lockLeft).appendTo(tablePart);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (lock.lockEnabled.left.length > 0 || lock.lockEnabled.right.length > 0) {\r\n\t\t\t\t\t\t\t\t$(lockScroll).appendTo(tablePart);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (lock.lockEnabled.right.length > 0) {\r\n\t\t\t\t\t\t\t\t$(datatable.wrap).addClass('m-datatable--lock');\r\n\t\t\t\t\t\t\t\t$(lockRight).appendTo(tablePart);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t};\r\n\r\n\t\t\t\t\t\t$(datatable.table).find('thead,tbody,tfoot').each(function () {\r\n\t\t\t\t\t\t\tvar tablePart = this;\r\n\t\t\t\t\t\t\tif ($(this).find('.m-datatable__lock').length === 0) {\r\n\t\t\t\t\t\t\t\t$(this).ready(function () {\r\n\t\t\t\t\t\t\t\t\tenableLock(tablePart);\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t},\r\n\t\t\t\t};\r\n\t\t\t\tlock.init();\r\n\t\t\t\treturn lock;\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * Render everything for resize\r\n\t\t\t */\r\n\t\t\tfullRender: function () {\r\n\t\t\t\tif (Plugin.isLocked()) {\r\n\r\n\t\t\t\t\t$(datatable.tableHead).empty();\r\n\t\t\t\t\tPlugin.setHeadTitle();\r\n\t\t\t\t\tif (Plugin.getOption('layout.footer')) {\r\n\t\t\t\t\t\t$(datatable.tableFoot).empty();\r\n\t\t\t\t\t\tPlugin.setHeadTitle(datatable.tableFoot);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// todo; full render datatable for specific condition only\r\n\t\t\t\t\tPlugin.spinnerCallback(true);\r\n\t\t\t\t\t$(datatable.wrap).removeClass('m-datatable--loaded');\r\n\r\n\t\t\t\t\tPlugin.insertData();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\tlockEnabledColumns: function () {\r\n\t\t\t\tvar screen = $(window).width();\r\n\t\t\t\tvar columns = options.columns;\r\n\t\t\t\tvar enabled = {left: [], right: []};\r\n\t\t\t\t$.each(columns, function (i, column) {\r\n\t\t\t\t\tif (typeof column.locked !== 'undefined') {\r\n\t\t\t\t\t\tif (typeof column.locked.left !== 'undefined') {\r\n\t\t\t\t\t\t\tif (mUtil.getBreakpoint(column.locked.left) <= screen) {\r\n\t\t\t\t\t\t\t\tenabled['left'].push(column.locked.left);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (typeof column.locked.right !== 'undefined') {\r\n\t\t\t\t\t\t\tif (mUtil.getBreakpoint(column.locked.right) <= screen) {\r\n\t\t\t\t\t\t\t\tenabled['right'].push(column.locked.right);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\treturn enabled;\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * After render event, called by m-datatable--on-layout-updated\r\n\t\t\t * @param e\r\n\t\t\t * @param args\r\n\t\t\t */\r\n\t\t\tafterRender: function (e, args) {\r\n\t\t\t\tif (args.table == $(datatable.wrap).attr('id')) {\r\n\t\t\t\t\t$(datatable).ready(function () {\r\n\t\t\t\t\t\tif (!Plugin.isLocked()) {\r\n\t\t\t\t\t\t\tPlugin.redraw();\r\n\t\t\t\t\t\t\t// work on non locked columns\r\n\t\t\t\t\t\t\tif (Plugin.getOption('rows.autoHide')) {\r\n\t\t\t\t\t\t\t\tPlugin.autoHide();\r\n\t\t\t\t\t\t\t\t// reset row\r\n\t\t\t\t\t\t\t\t$(datatable.table).find('.m-datatable__row').css('height', '');\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tPlugin.rowEvenOdd.call();\r\n\r\n\t\t\t\t\t\t// redraw locked columns table\r\n\t\t\t\t\t\tif (Plugin.isLocked()) Plugin.redraw();\r\n\t\t\t\t\t\t$(datatable.tableBody).css('visibility', '');\r\n\t\t\t\t\t\t$(datatable.wrap).addClass('m-datatable--loaded');\r\n\r\n\t\t\t\t\t\tPlugin.sorting.call();\r\n\t\t\t\t\t\tPlugin.scrollbar.call();\r\n\r\n\t\t\t\t\t\t// Plugin.hoverColumn.call();\r\n\t\t\t\t\t\tPlugin.spinnerCallback(false);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\thoverTimer: 0,\r\n\t\t\tisScrolling: false,\r\n\t\t\tsetupHover: function () {\r\n\t\t\t\t$(window).scroll(function (e) {\r\n\t\t\t\t\t// stop hover when scrolling\r\n\t\t\t\t\tclearTimeout(Plugin.hoverTimer);\r\n\t\t\t\t\tPlugin.isScrolling = true;\r\n\t\t\t\t});\r\n\r\n\t\t\t\t$(datatable.tableBody).find('.m-datatable__cell').off('mouseenter', 'mouseleave').on('mouseenter', function () {\r\n\t\t\t\t\t// reset scroll timer to hover class\r\n\t\t\t\t\tPlugin.hoverTimer = setTimeout(function () {\r\n\t\t\t\t\t\tPlugin.isScrolling = false;\r\n\t\t\t\t\t}, 200);\r\n\t\t\t\t\tif (Plugin.isScrolling) return;\r\n\r\n\t\t\t\t\t// normal table\r\n\t\t\t\t\tvar row = $(this).closest('.m-datatable__row').addClass('m-datatable__row--hover');\r\n\t\t\t\t\tvar index = $(row).index() + 1;\r\n\r\n\t\t\t\t\t// lock table\r\n\t\t\t\t\t$(row).closest('.m-datatable__lock').parent().find('.m-datatable__row:nth-child(' + index + ')').addClass('m-datatable__row--hover');\r\n\t\t\t\t}).on('mouseleave', function () {\r\n\t\t\t\t\t// normal table\r\n\t\t\t\t\tvar row = $(this).closest('.m-datatable__row').removeClass('m-datatable__row--hover');\r\n\t\t\t\t\tvar index = $(row).index() + 1;\r\n\r\n\t\t\t\t\t// look table\r\n\t\t\t\t\t$(row).closest('.m-datatable__lock').parent().find('.m-datatable__row:nth-child(' + index + ')').removeClass('m-datatable__row--hover');\r\n\t\t\t\t});\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * Adjust width of locked table containers by resize handler\r\n\t\t\t * @returns {number}\r\n\t\t\t */\r\n\t\t\tadjustLockContainer: function () {\r\n\t\t\t\tif (!Plugin.isLocked()) return 0;\r\n\r\n\t\t\t\t// refer to head dimension\r\n\t\t\t\tvar containerWidth = $(datatable.tableHead).width();\r\n\t\t\t\tvar lockLeft = $(datatable.tableHead).find('.m-datatable__lock--left').width();\r\n\t\t\t\tvar lockRight = $(datatable.tableHead).find('.m-datatable__lock--right').width();\r\n\r\n\t\t\t\tif (typeof lockLeft === 'undefined') lockLeft = 0;\r\n\t\t\t\tif (typeof lockRight === 'undefined') lockRight = 0;\r\n\r\n\t\t\t\tvar lockScroll = Math.floor(containerWidth - lockLeft - lockRight);\r\n\t\t\t\t$(datatable.table).find('.m-datatable__lock--scroll').css('width', lockScroll);\r\n\r\n\t\t\t\treturn lockScroll;\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * todo; not in use\r\n\t\t\t */\r\n\t\t\tdragResize: function () {\r\n\t\t\t\tvar pressed = false;\r\n\t\t\t\tvar start = undefined;\r\n\t\t\t\tvar startX, startWidth;\r\n\t\t\t\t$(datatable.tableHead).find('.m-datatable__cell').mousedown(function (e) {\r\n\t\t\t\t\tstart = $(this);\r\n\t\t\t\t\tpressed = true;\r\n\t\t\t\t\tstartX = e.pageX;\r\n\t\t\t\t\tstartWidth = $(this).width();\r\n\t\t\t\t\t$(start).addClass('m-datatable__cell--resizing');\r\n\r\n\t\t\t\t}).mousemove(function (e) {\r\n\t\t\t\t\tif (pressed) {\r\n\t\t\t\t\t\tvar i = $(start).index();\r\n\t\t\t\t\t\tvar tableBody = $(datatable.tableBody);\r\n\t\t\t\t\t\tvar ifLocked = $(start).closest('.m-datatable__lock');\r\n\r\n\t\t\t\t\t\tif (ifLocked) {\r\n\t\t\t\t\t\t\tvar lockedIndex = $(ifLocked).index();\r\n\t\t\t\t\t\t\ttableBody = $(datatable.tableBody).find('.m-datatable__lock').eq(lockedIndex);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t$(tableBody).find('.m-datatable__row').each(function (tri, tr) {\r\n\t\t\t\t\t\t\t$(tr).find('.m-datatable__cell').eq(i).width(startWidth + (e.pageX - startX)).children().width(startWidth + (e.pageX - startX));\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t$(start).children().css('width', startWidth + (e.pageX - startX));\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}).mouseup(function () {\r\n\t\t\t\t\t$(start).removeClass('m-datatable__cell--resizing');\r\n\t\t\t\t\tpressed = false;\r\n\t\t\t\t});\r\n\r\n\t\t\t\t$(document).mouseup(function () {\r\n\t\t\t\t\t$(start).removeClass('m-datatable__cell--resizing');\r\n\t\t\t\t\tpressed = false;\r\n\t\t\t\t});\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * To prepare placeholder for table before content is loading\r\n\t\t\t */\r\n\t\t\tinitHeight: function () {\r\n\t\t\t\tif (options.layout.height && options.layout.scroll) {\r\n\t\t\t\t\tvar theadHeight = $(datatable.tableHead).find('.m-datatable__row').height();\r\n\t\t\t\t\tvar tfootHeight = $(datatable.tableFoot).find('.m-datatable__row').height();\r\n\t\t\t\t\tvar bodyHeight = options.layout.height;\r\n\t\t\t\t\tif (theadHeight > 0) {\r\n\t\t\t\t\t\tbodyHeight -= theadHeight;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (tfootHeight > 0) {\r\n\t\t\t\t\t\tbodyHeight -= tfootHeight;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t$(datatable.tableBody).css('max-height', bodyHeight);\r\n\r\n\t\t\t\t\t// set scrollable area fixed height\r\n\t\t\t\t\t$(datatable.tableBody).find('.m-datatable__lock--scroll').css('height', bodyHeight);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * Setup base DOM (table, thead, tbody, tfoot) and create if not exist.\r\n\t\t\t */\r\n\t\t\tsetupBaseDOM: function () {\r\n\t\t\t\t// keep original state before mDatatable initialize\r\n\t\t\t\tdatatable.initialDatatable = $(datatable).clone();\r\n\r\n\t\t\t\t// main element\r\n\t\t\t\tif ($(datatable).prop('tagName') === 'TABLE') {\r\n\t\t\t\t\t// if main init element is <table>, wrap with div\r\n\t\t\t\t\tdatatable.table = $(datatable).removeClass('m-datatable').addClass('m-datatable__table');\r\n\t\t\t\t\tif ($(datatable.table).parents('.m-datatable').length === 0) {\r\n\t\t\t\t\t\tdatatable.table.wrap($('<div/>').addClass('m-datatable').addClass('m-datatable--' + options.layout.theme));\r\n\t\t\t\t\t\tdatatable.wrap = $(datatable.table).parent();\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// create table\r\n\t\t\t\t\tdatatable.wrap = $(datatable).addClass('m-datatable').addClass('m-datatable--' + options.layout.theme);\r\n\t\t\t\t\tdatatable.table = $('<table/>').addClass('m-datatable__table').appendTo(datatable);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (typeof options.layout.class !== 'undefined') {\r\n\t\t\t\t\t$(datatable.wrap).addClass(options.layout.class);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t$(datatable.table).removeClass('m-datatable--destroyed').css('display', 'block');\r\n\r\n\t\t\t\t// force disable save state\r\n\t\t\t\tif (typeof $(datatable).attr('id') === 'undefined') {\r\n\t\t\t\t\tPlugin.setOption('data.saveState', false);\r\n\t\t\t\t\t$(datatable.table).attr('id', mUtil.getUniqueID('m-datatable--'));\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// predefine table height\r\n\t\t\t\tif (Plugin.getOption('layout.minHeight'))\r\n\t\t\t\t\t$(datatable.table).css('min-height', Plugin.getOption('layout.minHeight'));\r\n\r\n\t\t\t\tif (Plugin.getOption('layout.height'))\r\n\t\t\t\t\t$(datatable.table).css('max-height', Plugin.getOption('layout.height'));\r\n\r\n\t\t\t\t// for normal table load\r\n\t\t\t\tif (options.data.type === null) {\r\n\t\t\t\t\t$(datatable.table).css('width', '').css('display', '');\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// create table head element\r\n\t\t\t\tdatatable.tableHead = $(datatable.table).find('thead');\r\n\t\t\t\tif ($(datatable.tableHead).length === 0) {\r\n\t\t\t\t\tdatatable.tableHead = $('<thead/>').prependTo(datatable.table);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// create table head element\r\n\t\t\t\tdatatable.tableBody = $(datatable.table).find('tbody');\r\n\t\t\t\tif ($(datatable.tableBody).length === 0) {\r\n\t\t\t\t\tdatatable.tableBody = $('<tbody/>').appendTo(datatable.table);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (typeof options.layout.footer !== 'undefined' &&\r\n\t\t\t\t\toptions.layout.footer) {\r\n\t\t\t\t\t// create table foot element\r\n\t\t\t\t\tdatatable.tableFoot = $(datatable.table).find('tfoot');\r\n\t\t\t\t\tif ($(datatable.tableFoot).length === 0) {\r\n\t\t\t\t\t\tdatatable.tableFoot = $('<tfoot/>').appendTo(datatable.table);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * Set column data before table manipulation.\r\n\t\t\t */\r\n\t\t\tsetupCellField: function (tableParts) {\r\n\t\t\t\tif (typeof tableParts === 'undefined') tableParts = $(datatable.table).children();\r\n\t\t\t\tvar columns = options.columns;\r\n\t\t\t\t$.each(tableParts, function (part, tablePart) {\r\n\t\t\t\t\t$(tablePart).find('.m-datatable__row').each(function (tri, tr) {\r\n\t\t\t\t\t\t// prepare data\r\n\t\t\t\t\t\t$(tr).find('.m-datatable__cell').each(function (tdi, td) {\r\n\t\t\t\t\t\t\tif (typeof columns[tdi] !== 'undefined') {\r\n\t\t\t\t\t\t\t\t$(td).data(columns[tdi]);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * Set column template callback\r\n\t\t\t * @param tablePart\r\n\t\t\t */\r\n\t\t\tsetupTemplateCell: function (tablePart) {\r\n\t\t\t\tif (typeof tablePart === 'undefined') tablePart = datatable.tableBody;\r\n\t\t\t\tvar columns = options.columns;\r\n\t\t\t\t$(tablePart).find('.m-datatable__row').each(function (tri, tr) {\r\n\t\t\t\t\t// row data object, if any\r\n\t\t\t\t\tvar obj = $(tr).data('obj') || {};\r\n\r\n\t\t\t\t\t// @deprecated in v5.0.6\r\n\t\t\t\t\t// obj['getIndex'] = function() {\r\n\t\t\t\t\t// \treturn tri;\r\n\t\t\t\t\t// };\r\n\t\t\t\t\t// @deprecated in v5.0.6\r\n\t\t\t\t\t// obj['getDatatable'] = function() {\r\n\t\t\t\t\t// \treturn datatable;\r\n\t\t\t\t\t// };\r\n\r\n\t\t\t\t\t// @deprecated in v5.0.6\r\n\t\t\t\t\tvar rowCallback = Plugin.getOption('rows.callback');\r\n\t\t\t\t\tif (typeof rowCallback === 'function') {\r\n\t\t\t\t\t\trowCallback($(tr), obj, tri);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// before template row callback\r\n\t\t\t\t\tvar beforeTemplate = Plugin.getOption('rows.beforeTemplate');\r\n\t\t\t\t\tif (typeof beforeTemplate === 'function') {\r\n\t\t\t\t\t\tbeforeTemplate($(tr), obj, tri);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// if data object is undefined, collect from table\r\n\t\t\t\t\tif (typeof obj === 'undefined') {\r\n\t\t\t\t\t\tobj = {};\r\n\t\t\t\t\t\t$(tr).find('.m-datatable__cell').each(function (tdi, td) {\r\n\t\t\t\t\t\t\t// get column settings by field\r\n\t\t\t\t\t\t\tvar column = $.grep(columns, function (n, i) {\r\n\t\t\t\t\t\t\t\treturn $(td).data('field') === n.field;\r\n\t\t\t\t\t\t\t})[0];\r\n\t\t\t\t\t\t\tif (typeof column !== 'undefined') {\r\n\t\t\t\t\t\t\t\tobj[column['field']] = $(td).text();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t$(tr).find('.m-datatable__cell').each(function (tdi, td) {\r\n\t\t\t\t\t\t// get column settings by field\r\n\t\t\t\t\t\tvar column = $.grep(columns, function (n, i) {\r\n\t\t\t\t\t\t\treturn $(td).data('field') === n.field;\r\n\t\t\t\t\t\t})[0];\r\n\t\t\t\t\t\tif (typeof column !== 'undefined') {\r\n\t\t\t\t\t\t\t// column template\r\n\t\t\t\t\t\t\tif (typeof column.template !== 'undefined') {\r\n\t\t\t\t\t\t\t\tvar finalValue = '';\r\n\t\t\t\t\t\t\t\t// template string\r\n\t\t\t\t\t\t\t\tif (typeof column.template === 'string') {\r\n\t\t\t\t\t\t\t\t\tfinalValue = Plugin.dataPlaceholder(column.template, obj);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t// template callback function\r\n\t\t\t\t\t\t\t\tif (typeof column.template === 'function') {\r\n\t\t\t\t\t\t\t\t\tfinalValue = column.template(obj, tri, datatable);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tvar span = document.createElement('span');\r\n\t\t\t\t\t\t\t\tspan.innerHTML = finalValue;\r\n\t\t\t\t\t\t\t\t// insert to cell, wrap with span\r\n\t\t\t\t\t\t\t\t$(td).html(span);\r\n\r\n\t\t\t\t\t\t\t\t// set span overflow\r\n\t\t\t\t\t\t\t\tif (typeof column.overflow !== 'undefined') {\r\n\t\t\t\t\t\t\t\t\t$(span).css('overflow', column.overflow);\r\n\t\t\t\t\t\t\t\t\t$(span).css('position', 'relative');\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\t// after template row callback\r\n\t\t\t\t\tvar afterTemplate = Plugin.getOption('rows.afterTemplate');\r\n\t\t\t\t\tif (typeof afterTemplate === 'function') {\r\n\t\t\t\t\t\tafterTemplate($(tr), obj, tri);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * Setup extra system column properties\r\n\t\t\t * Note: selector checkbox, subtable toggle\r\n\t\t\t */\r\n\t\t\tsetupSystemColumn: function () {\r\n\t\t\t\tdatatable.dataSet = datatable.dataSet || [];\r\n\t\t\t\t// no records available\r\n\t\t\t\tif (datatable.dataSet.length === 0) return;\r\n\r\n\t\t\t\tvar columns = options.columns;\r\n\t\t\t\t$(datatable.tableBody).find('.m-datatable__row').each(function (tri, tr) {\r\n\t\t\t\t\t$(tr).find('.m-datatable__cell').each(function (tdi, td) {\r\n\t\t\t\t\t\t// get column settings by field\r\n\t\t\t\t\t\tvar column = $.grep(columns, function (n, i) {\r\n\t\t\t\t\t\t\treturn $(td).data('field') === n.field;\r\n\t\t\t\t\t\t})[0];\r\n\t\t\t\t\t\tif (typeof column !== 'undefined') {\r\n\t\t\t\t\t\t\tvar value = $(td).text();\r\n\r\n\t\t\t\t\t\t\t// enable column selector\r\n\t\t\t\t\t\t\tif (typeof column.selector !== 'undefined' &&\r\n\t\t\t\t\t\t\t\tcolumn.selector !== false) {\r\n\t\t\t\t\t\t\t\t// check if checkbox exist\r\n\t\t\t\t\t\t\t\tif ($(td).find('.m-checkbox [type=\"checkbox\"]').length > 0) return;\r\n\t\t\t\t\t\t\t\t$(td).addClass('m-datatable__cell--check');\r\n\t\t\t\t\t\t\t\t// append checkbox\r\n\t\t\t\t\t\t\t\tvar chk = $('<label/>').addClass('m-checkbox m-checkbox--single').append($('<input/>').attr('type', 'checkbox').attr('value', value).on('click', function () {\r\n\t\t\t\t\t\t\t\t\tif ($(this).is(':checked')) {\r\n\t\t\t\t\t\t\t\t\t\t// add checkbox active row class\r\n\t\t\t\t\t\t\t\t\t\tPlugin.setActive(this);\r\n\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t// add checkbox active row class\r\n\t\t\t\t\t\t\t\t\t\tPlugin.setInactive(this);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t})).append($('<span/>'));\r\n\r\n\t\t\t\t\t\t\t\t// checkbox selector has outline style\r\n\t\t\t\t\t\t\t\tif (typeof column.selector.class !== 'undefined') {\r\n\t\t\t\t\t\t\t\t\t$(chk).addClass(column.selector.class);\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t$(td).children().html(chk);\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t// enable column subtable toggle\r\n\t\t\t\t\t\t\tif (typeof column.subtable !== 'undefined' && column.subtable) {\r\n\t\t\t\t\t\t\t\t// check if subtable toggle exist\r\n\t\t\t\t\t\t\t\tif ($(td).find('.m-datatable__toggle-subtable').length > 0) return;\r\n\t\t\t\t\t\t\t\t// append subtable toggle\r\n\t\t\t\t\t\t\t\t$(td).children().html($('<a/>').addClass('m-datatable__toggle-subtable').attr('href', '#').attr('data-value', value).append($('<i/>').addClass(Plugin.getOption('layout.icons.rowDetail.collapse'))));\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\r\n\t\t\t\t// init checkbox for header/footer\r\n\t\t\t\tvar initCheckbox = function (tr) {\r\n\t\t\t\t\t// get column settings by field\r\n\t\t\t\t\tvar column = $.grep(columns, function (n, i) {\r\n\t\t\t\t\t\treturn typeof n.selector !== 'undefined' && n.selector !== false;\r\n\t\t\t\t\t})[0];\r\n\r\n\t\t\t\t\tif (typeof column !== 'undefined') {\r\n\t\t\t\t\t\t// enable column selector\r\n\t\t\t\t\t\tif (typeof column.selector !== 'undefined' && column.selector !== false) {\r\n\t\t\t\t\t\t\tvar td = $(tr).find('[data-field=\"' + column.field + '\"]');\r\n\t\t\t\t\t\t\t// check if checkbox exist\r\n\t\t\t\t\t\t\tif ($(td).find('.m-checkbox [type=\"checkbox\"]').length > 0) return;\r\n\t\t\t\t\t\t\t$(td).addClass('m-datatable__cell--check');\r\n\r\n\t\t\t\t\t\t\t// todo; check all, for server pagination\r\n\t\t\t\t\t\t\t// append checkbox\r\n\t\t\t\t\t\t\tvar chk = $('<label/>').addClass('m-checkbox m-checkbox--single m-checkbox--all').append($('<input/>').attr('type', 'checkbox').on('click', function () {\r\n\t\t\t\t\t\t\t\tif ($(this).is(':checked')) {\r\n\t\t\t\t\t\t\t\t\tPlugin.setActiveAll(true);\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tPlugin.setActiveAll(false);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t})).append($('<span/>'));\r\n\r\n\t\t\t\t\t\t\t// checkbox selector has outline style\r\n\t\t\t\t\t\t\tif (typeof column.selector.class !== 'undefined') {\r\n\t\t\t\t\t\t\t\t$(chk).addClass(column.selector.class);\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t$(td).children().html(chk);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\r\n\t\t\t\tif (options.layout.header) {\r\n\t\t\t\t\tinitCheckbox($(datatable.tableHead).find('.m-datatable__row').first());\r\n\t\t\t\t}\r\n\t\t\t\tif (options.layout.footer) {\r\n\t\t\t\t\tinitCheckbox($(datatable.tableFoot).find('.m-datatable__row').first());\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * Adjust width to match container size\r\n\t\t\t */\r\n\t\t\tadjustCellsWidth: function () {\r\n\t\t\t\t// get table width\r\n\t\t\t\tvar containerWidth = $(datatable.tableHead).width();\r\n\r\n\t\t\t\t// offset reserved for sort icon\r\n\t\t\t\tvar sortOffset = 20;\r\n\r\n\t\t\t\t// get total number of columns\r\n\t\t\t\tvar columns = $(datatable.tableHead).find('.m-datatable__row:first-child').find('.m-datatable__cell:visible').length;\r\n\t\t\t\tif (columns > 0) {\r\n\t\t\t\t\t//  remove reserved sort icon width\r\n\t\t\t\t\tcontainerWidth = containerWidth - (sortOffset * columns);\r\n\t\t\t\t\tvar minWidth = Math.floor(containerWidth / columns);\r\n\r\n\t\t\t\t\t// minimum width\r\n\t\t\t\t\tif (minWidth <= Plugin.offset) {\r\n\t\t\t\t\t\tminWidth = Plugin.offset;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t$(datatable.table).find('.m-datatable__row').find('.m-datatable__cell:visible').each(function (tdi, td) {\r\n\t\t\t\t\t\tvar width = minWidth;\r\n\t\t\t\t\t\tvar dataWidth = $(td).data('width');\r\n\t\t\t\t\t\tif (typeof dataWidth !== 'undefined') {\r\n\t\t\t\t\t\t\twidth = dataWidth;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t$(td).children().css('width', parseInt(width));\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn datatable;\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * Adjust height to match container size\r\n\t\t\t */\r\n\t\t\tadjustCellsHeight: function () {\r\n\t\t\t\t$.each($(datatable.table).children(), function (part, tablePart) {\r\n\t\t\t\t\tvar totalRows = $(tablePart).find('.m-datatable__row').first().parent().find('.m-datatable__row').length;\r\n\t\t\t\t\tfor (var i = 1; i <= totalRows; i++) {\r\n\t\t\t\t\t\tvar rows = $(tablePart).find('.m-datatable__row:nth-child(' + i + ')');\r\n\t\t\t\t\t\tif ($(rows).length > 0) {\r\n\t\t\t\t\t\t\tvar maxHeight = Math.max.apply(null, $(rows).map(function () {\r\n\t\t\t\t\t\t\t\treturn $(this).height();\r\n\t\t\t\t\t\t\t}).get());\r\n\t\t\t\t\t\t\t$(rows).css('height', Math.ceil(parseInt(maxHeight)));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * Setup table DOM and classes\r\n\t\t\t */\r\n\t\t\tsetupDOM: function (table) {\r\n\t\t\t\t// set table classes\r\n\t\t\t\t$(table).find('> thead').addClass('m-datatable__head');\r\n\t\t\t\t$(table).find('> tbody').addClass('m-datatable__body');\r\n\t\t\t\t$(table).find('> tfoot').addClass('m-datatable__foot');\r\n\t\t\t\t$(table).find('tr').addClass('m-datatable__row');\r\n\t\t\t\t$(table).find('tr > th, tr > td').addClass('m-datatable__cell');\r\n\t\t\t\t$(table).find('tr > th, tr > td').each(function (i, td) {\r\n\t\t\t\t\tif ($(td).find('span').length === 0) {\r\n\t\t\t\t\t\t$(td).wrapInner($('<span/>').css('width', Plugin.offset));\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * Default scrollbar\r\n\t\t\t * @returns {{tableLocked: null, init: init, onScrolling: onScrolling}}\r\n\t\t\t */\r\n\t\t\tscrollbar: function () {\r\n\t\t\t\tvar scroll = {\r\n\t\t\t\t\tscrollable: null,\r\n\t\t\t\t\ttableLocked: null,\r\n\t\t\t\t\tmcsOptions: {\r\n\t\t\t\t\t\tscrollInertia: 0,\r\n\t\t\t\t\t\tautoDraggerLength: true,\r\n\t\t\t\t\t\tautoHideScrollbar: true,\r\n\t\t\t\t\t\tautoExpandScrollbar: false,\r\n\t\t\t\t\t\talwaysShowScrollbar: 0,\r\n\t\t\t\t\t\tmouseWheel: {\r\n\t\t\t\t\t\t\tscrollAmount: 120,\r\n\t\t\t\t\t\t\tpreventDefault: false,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tadvanced: {\r\n\t\t\t\t\t\t\tupdateOnContentResize: true,\r\n\t\t\t\t\t\t\tautoExpandHorizontalScroll: true,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\ttheme: 'minimal-dark',\r\n\t\t\t\t\t},\r\n\t\t\t\t\tinit: function () {\r\n\t\t\t\t\t\tif (mUtil.isRTL()) {\r\n\t\t\t\t\t\t\t$.fn.extend({\r\n\t\t\t\t\t\t\t\tscrollRight: function (val) {\r\n\t\t\t\t\t\t\t\t\tif (val === undefined) {\r\n\t\t\t\t\t\t\t\t\t\treturn this[0].scrollWidth - (this[0].scrollLeft + this[0].clientWidth) + 1;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\treturn this.scrollLeft(this[0].scrollWidth - this[0].clientWidth - val);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tvar screen = mUtil.getViewPort().width;\r\n\t\t\t\t\t\t// setup scrollable datatable\r\n\t\t\t\t\t\tif (options.layout.scroll) {\r\n\t\t\t\t\t\t\t// add scrollable datatable class\r\n\t\t\t\t\t\t\t$(datatable.wrap).addClass('m-datatable--scroll');\r\n\r\n\t\t\t\t\t\t\tvar scrollable = $(datatable.tableBody).find('.m-datatable__lock--scroll');\r\n\r\n\t\t\t\t\t\t\t// check if scrollable area have rows\r\n\t\t\t\t\t\t\tif ($(scrollable).find('.m-datatable__row').length > 0 && $(scrollable).length > 0) {\r\n\t\t\t\t\t\t\t\tscroll.scrollHead = $(datatable.tableHead).find('> .m-datatable__lock--scroll > .m-datatable__row');\r\n\t\t\t\t\t\t\t\tscroll.scrollFoot = $(datatable.tableFoot).find('> .m-datatable__lock--scroll > .m-datatable__row');\r\n\t\t\t\t\t\t\t\tscroll.tableLocked = $(datatable.tableBody).find('.m-datatable__lock:not(.m-datatable__lock--scroll)');\r\n\t\t\t\t\t\t\t\tif (Plugin.getOption('layout.customScrollbar') && mUtil.detectIE() != 10 && screen > mUtil.getBreakpoint('lg')) {\r\n\t\t\t\t\t\t\t\t\tscroll.initCustomScrollbar(scrollable[0]);\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tscroll.initDefaultScrollbar(scrollable);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} else if ($(datatable.tableBody).find('.m-datatable__row').length > 0) {\r\n\t\t\t\t\t\t\t\tscroll.scrollHead = $(datatable.tableHead).find('> .m-datatable__row');\r\n\t\t\t\t\t\t\t\tscroll.scrollFoot = $(datatable.tableFoot).find('> .m-datatable__row');\r\n\t\t\t\t\t\t\t\tif (Plugin.getOption('layout.customScrollbar') && mUtil.detectIE() != 10 && screen > mUtil.getBreakpoint('lg')) {\r\n\t\t\t\t\t\t\t\t\tscroll.initCustomScrollbar(datatable.tableBody);\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tscroll.initDefaultScrollbar(datatable.tableBody);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t$(datatable.table).// css('height', 'auto').\r\n\t\t\t\t\t\t\tcss('overflow-x', 'auto');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tinitDefaultScrollbar: function (scrollable) {\r\n\t\t\t\t\t\t$(scrollable).css('overflow', 'auto').off().on('scroll', scroll.onScrolling);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tonScrolling: function (e) {\r\n\t\t\t\t\t\tvar top = $(this).scrollTop();\r\n\t\t\t\t\t\tif (mUtil.isRTL()) {\r\n\t\t\t\t\t\t\tvar right = $(this).scrollRight();\r\n\t\t\t\t\t\t\t$(scroll.scrollHead).css('right', -right);\r\n\t\t\t\t\t\t\t$(scroll.scrollFoot).css('right', -right);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tvar left = $(this).scrollLeft();\r\n\t\t\t\t\t\t\t$(scroll.scrollHead).css('left', -left);\r\n\t\t\t\t\t\t\t$(scroll.scrollFoot).css('left', -left);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t$(scroll.tableLocked).each(function (i, table) {\r\n\t\t\t\t\t\t\t$(table).css('top', -top);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t},\r\n\t\t\t\t\tinitCustomScrollbar: function (scrollable) {\r\n\t\t\t\t\t\tscroll.scrollable = scrollable;\r\n\t\t\t\t\t\t// create a new instance for table body with scrollbar\r\n\t\t\t\t\t\tPlugin.initScrollbar(scrollable);\r\n\t\t\t\t\t\t$(scrollable).off().on('scroll', scroll.onScrolling);\r\n\t\t\t\t\t},\r\n\t\t\t\t};\r\n\t\t\t\tscroll.init();\r\n\t\t\t\treturn scroll;\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * Init custom scrollbar and reset position\r\n\t\t\t * @param element\r\n\t\t\t * @param options\r\n\t\t\t */\r\n\t\t\tinitScrollbar: function (element, options) {\r\n\t\t\t\t$(datatable.tableBody).css('overflow', '');\r\n\t\t\t\tif (mUtil.hasClass(element, 'ps')) {\r\n\t\t\t\t\t$(element).data('ps').update();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tvar ps = new PerfectScrollbar(element);\r\n\t\t\t\t\t$(element).data('ps', ps);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * Set column title from options.columns settings\r\n\t\t\t */\r\n\t\t\tsetHeadTitle: function (tablePart) {\r\n\t\t\t\tif (typeof tablePart === 'undefined') tablePart = datatable.tableHead;\r\n\t\t\t\ttablePart = $(tablePart)[0];\r\n\t\t\t\tvar columns = options.columns;\r\n\t\t\t\tvar row = tablePart.getElementsByTagName('tr')[0];\r\n\t\t\t\tvar ths = tablePart.getElementsByTagName('td');\r\n\r\n\t\t\t\tif (typeof row === 'undefined') {\r\n\t\t\t\t\trow = document.createElement('tr');\r\n\t\t\t\t\ttablePart.appendChild(row);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t$.each(columns, function (i, column) {\r\n\t\t\t\t\tvar th = ths[i];\r\n\t\t\t\t\tif (typeof th === 'undefined') {\r\n\t\t\t\t\t\tth = document.createElement('th');\r\n\t\t\t\t\t\trow.appendChild(th);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// set column title\r\n\t\t\t\t\tif (typeof column['title'] !== 'undefined') {\r\n\t\t\t\t\t\tth.innerHTML = column.title;\r\n\t\t\t\t\t\tth.setAttribute('data-field', column.field);\r\n\t\t\t\t\t\tmUtil.addClass(th, column.class);\r\n\t\t\t\t\t\t$(th).data(column);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// set header attr option\r\n\t\t\t\t\tif (typeof column.attr !== 'undefined') {\r\n\t\t\t\t\t\t$.each(column.attr, function (key, val) {\r\n\t\t\t\t\t\t\tth.setAttribute(key, val);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// apply text align to thead/tfoot\r\n\t\t\t\t\tif (typeof column.textAlign !== 'undefined') {\r\n\t\t\t\t\t\tvar align = typeof datatable.textAlign[column.textAlign] !== 'undefined' ? datatable.textAlign[column.textAlign] : '';\r\n\t\t\t\t\t\tmUtil.addClass(th, align);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tPlugin.setupDOM(tablePart);\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * Initiate to get remote or local data via ajax\r\n\t\t\t */\r\n\t\t\tdataRender: function (action) {\r\n\t\t\t\t$(datatable.table).siblings('.m-datatable__pager').removeClass('m-datatable--paging-loaded');\r\n\r\n\t\t\t\tvar buildMeta = function () {\r\n\t\t\t\t\tdatatable.dataSet = datatable.dataSet || [];\r\n\t\t\t\t\tPlugin.localDataUpdate();\r\n\t\t\t\t\t// local pagination meta\r\n\t\t\t\t\tvar meta = Plugin.getDataSourceParam('pagination');\r\n\t\t\t\t\tif (meta.perpage === 0) {\r\n\t\t\t\t\t\tmeta.perpage = options.data.pageSize || 10;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tmeta.total = datatable.dataSet.length;\r\n\t\t\t\t\tvar start = Math.max(meta.perpage * (meta.page - 1), 0);\r\n\t\t\t\t\tvar end = Math.min(start + meta.perpage, meta.total);\r\n\t\t\t\t\tdatatable.dataSet = $(datatable.dataSet).slice(start, end);\r\n\t\t\t\t\treturn meta;\r\n\t\t\t\t};\r\n\r\n\t\t\t\tvar afterGetData = function (result) {\r\n\t\t\t\t\tvar localPagingCallback = function (ctx, meta) {\r\n\t\t\t\t\t\tif (!$(ctx.pager).hasClass('m-datatable--paging-loaded')) {\r\n\t\t\t\t\t\t\t$(ctx.pager).remove();\r\n\t\t\t\t\t\t\tctx.init(meta);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t$(ctx.pager).off().on('m-datatable--on-goto-page', function (e) {\r\n\t\t\t\t\t\t\t$(ctx.pager).remove();\r\n\t\t\t\t\t\t\tctx.init(meta);\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\tvar start = Math.max(meta.perpage * (meta.page - 1), 0);\r\n\t\t\t\t\t\tvar end = Math.min(start + meta.perpage, meta.total);\r\n\r\n\t\t\t\t\t\tPlugin.localDataUpdate();\r\n\t\t\t\t\t\tdatatable.dataSet = $(datatable.dataSet).slice(start, end);\r\n\r\n\t\t\t\t\t\t// insert data into table content\r\n\t\t\t\t\t\tPlugin.insertData();\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\t$(datatable.wrap).removeClass('m-datatable--error');\r\n\t\t\t\t\t// pagination enabled\r\n\t\t\t\t\tif (options.pagination) {\r\n\t\t\t\t\t\tif (options.data.serverPaging && options.data.type !== 'local') {\r\n\t\t\t\t\t\t\t// server pagination\r\n\t\t\t\t\t\t\tvar serverMeta = Plugin.getObject('meta', result || null);\r\n\t\t\t\t\t\t\tif (serverMeta !== null) {\r\n\t\t\t\t\t\t\t\tPlugin.paging(serverMeta);\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t// no meta object from server response, fallback to local pagination\r\n\t\t\t\t\t\t\t\tPlugin.paging(buildMeta(), localPagingCallback);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t// local pagination can be used by remote data also\r\n\t\t\t\t\t\t\tPlugin.paging(buildMeta(), localPagingCallback);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t// pagination is disabled\r\n\t\t\t\t\t\tPlugin.localDataUpdate();\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// insert data into table content\r\n\t\t\t\t\tPlugin.insertData();\r\n\t\t\t\t};\r\n\r\n\t\t\t\t// get local datasource\r\n\t\t\t\tif (options.data.type === 'local'\r\n\t\t\t\t\t// for remote json datasource\r\n\t\t\t\t\t// || typeof options.data.source.read === 'undefined' && datatable.dataSet !== null\r\n\t\t\t\t\t// for remote datasource, server sorting is disabled and data already received from remote\r\n\t\t\t\t\t|| options.data.serverSorting === false && action === 'sort'\r\n\t\t\t\t\t|| options.data.serverFiltering === false && action === 'search'\r\n\t\t\t\t) {\r\n\t\t\t\t\tafterGetData();\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// getting data from remote only\r\n\t\t\t\tPlugin.getData().done(afterGetData);\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * Process ajax data\r\n\t\t\t */\r\n\t\t\tinsertData: function () {\r\n\t\t\t\tdatatable.dataSet = datatable.dataSet || [];\r\n\t\t\t\tvar params = Plugin.getDataSourceParam();\r\n\r\n\t\t\t\t// get row attributes\r\n\t\t\t\tvar pagination = params.pagination;\r\n\t\t\t\tvar start = (Math.max(pagination.page, 1) - 1) * pagination.perpage;\r\n\t\t\t\tvar end = Math.min(pagination.page, pagination.pages) * pagination.perpage;\r\n\t\t\t\tvar rowProps = {};\r\n\t\t\t\tif (typeof options.data.attr.rowProps !== 'undefined' && options.data.attr.rowProps.length) {\r\n\t\t\t\t\trowProps = options.data.attr.rowProps.slice(start, end);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// todo; fix performance\r\n\t\t\t\tvar tableBody = document.createElement('tbody');\r\n\t\t\t\ttableBody.style.visibility = 'hidden';\r\n\t\t\t\tvar colLength = options.columns.length;\r\n\r\n\t\t\t\t$.each(datatable.dataSet, function (rowIndex, row) {\r\n\t\t\t\t\tvar tr = document.createElement('tr');\r\n\t\t\t\t\ttr.setAttribute('data-row', rowIndex);\r\n\t\t\t\t\t// keep data object to row\r\n\t\t\t\t\t$(tr).data('obj', row);\r\n\r\n\t\t\t\t\tif (typeof rowProps[rowIndex] !== 'undefined') {\r\n\t\t\t\t\t\t$.each(rowProps[rowIndex], function () {\r\n\t\t\t\t\t\t\ttr.setAttribute(this.name, this.value);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar cellIndex = 0;\r\n\t\t\t\t\tvar tds = [];\r\n\t\t\t\t\tfor (var a = 0; a < colLength; a += 1) {\r\n\t\t\t\t\t\tvar column = options.columns[a];\r\n\t\t\t\t\t\tvar classes = [];\r\n\t\t\t\t\t\t// add sorted class to cells\r\n\t\t\t\t\t\tif (Plugin.getObject('sort.field', params) === column.field) {\r\n\t\t\t\t\t\t\tclasses.push('m-datatable__cell--sorted');\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// apply text align\r\n\t\t\t\t\t\tif (typeof column.textAlign !== 'undefined') {\r\n\t\t\t\t\t\t\tvar align = typeof datatable.textAlign[column.textAlign] !==\r\n\t\t\t\t\t\t\t'undefined' ? datatable.textAlign[column.textAlign] : '';\r\n\t\t\t\t\t\t\tclasses.push(align);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// var classAttr = '';\r\n\t\t\t\t\t\tif (typeof column.class !== 'undefined') {\r\n\t\t\t\t\t\t\tclasses.push(column.class);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tvar td = document.createElement('td');\r\n\t\t\t\t\t\tmUtil.addClass(td, classes.join(' '));\r\n\t\t\t\t\t\ttd.setAttribute('data-field', column.field);\r\n\t\t\t\t\t\ttd.innerHTML = Plugin.getObject(column.field, row);\r\n\t\t\t\t\t\ttr.appendChild(td);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\ttableBody.appendChild(tr);\r\n\t\t\t\t});\r\n\r\n\t\t\t\t// display no records message\r\n\t\t\t\tif (datatable.dataSet.length === 0) {\r\n\t\t\t\t\tvar errorSpan = document.createElement('span');\r\n\t\t\t\t\tmUtil.addClass(errorSpan, 'm-datatable--error');\r\n\t\t\t\t\terrorSpan.innerHTML = Plugin.getOption('translate.records.noRecords');\r\n\t\t\t\t\ttableBody.appendChild(errorSpan);\r\n\t\t\t\t\t$(datatable.wrap).addClass('m-datatable--error m-datatable--loaded');\r\n\t\t\t\t\tPlugin.spinnerCallback(false);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// replace existing table body\r\n\t\t\t\t$(datatable.tableBody).replaceWith(tableBody);\r\n\t\t\t\tdatatable.tableBody = tableBody;\r\n\r\n\t\t\t\t// layout update\r\n\t\t\t\tPlugin.setupDOM(datatable.table);\r\n\t\t\t\tPlugin.setupCellField([datatable.tableBody]);\r\n\t\t\t\tPlugin.setupTemplateCell(datatable.tableBody);\r\n\t\t\t\tPlugin.layoutUpdate();\r\n\t\t\t},\r\n\r\n\t\t\tupdateTableComponents: function () {\r\n\t\t\t\tdatatable.tableHead = $(datatable.table).children('thead');\r\n\t\t\t\tdatatable.tableBody = $(datatable.table).children('tbody');\r\n\t\t\t\tdatatable.tableFoot = $(datatable.table).children('tfoot');\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * Call ajax for raw JSON data\r\n\t\t\t */\r\n\t\t\tgetData: function () {\r\n\t\t\t\tPlugin.spinnerCallback(true);\r\n\r\n\t\t\t\tvar ajaxParams = {\r\n\t\t\t\t\tdataType: 'json',\r\n\t\t\t\t\tmethod: 'GET',\r\n\t\t\t\t\tdata: {},\r\n\t\t\t\t\ttimeout: Plugin.getOption('data.source.read.timeout') || 30000,\r\n\t\t\t\t};\r\n\r\n\t\t\t\tif (options.data.type === 'local') {\r\n\t\t\t\t\tajaxParams.url = options.data.source;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (options.data.type === 'remote') {\r\n\t\t\t\t\tajaxParams.url = Plugin.getOption('data.source.read.url');\r\n\t\t\t\t\tif (typeof ajaxParams.url !== 'string') ajaxParams.url = Plugin.getOption('data.source.read');\r\n\t\t\t\t\tif (typeof ajaxParams.url !== 'string') ajaxParams.url = Plugin.getOption('data.source');\r\n\t\t\t\t\tajaxParams.headers = Plugin.getOption('data.source.read.headers');\r\n\t\t\t\t\tajaxParams.method = Plugin.getOption('data.source.read.method') || 'POST';\r\n\r\n\t\t\t\t\tvar data = Plugin.getDataSourceParam();\r\n\t\t\t\t\t// remove if server params is not enabled\r\n\t\t\t\t\tif (!Plugin.getOption('data.serverPaging')) {\r\n\t\t\t\t\t\tdelete data['pagination'];\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (!Plugin.getOption('data.serverSorting')) {\r\n\t\t\t\t\t\tdelete data['sort'];\r\n\t\t\t\t\t}\r\n\t\t\t\t\tajaxParams.data = $.extend(true, ajaxParams.data, data, Plugin.getOption('data.source.read.params'));\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn $.ajax(ajaxParams).done(function (response, textStatus, jqXHR) {\r\n\t\t\t\t\tdatatable.lastResponse = response;\r\n\t\t\t\t\t// extendible data map callback for custom datasource\r\n\t\t\t\t\tdatatable.dataSet = datatable.originalDataSet = Plugin.dataMapCallback(response);\r\n\t\t\t\t\tPlugin.setAutoColumns();\r\n\t\t\t\t\t$(datatable).trigger('m-datatable--on-ajax-done', [datatable.dataSet]);\r\n\t\t\t\t}).fail(function (jqXHR, textStatus, errorThrown) {\r\n\t\t\t\t\t$(datatable).trigger('m-datatable--on-ajax-fail', [jqXHR]);\r\n\t\t\t\t\t$(datatable.tableBody).html($('<span/>').addClass('m-datatable--error').html(Plugin.getOption('translate.records.noRecords')));\r\n\t\t\t\t\t$(datatable.wrap).addClass('m-datatable--error m-datatable--loaded');\r\n\t\t\t\t\tPlugin.spinnerCallback(false);\r\n\t\t\t\t}).always(function () {\r\n\t\t\t\t});\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * Pagination object\r\n\t\t\t * @param meta if null, local pagination, otherwise remote pagination\r\n\t\t\t * @param callback for update data when navigating page\r\n\t\t\t */\r\n\t\t\tpaging: function (meta, callback) {\r\n\t\t\t\tvar pg = {\r\n\t\t\t\t\tmeta: null,\r\n\t\t\t\t\tpager: null,\r\n\t\t\t\t\tpaginateEvent: null,\r\n\t\t\t\t\tpagerLayout: {pagination: null, info: null},\r\n\t\t\t\t\tcallback: null,\r\n\t\t\t\t\tinit: function (meta) {\r\n\t\t\t\t\t\tpg.meta = meta;\r\n\r\n\t\t\t\t\t\t// parse pagination meta to integer\r\n\t\t\t\t\t\tpg.meta.page = parseInt(pg.meta.page);\r\n\t\t\t\t\t\tpg.meta.pages = parseInt(pg.meta.pages);\r\n\t\t\t\t\t\tpg.meta.perpage = parseInt(pg.meta.perpage);\r\n\t\t\t\t\t\tpg.meta.total = parseInt(pg.meta.total);\r\n\r\n\t\t\t\t\t\t// todo; if meta object not exist will cause error\r\n\t\t\t\t\t\t// always recount total pages\r\n\t\t\t\t\t\tpg.meta.pages = Math.max(Math.ceil(pg.meta.total / pg.meta.perpage), 1);\r\n\r\n\t\t\t\t\t\t// current page must be not over than total pages\r\n\t\t\t\t\t\tif (pg.meta.page > pg.meta.pages) pg.meta.page = pg.meta.pages;\r\n\r\n\t\t\t\t\t\t// set unique event name between tables\r\n\t\t\t\t\t\tpg.paginateEvent = Plugin.getTablePrefix();\r\n\r\n\t\t\t\t\t\tpg.pager = $(datatable.table).siblings('.m-datatable__pager');\r\n\t\t\t\t\t\tif ($(pg.pager).hasClass('m-datatable--paging-loaded')) return;\r\n\r\n\t\t\t\t\t\t// if class .m-datatable--paging-loaded not exist, recreate pagination\r\n\t\t\t\t\t\t$(pg.pager).remove();\r\n\r\n\t\t\t\t\t\t// if no pages available\r\n\t\t\t\t\t\tif (pg.meta.pages === 0) return;\r\n\r\n\t\t\t\t\t\t// update datasource params\r\n\t\t\t\t\t\tPlugin.setDataSourceParam('pagination', {\r\n\t\t\t\t\t\t\tpage: pg.meta.page,\r\n\t\t\t\t\t\t\tpages: pg.meta.pages,\r\n\t\t\t\t\t\t\tperpage: pg.meta.perpage,\r\n\t\t\t\t\t\t\ttotal: pg.meta.total,\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t// default callback function, contains remote pagination handler\r\n\t\t\t\t\t\tpg.callback = pg.serverCallback;\r\n\t\t\t\t\t\t// custom callback function\r\n\t\t\t\t\t\tif (typeof callback === 'function') pg.callback = callback;\r\n\r\n\t\t\t\t\t\tpg.addPaginateEvent();\r\n\t\t\t\t\t\tpg.populate();\r\n\r\n\t\t\t\t\t\tpg.meta.page = Math.max(pg.meta.page || 1, pg.meta.page);\r\n\r\n\t\t\t\t\t\t$(datatable).trigger(pg.paginateEvent, pg.meta);\r\n\r\n\t\t\t\t\t\tpg.pagingBreakpoint.call();\r\n\t\t\t\t\t\t$(window).resize(pg.pagingBreakpoint);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tserverCallback: function (ctx, meta) {\r\n\t\t\t\t\t\tPlugin.dataRender();\r\n\t\t\t\t\t},\r\n\t\t\t\t\tpopulate: function () {\r\n\t\t\t\t\t\tvar icons = Plugin.getOption('layout.icons.pagination');\r\n\t\t\t\t\t\tvar title = Plugin.getOption('translate.toolbar.pagination.items.default');\r\n\t\t\t\t\t\t// pager root element\r\n\t\t\t\t\t\tpg.pager = $('<div/>').addClass('m-datatable__pager m-datatable--paging-loaded clearfix');\r\n\t\t\t\t\t\t// numbering links\r\n\t\t\t\t\t\tvar pagerNumber = $('<ul/>').addClass('m-datatable__pager-nav');\r\n\t\t\t\t\t\tpg.pagerLayout['pagination'] = pagerNumber;\r\n\r\n\t\t\t\t\t\t// pager first/previous button\r\n\t\t\t\t\t\t$('<li/>').append($('<a/>').attr('title', title.first).addClass('m-datatable__pager-link m-datatable__pager-link--first').append($('<i/>').addClass(icons.first)).on('click', pg.gotoMorePage).attr('data-page', 1)).appendTo(pagerNumber);\r\n\t\t\t\t\t\t$('<li/>').append($('<a/>').attr('title', title.prev).addClass('m-datatable__pager-link m-datatable__pager-link--prev').append($('<i/>').addClass(icons.prev)).on('click', pg.gotoMorePage)).appendTo(pagerNumber);\r\n\r\n\t\t\t\t\t\t// more previous pages\r\n\t\t\t\t\t\t$('<li/>').append($('<a/>').attr('title', title.more).addClass('m-datatable__pager-link m-datatable__pager-link--more-prev').html($('<i/>').addClass(icons.more)).on('click', pg.gotoMorePage)).appendTo(pagerNumber);\r\n\r\n\t\t\t\t\t\t$('<li/>').append($('<input/>').attr('type', 'text').addClass('m-pager-input form-control').attr('title', title.input).on('keyup', function () {\r\n\t\t\t\t\t\t\t// on keyup update [data-page]\r\n\t\t\t\t\t\t\t$(this).attr('data-page', Math.abs($(this).val()));\r\n\t\t\t\t\t\t}).on('keypress', function (e) {\r\n\t\t\t\t\t\t\t// on keypressed enter button\r\n\t\t\t\t\t\t\tif (e.which === 13) pg.gotoMorePage(e);\r\n\t\t\t\t\t\t})).appendTo(pagerNumber);\r\n\r\n\t\t\t\t\t\tvar pagesNumber = Plugin.getOption('toolbar.items.pagination.pages.desktop.pagesNumber');\r\n\t\t\t\t\t\tvar end = Math.ceil(pg.meta.page / pagesNumber) * pagesNumber;\r\n\t\t\t\t\t\tvar start = end - pagesNumber;\r\n\t\t\t\t\t\tif (end > pg.meta.pages) {\r\n\t\t\t\t\t\t\tend = pg.meta.pages;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tfor (var x = start; x < end; x++) {\r\n\t\t\t\t\t\t\tvar pageNumber = x + 1;\r\n\t\t\t\t\t\t\t$('<li/>').append($('<a/>').addClass('m-datatable__pager-link m-datatable__pager-link-number').text(pageNumber).attr('data-page', pageNumber).attr('title', pageNumber).on('click', pg.gotoPage)).appendTo(pagerNumber);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// more next pages\r\n\t\t\t\t\t\t$('<li/>').append($('<a/>').attr('title', title.more).addClass('m-datatable__pager-link m-datatable__pager-link--more-next').html($('<i/>').addClass(icons.more)).on('click', pg.gotoMorePage)).appendTo(pagerNumber);\r\n\r\n\t\t\t\t\t\t// pager next/last button\r\n\t\t\t\t\t\t$('<li/>').append($('<a/>').attr('title', title.next).addClass('m-datatable__pager-link m-datatable__pager-link--next').append($('<i/>').addClass(icons.next)).on('click', pg.gotoMorePage)).appendTo(pagerNumber);\r\n\t\t\t\t\t\t$('<li/>').append($('<a/>').attr('title', title.last).addClass('m-datatable__pager-link m-datatable__pager-link--last').append($('<i/>').addClass(icons.last)).on('click', pg.gotoMorePage).attr('data-page', pg.meta.pages)).appendTo(pagerNumber);\r\n\r\n\t\t\t\t\t\t// page info\r\n\t\t\t\t\t\tif (Plugin.getOption('toolbar.items.info')) {\r\n\t\t\t\t\t\t\tpg.pagerLayout['info'] = $('<div/>').addClass('m-datatable__pager-info').append($('<span/>').addClass('m-datatable__pager-detail'));\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t$.each(Plugin.getOption('toolbar.layout'), function (i, layout) {\r\n\t\t\t\t\t\t\t$(pg.pagerLayout[layout]).appendTo(pg.pager);\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t// page size select\r\n\t\t\t\t\t\tvar pageSizeSelect = $('<select/>').addClass('selectpicker m-datatable__pager-size').attr('title', Plugin.getOption('translate.toolbar.pagination.items.default.select')).attr('data-width', '70px').val(pg.meta.perpage).on('change', pg.updatePerpage).prependTo(pg.pagerLayout['info']);\r\n\r\n\t\t\t\t\t\tvar pageSizes = Plugin.getOption('toolbar.items.pagination.pageSizeSelect');\r\n\t\t\t\t\t\t// default value here, to fix override option by user\r\n\t\t\t\t\t\tif (pageSizes.length == 0) pageSizes = [10, 20, 30, 50, 100];\r\n\t\t\t\t\t\t$.each(pageSizes, function (i, size) {\r\n\t\t\t\t\t\t\tvar display = size;\r\n\t\t\t\t\t\t\tif (size === -1) display = 'All';\r\n\t\t\t\t\t\t\t$('<option/>').attr('value', size).html(display).appendTo(pageSizeSelect);\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t// init selectpicker to dropdown\r\n\t\t\t\t\t\t$(datatable).ready(function () {\r\n\t\t\t\t\t\t\t$('.selectpicker').selectpicker().siblings('.dropdown-toggle').attr('title', Plugin.getOption(\r\n\t\t\t\t\t\t\t\t'translate.toolbar.pagination.items.default.select'));\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\tpg.paste();\r\n\t\t\t\t\t},\r\n\t\t\t\t\tpaste: function () {\r\n\t\t\t\t\t\t// insert pagination based on placement position, top|bottom\r\n\t\t\t\t\t\t$.each($.unique(Plugin.getOption('toolbar.placement')),\r\n\t\t\t\t\t\t\tfunction (i, position) {\r\n\t\t\t\t\t\t\t\tif (position === 'bottom') {\r\n\t\t\t\t\t\t\t\t\t$(pg.pager).clone(true).insertAfter(datatable.table);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tif (position === 'top') {\r\n\t\t\t\t\t\t\t\t\t// pager top need some extra space\r\n\t\t\t\t\t\t\t\t\t$(pg.pager).clone(true).addClass('m-datatable__pager--top').insertBefore(datatable.table);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t},\r\n\t\t\t\t\tgotoMorePage: function (e) {\r\n\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t// $(this) is a link of .m-datatable__pager-link\r\n\r\n\t\t\t\t\t\tif ($(this).attr('disabled') === 'disabled') return false;\r\n\r\n\t\t\t\t\t\tvar page = $(this).attr('data-page');\r\n\r\n\t\t\t\t\t\t// event from text input\r\n\t\t\t\t\t\tif (typeof page === 'undefined') {\r\n\t\t\t\t\t\t\tpage = $(e.target).attr('data-page');\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tpg.openPage(parseInt(page));\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tgotoPage: function (e) {\r\n\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t// prevent from click same page number\r\n\t\t\t\t\t\tif ($(this).hasClass('m-datatable__pager-link--active')) return;\r\n\r\n\t\t\t\t\t\tpg.openPage(parseInt($(this).data('page')));\r\n\t\t\t\t\t},\r\n\t\t\t\t\topenPage: function (page) {\r\n\t\t\t\t\t\t// currentPage is 1-based index\r\n\t\t\t\t\t\tpg.meta.page = parseInt(page);\r\n\r\n\t\t\t\t\t\t$(datatable).trigger(pg.paginateEvent, pg.meta);\r\n\t\t\t\t\t\tpg.callback(pg, pg.meta);\r\n\r\n\t\t\t\t\t\t// update page callback function\r\n\t\t\t\t\t\t$(pg.pager).trigger('m-datatable--on-goto-page', pg.meta);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tupdatePerpage: function (e) {\r\n\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t// if (Plugin.getOption('layout.height') === null) {\r\n\t\t\t\t\t\t// fix white space, when perpage is set from many records to less records\r\n\t\t\t\t\t\t// $('html, body').animate({scrollTop: $(datatable).position().top});\r\n\t\t\t\t\t\t// }\r\n\r\n\t\t\t\t\t\tpg.pager = $(datatable.table).siblings('.m-datatable__pager').removeClass('m-datatable--paging-loaded');\r\n\r\n\t\t\t\t\t\t// on change select page size\r\n\t\t\t\t\t\tif (e.originalEvent) {\r\n\t\t\t\t\t\t\tpg.meta.perpage = parseInt($(this).val());\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t$(pg.pager).find('select.m-datatable__pager-size').val(pg.meta.perpage).attr('data-selected', pg.meta.perpage);\r\n\r\n\t\t\t\t\t\t// update datasource params\r\n\t\t\t\t\t\tPlugin.setDataSourceParam('pagination', {\r\n\t\t\t\t\t\t\tpage: pg.meta.page,\r\n\t\t\t\t\t\t\tpages: pg.meta.pages,\r\n\t\t\t\t\t\t\tperpage: pg.meta.perpage,\r\n\t\t\t\t\t\t\ttotal: pg.meta.total,\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t// update page callback function\r\n\t\t\t\t\t\t$(pg.pager).trigger('m-datatable--on-update-perpage', pg.meta);\r\n\t\t\t\t\t\t$(datatable).trigger(pg.paginateEvent, pg.meta);\r\n\t\t\t\t\t\tpg.callback(pg, pg.meta);\r\n\r\n\t\t\t\t\t\t// update pagination info\r\n\t\t\t\t\t\tpg.updateInfo.call();\r\n\t\t\t\t\t},\r\n\t\t\t\t\taddPaginateEvent: function (e) {\r\n\t\t\t\t\t\t// pagination event\r\n\t\t\t\t\t\t$(datatable).off(pg.paginateEvent).on(pg.paginateEvent, function (e, meta) {\r\n\t\t\t\t\t\t\tPlugin.spinnerCallback(true);\r\n\r\n\t\t\t\t\t\t\tpg.pager = $(datatable.table).siblings('.m-datatable__pager');\r\n\t\t\t\t\t\t\tvar pagerNumber = $(pg.pager).find('.m-datatable__pager-nav');\r\n\r\n\t\t\t\t\t\t\t// set sync active page class\r\n\t\t\t\t\t\t\t$(pagerNumber).find('.m-datatable__pager-link--active').removeClass('m-datatable__pager-link--active');\r\n\t\t\t\t\t\t\t$(pagerNumber).find('.m-datatable__pager-link-number[data-page=\"' + meta.page + '\"]').addClass('m-datatable__pager-link--active');\r\n\r\n\t\t\t\t\t\t\t// set next and previous link page number\r\n\t\t\t\t\t\t\t$(pagerNumber).find('.m-datatable__pager-link--prev').attr('data-page', Math.max(meta.page - 1, 1));\r\n\t\t\t\t\t\t\t$(pagerNumber).find('.m-datatable__pager-link--next').attr('data-page', Math.min(meta.page + 1, meta.pages));\r\n\r\n\t\t\t\t\t\t\t// current page input value sync\r\n\t\t\t\t\t\t\t$(pg.pager).each(function () {\r\n\t\t\t\t\t\t\t\t$(this).find('.m-pager-input[type=\"text\"]').prop('value', meta.page);\r\n\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t\t$(pg.pager).find('.m-datatable__pager-nav').show();\r\n\t\t\t\t\t\t\tif (meta.pages <= 1) {\r\n\t\t\t\t\t\t\t\t// hide pager if has 1 page\r\n\t\t\t\t\t\t\t\t$(pg.pager).find('.m-datatable__pager-nav').hide();\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t// update datasource params\r\n\t\t\t\t\t\t\tPlugin.setDataSourceParam('pagination', {\r\n\t\t\t\t\t\t\t\tpage: pg.meta.page,\r\n\t\t\t\t\t\t\t\tpages: pg.meta.pages,\r\n\t\t\t\t\t\t\t\tperpage: pg.meta.perpage,\r\n\t\t\t\t\t\t\t\ttotal: pg.meta.total,\r\n\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t\t$(pg.pager).find('select.m-datatable__pager-size').val(meta.perpage).attr('data-selected', meta.perpage);\r\n\r\n\t\t\t\t\t\t\t// clear active rows\r\n\t\t\t\t\t\t\t$(datatable.table).find('.m-checkbox > [type=\"checkbox\"]').prop('checked', false);\r\n\t\t\t\t\t\t\t$(datatable.table).find('.m-datatable__row--active').removeClass('m-datatable__row--active');\r\n\r\n\t\t\t\t\t\t\tpg.updateInfo.call();\r\n\t\t\t\t\t\t\tpg.pagingBreakpoint.call();\r\n\t\t\t\t\t\t\t// Plugin.resetScroll();\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t},\r\n\t\t\t\t\tupdateInfo: function () {\r\n\t\t\t\t\t\tvar start = Math.max(pg.meta.perpage * (pg.meta.page - 1) + 1, 1);\r\n\t\t\t\t\t\tvar end = Math.min(start + pg.meta.perpage - 1, pg.meta.total);\r\n\t\t\t\t\t\t// page info update\r\n\t\t\t\t\t\t$(pg.pager).find('.m-datatable__pager-info').find('.m-datatable__pager-detail').html(Plugin.dataPlaceholder(\r\n\t\t\t\t\t\t\tPlugin.getOption('translate.toolbar.pagination.items.info'), {\r\n\t\t\t\t\t\t\t\tstart: start,\r\n\t\t\t\t\t\t\t\tend: pg.meta.perpage === -1 ? pg.meta.total : end,\r\n\t\t\t\t\t\t\t\tpageSize: pg.meta.perpage === -1 ||\r\n\t\t\t\t\t\t\t\tpg.meta.perpage >= pg.meta.total\r\n\t\t\t\t\t\t\t\t\t? pg.meta.total\r\n\t\t\t\t\t\t\t\t\t: pg.meta.perpage,\r\n\t\t\t\t\t\t\t\ttotal: pg.meta.total,\r\n\t\t\t\t\t\t\t}));\r\n\t\t\t\t\t},\r\n\r\n\t\t\t\t\t/**\r\n\t\t\t\t\t * Update pagination layout breakpoint\r\n\t\t\t\t\t */\r\n\t\t\t\t\tpagingBreakpoint: function () {\r\n\t\t\t\t\t\t// keep page links reference\r\n\t\t\t\t\t\tvar pagerNumber = $(datatable.table).siblings('.m-datatable__pager').find('.m-datatable__pager-nav');\r\n\t\t\t\t\t\tif ($(pagerNumber).length === 0) return;\r\n\r\n\t\t\t\t\t\tvar currentPage = Plugin.getCurrentPage();\r\n\t\t\t\t\t\tvar pagerInput = $(pagerNumber).find('.m-pager-input').closest('li');\r\n\r\n\t\t\t\t\t\t// reset\r\n\t\t\t\t\t\t$(pagerNumber).find('li').show();\r\n\r\n\t\t\t\t\t\t// pagination update\r\n\t\t\t\t\t\t$.each(Plugin.getOption('toolbar.items.pagination.pages'),\r\n\t\t\t\t\t\t\tfunction (mode, option) {\r\n\t\t\t\t\t\t\t\tif (mUtil.isInResponsiveRange(mode)) {\r\n\t\t\t\t\t\t\t\t\tswitch (mode) {\r\n\t\t\t\t\t\t\t\t\t\tcase 'desktop':\r\n\t\t\t\t\t\t\t\t\t\tcase 'tablet':\r\n\t\t\t\t\t\t\t\t\t\t\tvar end = Math.ceil(currentPage / option.pagesNumber) *\r\n\t\t\t\t\t\t\t\t\t\t\t\toption.pagesNumber;\r\n\t\t\t\t\t\t\t\t\t\t\tvar start = end - option.pagesNumber;\r\n\t\t\t\t\t\t\t\t\t\t\t$(pagerInput).hide();\r\n\t\t\t\t\t\t\t\t\t\t\tpg.meta = Plugin.getDataSourceParam('pagination');\r\n\t\t\t\t\t\t\t\t\t\t\tpg.paginationUpdate();\r\n\t\t\t\t\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t\t\t\t\tcase 'mobile':\r\n\t\t\t\t\t\t\t\t\t\t\t$(pagerInput).show();\r\n\t\t\t\t\t\t\t\t\t\t\t$(pagerNumber).find('.m-datatable__pager-link--more-prev').closest('li').hide();\r\n\t\t\t\t\t\t\t\t\t\t\t$(pagerNumber).find('.m-datatable__pager-link--more-next').closest('li').hide();\r\n\t\t\t\t\t\t\t\t\t\t\t$(pagerNumber).find('.m-datatable__pager-link-number').closest('li').hide();\r\n\t\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t},\r\n\r\n\t\t\t\t\t/**\r\n\t\t\t\t\t * Update pagination number and button display\r\n\t\t\t\t\t */\r\n\t\t\t\t\tpaginationUpdate: function () {\r\n\t\t\t\t\t\tvar pager = $(datatable.table).siblings('.m-datatable__pager').find('.m-datatable__pager-nav'),\r\n\t\t\t\t\t\t\tpagerMorePrev = $(pager).find('.m-datatable__pager-link--more-prev'),\r\n\t\t\t\t\t\t\tpagerMoreNext = $(pager).find('.m-datatable__pager-link--more-next'),\r\n\t\t\t\t\t\t\tpagerFirst = $(pager).find('.m-datatable__pager-link--first'),\r\n\t\t\t\t\t\t\tpagerPrev = $(pager).find('.m-datatable__pager-link--prev'),\r\n\t\t\t\t\t\t\tpagerNext = $(pager).find('.m-datatable__pager-link--next'),\r\n\t\t\t\t\t\t\tpagerLast = $(pager).find('.m-datatable__pager-link--last');\r\n\r\n\t\t\t\t\t\t// get visible page\r\n\t\t\t\t\t\tvar pagerNumber = $(pager).find('.m-datatable__pager-link-number');\r\n\t\t\t\t\t\t// get page before of first visible\r\n\t\t\t\t\t\tvar morePrevPage = Math.max($(pagerNumber).first().data('page') - 1,\r\n\t\t\t\t\t\t\t1);\r\n\t\t\t\t\t\t$(pagerMorePrev).each(function (i, prev) {\r\n\t\t\t\t\t\t\t$(prev).attr('data-page', morePrevPage);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t// show/hide <li>\r\n\t\t\t\t\t\tif (morePrevPage === 1) {\r\n\t\t\t\t\t\t\t$(pagerMorePrev).parent().hide();\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t$(pagerMorePrev).parent().show();\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// get page after of last visible\r\n\t\t\t\t\t\tvar moreNextPage = Math.min($(pagerNumber).last().data('page') + 1,\r\n\t\t\t\t\t\t\tpg.meta.pages);\r\n\t\t\t\t\t\t$(pagerMoreNext).each(function (i, prev) {\r\n\t\t\t\t\t\t\t$(pagerMoreNext).attr('data-page', moreNextPage).show();\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t// show/hide <li>\r\n\t\t\t\t\t\tif (moreNextPage === pg.meta.pages\r\n\t\t\t\t\t\t\t// missing dot fix when last hidden page is one left\r\n\t\t\t\t\t\t\t&& moreNextPage === $(pagerNumber).last().data('page')) {\r\n\t\t\t\t\t\t\t$(pagerMoreNext).parent().hide();\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t$(pagerMoreNext).parent().show();\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// begin/end of pages\r\n\t\t\t\t\t\tif (pg.meta.page === 1) {\r\n\t\t\t\t\t\t\t$(pagerFirst).attr('disabled', true).addClass('m-datatable__pager-link--disabled');\r\n\t\t\t\t\t\t\t$(pagerPrev).attr('disabled', true).addClass('m-datatable__pager-link--disabled');\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t$(pagerFirst).removeAttr('disabled').removeClass('m-datatable__pager-link--disabled');\r\n\t\t\t\t\t\t\t$(pagerPrev).removeAttr('disabled').removeClass('m-datatable__pager-link--disabled');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (pg.meta.page === pg.meta.pages) {\r\n\t\t\t\t\t\t\t$(pagerNext).attr('disabled', true).addClass('m-datatable__pager-link--disabled');\r\n\t\t\t\t\t\t\t$(pagerLast).attr('disabled', true).addClass('m-datatable__pager-link--disabled');\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t$(pagerNext).removeAttr('disabled').removeClass('m-datatable__pager-link--disabled');\r\n\t\t\t\t\t\t\t$(pagerLast).removeAttr('disabled').removeClass('m-datatable__pager-link--disabled');\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// display more buttons\r\n\t\t\t\t\t\tvar nav = Plugin.getOption('toolbar.items.pagination.navigation');\r\n\t\t\t\t\t\tif (!nav.first) $(pagerFirst).remove();\r\n\t\t\t\t\t\tif (!nav.prev) $(pagerPrev).remove();\r\n\t\t\t\t\t\tif (!nav.next) $(pagerNext).remove();\r\n\t\t\t\t\t\tif (!nav.last) $(pagerLast).remove();\r\n\t\t\t\t\t},\r\n\t\t\t\t};\r\n\t\t\t\tpg.init(meta);\r\n\t\t\t\treturn pg;\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * Hide/show table cell defined by\r\n\t\t\t * options[columns][i][responsive][visible/hidden]\r\n\t\t\t */\r\n\t\t\tcolumnHide: function () {\r\n\t\t\t\tvar screen = mUtil.getViewPort().width;\r\n\t\t\t\t// foreach columns setting\r\n\t\t\t\t$.each(options.columns, function (i, column) {\r\n\t\t\t\t\tif (typeof column.responsive !== 'undefined') {\r\n\t\t\t\t\t\tvar field = column.field;\r\n\t\t\t\t\t\tvar tds = $.grep($(datatable.table).find('.m-datatable__cell'), function (n, i) {\r\n\t\t\t\t\t\t\treturn field === $(n).data('field');\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tif (mUtil.getBreakpoint(column.responsive.hidden) >= screen) {\r\n\t\t\t\t\t\t\t$(tds).hide();\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t$(tds).show();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (mUtil.getBreakpoint(column.responsive.visible) <= screen) {\r\n\t\t\t\t\t\t\t$(tds).show();\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t$(tds).hide();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * Setup sub datatable\r\n\t\t\t */\r\n\t\t\tsetupSubDatatable: function () {\r\n\t\t\t\tvar subTableCallback = Plugin.getOption('detail.content');\r\n\t\t\t\tif (typeof subTableCallback !== 'function') return;\r\n\r\n\t\t\t\t// subtable already exist\r\n\t\t\t\tif ($(datatable.table).find('.m-datatable__subtable').length > 0) return;\r\n\r\n\t\t\t\t$(datatable.wrap).addClass('m-datatable--subtable');\r\n\r\n\t\t\t\toptions.columns[0]['subtable'] = true;\r\n\r\n\t\t\t\t// toggle on open sub table\r\n\t\t\t\tvar toggleSubTable = function (e) {\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t// get parent row of this subtable\r\n\t\t\t\t\tvar parentRow = $(this).closest('.m-datatable__row');\r\n\r\n\t\t\t\t\t// get subtable row for sub table\r\n\t\t\t\t\tvar subTableRow = $(parentRow).next('.m-datatable__row-subtable');\r\n\t\t\t\t\tif ($(subTableRow).length === 0) {\r\n\t\t\t\t\t\t// prepare DOM for sub table, each <tr> as parent and add <tr> as child table\r\n\t\t\t\t\t\tsubTableRow = $('<tr/>').addClass('m-datatable__row-subtable m-datatable__row-loading').hide().append($('<td/>').addClass('m-datatable__subtable').attr('colspan', Plugin.getTotalColumns()));\r\n\t\t\t\t\t\t$(parentRow).after(subTableRow);\r\n\t\t\t\t\t\t// add class to even row\r\n\t\t\t\t\t\tif ($(parentRow).hasClass('m-datatable__row--even')) {\r\n\t\t\t\t\t\t\t$(subTableRow).addClass('m-datatable__row-subtable--even');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t$(subTableRow).toggle();\r\n\r\n\t\t\t\t\tvar subTable = $(subTableRow).find('.m-datatable__subtable');\r\n\r\n\t\t\t\t\t// get id from first column of parent row\r\n\t\t\t\t\tvar primaryKey = $(this).closest('[data-field]:first-child').find('.m-datatable__toggle-subtable').data('value');\r\n\r\n\t\t\t\t\tvar icon = $(this).find('i').removeAttr('class');\r\n\r\n\t\t\t\t\t// prevent duplicate datatable init\r\n\t\t\t\t\tif ($(parentRow).hasClass('m-datatable__row--subtable-expanded')) {\r\n\t\t\t\t\t\t$(icon).addClass(Plugin.getOption('layout.icons.rowDetail.collapse'));\r\n\t\t\t\t\t\t// remove expand class from parent row\r\n\t\t\t\t\t\t$(parentRow).removeClass('m-datatable__row--subtable-expanded');\r\n\t\t\t\t\t\t// trigger event on collapse\r\n\t\t\t\t\t\t$(datatable).trigger('m-datatable--on-collapse-subtable', [parentRow]);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t// expand and run callback function\r\n\t\t\t\t\t\t$(icon).addClass(Plugin.getOption('layout.icons.rowDetail.expand'));\r\n\t\t\t\t\t\t// add expand class to parent row\r\n\t\t\t\t\t\t$(parentRow).addClass('m-datatable__row--subtable-expanded');\r\n\t\t\t\t\t\t// trigger event on expand\r\n\t\t\t\t\t\t$(datatable).trigger('m-datatable--on-expand-subtable', [parentRow]);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// prevent duplicate datatable init\r\n\t\t\t\t\tif ($(subTable).find('.m-datatable').length === 0) {\r\n\t\t\t\t\t\t// get data by primary id\r\n\t\t\t\t\t\t$.map(datatable.dataSet, function (n, i) {\r\n\t\t\t\t\t\t\t// primary id must be at the first column, otherwise e.data will be undefined\r\n\t\t\t\t\t\t\tif (primaryKey === n[options.columns[0].field]) {\r\n\t\t\t\t\t\t\t\te.data = n;\r\n\t\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t// deprecated in v5.0.6\r\n\t\t\t\t\t\te.detailCell = subTable;\r\n\r\n\t\t\t\t\t\te.parentRow = parentRow;\r\n\t\t\t\t\t\te.subTable = subTable;\r\n\r\n\t\t\t\t\t\t// run callback with event\r\n\t\t\t\t\t\tsubTableCallback(e);\r\n\r\n\t\t\t\t\t\t$(subTable).children('.m-datatable').on('m-datatable--on-init', function (e) {\r\n\t\t\t\t\t\t\t$(subTableRow).removeClass('m-datatable__row-loading');\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tif (Plugin.getOption('data.type') === 'local') {\r\n\t\t\t\t\t\t\t$(subTableRow).removeClass('m-datatable__row-loading');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\r\n\t\t\t\tvar columns = options.columns;\r\n\t\t\t\t$(datatable.tableBody).find('.m-datatable__row').each(function (tri, tr) {\r\n\t\t\t\t\t$(tr).find('.m-datatable__cell').each(function (tdi, td) {\r\n\t\t\t\t\t\t// get column settings by field\r\n\t\t\t\t\t\tvar column = $.grep(columns, function (n, i) {\r\n\t\t\t\t\t\t\treturn $(td).data('field') === n.field;\r\n\t\t\t\t\t\t})[0];\r\n\t\t\t\t\t\tif (typeof column !== 'undefined') {\r\n\t\t\t\t\t\t\tvar value = $(td).text();\r\n\t\t\t\t\t\t\t// enable column subtable toggle\r\n\t\t\t\t\t\t\tif (typeof column.subtable !== 'undefined' && column.subtable) {\r\n\t\t\t\t\t\t\t\t// check if subtable toggle exist\r\n\t\t\t\t\t\t\t\tif ($(td).find('.m-datatable__toggle-subtable').length > 0) return;\r\n\t\t\t\t\t\t\t\t// append subtable toggle\r\n\t\t\t\t\t\t\t\t$(td).html($('<a/>').addClass('m-datatable__toggle-subtable').attr('href', '#').attr('data-value', value).attr('title', Plugin.getOption('detail.title')).on('click', toggleSubTable).append($('<i/>').css('width', $(td).data('width')).addClass(Plugin.getOption('layout.icons.rowDetail.collapse'))));\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\r\n\t\t\t\t// $(datatable.tableHead).find('.m-datatable__row').first()\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * Datasource mapping callback\r\n\t\t\t */\r\n\t\t\tdataMapCallback: function (raw) {\r\n\t\t\t\t// static dataset array\r\n\t\t\t\tvar dataSet = raw;\r\n\t\t\t\t// dataset mapping callback\r\n\t\t\t\tif (typeof Plugin.getOption('data.source.read.map') === 'function') {\r\n\t\t\t\t\treturn Plugin.getOption('data.source.read.map')(raw);\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// default data mapping fallback\r\n\t\t\t\t\tif (typeof raw !== 'undefined' && typeof raw.data !== 'undefined') {\r\n\t\t\t\t\t\tdataSet = raw.data;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn dataSet;\r\n\t\t\t},\r\n\r\n\t\t\tisSpinning: false,\r\n\t\t\t/**\r\n\t\t\t * BlockUI spinner callback\r\n\t\t\t * @param block\r\n\t\t\t */\r\n\t\t\tspinnerCallback: function (block) {\r\n\t\t\t\tif (block) {\r\n\t\t\t\t\tif (!Plugin.isSpinning) {\r\n\t\t\t\t\t\t// get spinner options\r\n\t\t\t\t\t\tvar spinnerOptions = Plugin.getOption('layout.spinner');\r\n\t\t\t\t\t\tif (spinnerOptions.message === true) {\r\n\t\t\t\t\t\t\t// use default spinner message from translation\r\n\t\t\t\t\t\t\tspinnerOptions.message = Plugin.getOption('translate.records.processing');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tPlugin.isSpinning = true;\r\n\t\t\t\t\t\tif (typeof mApp !== 'undefined') {\r\n\t\t\t\t\t\t\tmApp.block(datatable, spinnerOptions);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tPlugin.isSpinning = false;\r\n\t\t\t\t\tif (typeof mApp !== 'undefined') {\r\n\t\t\t\t\t\tmApp.unblock(datatable);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * Default sort callback function\r\n\t\t\t * @param data\r\n\t\t\t * @param sort\r\n\t\t\t * @param column\r\n\t\t\t * @returns {*|Array.<T>|{sort, field}|{asc, desc}}\r\n\t\t\t */\r\n\t\t\tsortCallback: function (data, sort, column) {\r\n\t\t\t\tvar type = column['type'] || 'string';\r\n\t\t\t\tvar format = column['format'] || '';\r\n\t\t\t\tvar field = column['field'];\r\n\r\n\t\t\t\treturn $(data).sort(function (a, b) {\r\n\t\t\t\t\tvar aField = a[field];\r\n\t\t\t\t\tvar bField = b[field];\r\n\r\n\t\t\t\t\tswitch (type) {\r\n\t\t\t\t\t\tcase 'date':\r\n\t\t\t\t\t\t\tif (typeof moment === 'undefined') {\r\n\t\t\t\t\t\t\t\tthrow new Error('Moment.js is required.');\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tvar diff = moment(aField, format).diff(moment(bField, format));\r\n\t\t\t\t\t\t\tif (sort === 'asc') {\r\n\t\t\t\t\t\t\t\treturn diff > 0 ? 1 : diff < 0 ? -1 : 0;\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\treturn diff < 0 ? 1 : diff > 0 ? -1 : 0;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tcase 'number':\r\n\t\t\t\t\t\t\tif (isNaN(parseFloat(aField)) && aField != null) {\r\n\t\t\t\t\t\t\t\taField = Number(aField.replace(/[^0-9\\.-]+/g, ''));\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (isNaN(parseFloat(bField)) && bField != null) {\r\n\t\t\t\t\t\t\t\tbField = Number(bField.replace(/[^0-9\\.-]+/g, ''));\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\taField = parseFloat(aField);\r\n\t\t\t\t\t\t\tbField = parseFloat(bField);\r\n\t\t\t\t\t\t\tif (sort === 'asc') {\r\n\t\t\t\t\t\t\t\treturn aField > bField ? 1 : aField < bField ? -1 : 0;\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\treturn aField < bField ? 1 : aField > bField ? -1 : 0;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tcase 'string':\r\n\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\tif (sort === 'asc') {\r\n\t\t\t\t\t\t\t\treturn aField > bField ? 1 : aField < bField ? -1 : 0;\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\treturn aField < bField ? 1 : aField > bField ? -1 : 0;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * Custom debug log\r\n\t\t\t * @param text\r\n\t\t\t * @param obj\r\n\t\t\t */\r\n\t\t\tlog: function (text, obj) {\r\n\t\t\t\tif (typeof obj === 'undefined') obj = '';\r\n\t\t\t\tif (datatable.debug) {\r\n\t\t\t\t\tconsole.log(text, obj);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * Auto hide columnds overflow in row\r\n\t\t\t */\r\n\t\t\tautoHide: function () {\r\n\t\t\t\t$(datatable.table).find('.m-datatable__cell').show();\r\n\t\t\t\t$(datatable.tableBody).each(function () {\r\n\t\t\t\t\twhile ($(this)[0].offsetWidth < $(this)[0].scrollWidth) {\r\n\t\t\t\t\t\t$(datatable.table).find('.m-datatable__row').each(function (i) {\r\n\t\t\t\t\t\t\tvar cell = $(this).find('.m-datatable__cell').not(':hidden').last();\r\n\t\t\t\t\t\t\t$(cell).hide();\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tPlugin.adjustCellsWidth.call();\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\tvar toggleHiddenColumns = function (e) {\r\n\t\t\t\t\te.preventDefault();\r\n\r\n\t\t\t\t\tvar row = $(this).closest('.m-datatable__row');\r\n\t\t\t\t\tvar detailRow = $(row).next();\r\n\r\n\t\t\t\t\tif (!$(detailRow).hasClass('m-datatable__row-detail')) {\r\n\t\t\t\t\t\t$(this).find('i').removeClass(Plugin.getOption('layout.icons.rowDetail.collapse')).addClass(Plugin.getOption('layout.icons.rowDetail.expand'));\r\n\r\n\t\t\t\t\t\tvar hidden = $(row).find('.m-datatable__cell:hidden').clone().show();\r\n\r\n\t\t\t\t\t\tdetailRow = $('<tr/>').addClass('m-datatable__row-detail').insertAfter(row);\r\n\t\t\t\t\t\tvar detailRowTd = $('<td/>').addClass('m-datatable__detail').attr('colspan', Plugin.getTotalColumns()).appendTo(detailRow);\r\n\r\n\t\t\t\t\t\tvar detailSubTable = $('<table/>');\r\n\t\t\t\t\t\t$(hidden).each(function () {\r\n\t\t\t\t\t\t\tvar field = $(this).data('field');\r\n\t\t\t\t\t\t\tvar column = $.grep(options.columns, function (n, i) {\r\n\t\t\t\t\t\t\t\treturn field === n.field;\r\n\t\t\t\t\t\t\t})[0];\r\n\t\t\t\t\t\t\t$(detailSubTable).append($('<tr class=\"m-datatable__row\"></tr>').append($('<td class=\"m-datatable__cell\"></td>').append($('<span/>').css('width', Plugin.offset).append(column.title))).append(this));\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t$(detailRowTd).append(detailSubTable);\r\n\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t$(this).find('i').removeClass(Plugin.getOption('layout.icons.rowDetail.expand')).addClass(Plugin.getOption('layout.icons.rowDetail.collapse'));\r\n\t\t\t\t\t\t$(detailRow).remove();\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\r\n\t\t\t\t// toggle show hidden columns\r\n\t\t\t\t$(datatable.tableBody).find('.m-datatable__row').each(function () {\r\n\t\t\t\t\t$(this).prepend($('<td/>').addClass('m-datatable__cell m-datatable__toggle--detail').append($('<a/>').addClass('m-datatable__toggle-detail').attr('href', '').on('click', toggleHiddenColumns).append($('<i/>').css('width', '21px').// maintain width for both icons expand and collapse\r\n\t\t\t\t\taddClass(Plugin.getOption('layout.icons.rowDetail.collapse')))));\r\n\r\n\t\t\t\t\t// check if subtable toggle exist\r\n\t\t\t\t\tif ($(datatable.tableHead).find('.m-datatable__toggle-detail').length === 0) {\r\n\t\t\t\t\t\t$(datatable.tableHead).find('.m-datatable__row').first().prepend('<th class=\"m-datatable__cell m-datatable__toggle-detail\"><span style=\"width: 21px\"></span></th>');\r\n\t\t\t\t\t\t$(datatable.tableFoot).find('.m-datatable__row').first().prepend('<th class=\"m-datatable__cell m-datatable__toggle-detail\"><span style=\"width: 21px\"></span></th>');\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t$(datatable.tableHead).find('.m-datatable__toggle-detail').find('span').css('width', '21px');\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * todo; implement hover column\r\n\t\t\t */\r\n\t\t\thoverColumn: function () {\r\n\t\t\t\t$(datatable.tableBody).on('mouseenter', '.m-datatable__cell', function () {\r\n\t\t\t\t\tvar colIdx = $(Plugin.cell(this).nodes()).index();\r\n\t\t\t\t\t$(Plugin.cells().nodes()).removeClass('m-datatable__cell--hover');\r\n\t\t\t\t\t$(Plugin.column(colIdx).nodes()).addClass('m-datatable__cell--hover');\r\n\t\t\t\t});\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * To enable auto columns features for remote data source\r\n\t\t\t */\r\n\t\t\tsetAutoColumns: function () {\r\n\t\t\t\tif (Plugin.getOption('data.autoColumns')) {\r\n\t\t\t\t\t$.each(datatable.dataSet[0], function (k, v) {\r\n\t\t\t\t\t\tvar found = $.grep(options.columns, function (n, i) {\r\n\t\t\t\t\t\t\treturn k === n.field;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tif (found.length === 0) {\r\n\t\t\t\t\t\t\toptions.columns.push({field: k, title: k});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\t$(datatable.tableHead).find('.m-datatable__row').remove();\r\n\t\t\t\t\tPlugin.setHeadTitle();\r\n\t\t\t\t\tif (Plugin.getOption('layout.footer')) {\r\n\t\t\t\t\t\t$(datatable.tableFoot).find('.m-datatable__row').remove();\r\n\t\t\t\t\t\tPlugin.setHeadTitle(datatable.tableFoot);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\t/********************\r\n\t\t\t ** HELPERS\r\n\t\t\t ********************/\r\n\r\n\t\t\t/**\r\n\t\t\t * Check if table is a locked colums table\r\n\t\t\t */\r\n\t\t\tisLocked: function () {\r\n\t\t\t\treturn mUtil.hasClass(datatable.wrap[0], 'm-datatable--lock') || false;\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * Get total extra space of an element for width calculation, including\r\n\t\t\t * padding, margin, border\r\n\t\t\t * @param element\r\n\t\t\t * @returns {number}\r\n\t\t\t */\r\n\t\t\tgetExtraSpace: function (element) {\r\n\t\t\t\tvar padding = parseInt($(element).css('paddingRight')) +\r\n\t\t\t\t\tparseInt($(element).css('paddingLeft'));\r\n\t\t\t\tvar margin = parseInt($(element).css('marginRight')) +\r\n\t\t\t\t\tparseInt($(element).css('marginLeft'));\r\n\t\t\t\tvar border = Math.ceil(\r\n\t\t\t\t\t$(element).css('border-right-width').replace('px', ''));\r\n\t\t\t\treturn padding + margin + border;\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * Insert data of array into {{ }} template placeholder\r\n\t\t\t * @param template\r\n\t\t\t * @param data\r\n\t\t\t * @returns {*}\r\n\t\t\t */\r\n\t\t\tdataPlaceholder: function (template, data) {\r\n\t\t\t\tvar result = template;\r\n\t\t\t\t$.each(data, function (key, val) {\r\n\t\t\t\t\tresult = result.replace('{{' + key + '}}', val);\r\n\t\t\t\t});\r\n\t\t\t\treturn result;\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * Get table unique ID\r\n\t\t\t * Note: table unique change each time refreshed\r\n\t\t\t * @param suffix\r\n\t\t\t * @returns {*}\r\n\t\t\t */\r\n\t\t\tgetTableId: function (suffix) {\r\n\t\t\t\tif (typeof suffix === 'undefined') suffix = '';\r\n\t\t\t\tvar id = $(datatable).attr('id');\r\n\t\t\t\tif (typeof id === 'undefined') {\r\n\t\t\t\t\tid = $(datatable).attr('class').split(' ')[0];\r\n\t\t\t\t}\r\n\t\t\t\treturn id + suffix;\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * Get table prefix with depth number\r\n\t\t\t */\r\n\t\t\tgetTablePrefix: function (suffix) {\r\n\t\t\t\tif (typeof suffix !== 'undefined') suffix = '-' + suffix;\r\n\t\t\t\treturn Plugin.getTableId() + '-' + Plugin.getDepth() + suffix;\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * Get current table depth of sub table\r\n\t\t\t * @returns {number}\r\n\t\t\t */\r\n\t\t\tgetDepth: function () {\r\n\t\t\t\tvar depth = 0;\r\n\t\t\t\tvar table = datatable.table;\r\n\t\t\t\tdo {\r\n\t\t\t\t\ttable = $(table).parents('.m-datatable__table');\r\n\t\t\t\t\tdepth++;\r\n\t\t\t\t} while ($(table).length > 0);\r\n\t\t\t\treturn depth;\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * Keep state item\r\n\t\t\t * @param key\r\n\t\t\t * @param value\r\n\t\t\t */\r\n\t\t\tstateKeep: function (key, value) {\r\n\t\t\t\tkey = Plugin.getTablePrefix(key);\r\n\t\t\t\tif (Plugin.getOption('data.saveState') === false) return;\r\n\t\t\t\tif (Plugin.getOption('data.saveState.webstorage') && localStorage) {\r\n\t\t\t\t\tlocalStorage.setItem(key, JSON.stringify(value));\r\n\t\t\t\t}\r\n\t\t\t\tif (Plugin.getOption('data.saveState.cookie')) {\r\n\t\t\t\t\tCookies.set(key, JSON.stringify(value));\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * Get state item\r\n\t\t\t * @param key\r\n\t\t\t * @param defValue\r\n\t\t\t */\r\n\t\t\tstateGet: function (key, defValue) {\r\n\t\t\t\tkey = Plugin.getTablePrefix(key);\r\n\t\t\t\tif (Plugin.getOption('data.saveState') === false) return;\r\n\t\t\t\tvar value = null;\r\n\t\t\t\tif (Plugin.getOption('data.saveState.webstorage') && localStorage) {\r\n\t\t\t\t\tvalue = localStorage.getItem(key);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tvalue = Cookies.get(key);\r\n\t\t\t\t}\r\n\t\t\t\tif (typeof value !== 'undefined' && value !== null) {\r\n\t\t\t\t\treturn JSON.parse(value);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * Update data in state without clear existing\r\n\t\t\t * @param key\r\n\t\t\t * @param value\r\n\t\t\t */\r\n\t\t\tstateUpdate: function (key, value) {\r\n\t\t\t\tvar ori = Plugin.stateGet(key);\r\n\t\t\t\tif (typeof ori === 'undefined' || ori === null) ori = {};\r\n\t\t\t\tPlugin.stateKeep(key, $.extend({}, ori, value));\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * Remove state item\r\n\t\t\t * @param key\r\n\t\t\t */\r\n\t\t\tstateRemove: function (key) {\r\n\t\t\t\tkey = Plugin.getTablePrefix(key);\r\n\t\t\t\tif (localStorage) {\r\n\t\t\t\t\tlocalStorage.removeItem(key);\r\n\t\t\t\t}\r\n\t\t\t\tCookies.remove(key);\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * Get total columns.\r\n\t\t\t */\r\n\t\t\tgetTotalColumns: function (tablePart) {\r\n\t\t\t\tif (typeof tablePart === 'undefined') tablePart = datatable.tableBody;\r\n\t\t\t\treturn $(tablePart).find('.m-datatable__row').first().find('.m-datatable__cell').length;\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * Get table row. Useful to get row when current table is in lock mode.\r\n\t\t\t * Can be used for both lock and normal table mode.\r\n\t\t\t * By default, returning result will be in a list of <td>.\r\n\t\t\t * @param tablePart\r\n\t\t\t * @param row 1-based index\r\n\t\t\t * @param tdOnly Optional. Default true\r\n\t\t\t * @returns {*}\r\n\t\t\t */\r\n\t\t\tgetOneRow: function (tablePart, row, tdOnly) {\r\n\t\t\t\tif (typeof tdOnly === 'undefined') tdOnly = true;\r\n\t\t\t\t// get list of <tr>\r\n\t\t\t\tvar result = $(tablePart).find('.m-datatable__row:not(.m-datatable__row-detail):nth-child(' + row + ')');\r\n\t\t\t\tif (tdOnly) {\r\n\t\t\t\t\t// get list of <td> or <th>\r\n\t\t\t\t\tresult = result.find('.m-datatable__cell');\r\n\t\t\t\t}\r\n\t\t\t\treturn result;\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * Check if element has vertical overflow\r\n\t\t\t * @param element\r\n\t\t\t * @returns {boolean}\r\n\t\t\t */\r\n\t\t\thasOverflowY: function (element) {\r\n\t\t\t\tvar children = $(element).find('.m-datatable__row');\r\n\t\t\t\tvar maxHeight = 0;\r\n\r\n\t\t\t\tif (children.length > 0) {\r\n\t\t\t\t\t$(children).each(function (tdi, td) {\r\n\t\t\t\t\t\tmaxHeight += Math.floor($(td).innerHeight());\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\treturn maxHeight > $(element).innerHeight();\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn false;\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * Sort table row at HTML level by column index.\r\n\t\t\t * todo; Not in use.\r\n\t\t\t * @param header Header sort clicked\r\n\t\t\t * @param sort asc|desc. Optional. Default asc\r\n\t\t\t * @param int Boolean. Optional. Comparison value parse to integer.\r\n\t\t\t *     Default false\r\n\t\t\t */\r\n\t\t\tsortColumn: function (header, sort, int) {\r\n\t\t\t\tif (typeof sort === 'undefined') sort = 'asc'; // desc\r\n\t\t\t\tif (typeof int === 'undefined') int = false;\r\n\r\n\t\t\t\tvar column = $(header).index();\r\n\t\t\t\tvar rows = $(datatable.tableBody).find('.m-datatable__row');\r\n\t\t\t\tvar hIndex = $(header).closest('.m-datatable__lock').index();\r\n\t\t\t\tif (hIndex !== -1) {\r\n\t\t\t\t\trows = $(datatable.tableBody).find('.m-datatable__lock:nth-child(' + (hIndex + 1) + ')').find('.m-datatable__row');\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar container = $(rows).parent();\r\n\t\t\t\t$(rows).sort(function (a, b) {\r\n\t\t\t\t\tvar tda = $(a).find('td:nth-child(' + column + ')').text();\r\n\t\t\t\t\tvar tdb = $(b).find('td:nth-child(' + column + ')').text();\r\n\r\n\t\t\t\t\tif (int) {\r\n\t\t\t\t\t\t// useful for integer type sorting\r\n\t\t\t\t\t\ttda = parseInt(tda);\r\n\t\t\t\t\t\ttdb = parseInt(tdb);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (sort === 'asc') {\r\n\t\t\t\t\t\treturn tda > tdb ? 1 : tda < tdb ? -1 : 0;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treturn tda < tdb ? 1 : tda > tdb ? -1 : 0;\r\n\t\t\t\t\t}\r\n\t\t\t\t}).appendTo(container);\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * Perform sort remote and local\r\n\t\t\t */\r\n\t\t\tsorting: function () {\r\n\t\t\t\tvar sortObj = {\r\n\t\t\t\t\tinit: function () {\r\n\t\t\t\t\t\tif (options.sortable) {\r\n\t\t\t\t\t\t\t$(datatable.tableHead).find('.m-datatable__cell:not(.m-datatable__cell--check)').addClass('m-datatable__cell--sort').off('click').on('click', sortObj.sortClick);\r\n\t\t\t\t\t\t\t// first init\r\n\t\t\t\t\t\t\tsortObj.setIcon();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsetIcon: function () {\r\n\t\t\t\t\t\tvar meta = Plugin.getDataSourceParam('sort');\r\n\t\t\t\t\t\tif ($.isEmptyObject(meta)) return;\r\n\r\n\t\t\t\t\t\t// sort icon beside column header\r\n\t\t\t\t\t\tvar td = $(datatable.tableHead).find('.m-datatable__cell[data-field=\"' + meta.field + '\"]').attr('data-sort', meta.sort);\r\n\t\t\t\t\t\tvar sorting = $(td).find('span');\r\n\t\t\t\t\t\tvar icon = $(sorting).find('i');\r\n\r\n\t\t\t\t\t\tvar icons = Plugin.getOption('layout.icons.sort');\r\n\t\t\t\t\t\t// update sort icon; desc & asc\r\n\t\t\t\t\t\tif ($(icon).length > 0) {\r\n\t\t\t\t\t\t\t$(icon).removeAttr('class').addClass(icons[meta.sort]);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t$(sorting).append($('<i/>').addClass(icons[meta.sort]));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsortClick: function (e) {\r\n\t\t\t\t\t\tvar meta = Plugin.getDataSourceParam('sort');\r\n\t\t\t\t\t\tvar field = $(this).data('field');\r\n\t\t\t\t\t\tvar column = Plugin.getColumnByField(field);\r\n\t\t\t\t\t\t// sort is disabled for this column\r\n\t\t\t\t\t\tif (typeof column.sortable !== 'undefined' &&\r\n\t\t\t\t\t\t\tcolumn.sortable === false) return;\r\n\r\n\t\t\t\t\t\t$(datatable.tableHead).find('.m-datatable__cell > span > i').remove();\r\n\r\n\t\t\t\t\t\tif (options.sortable) {\r\n\t\t\t\t\t\t\tPlugin.spinnerCallback(true);\r\n\r\n\t\t\t\t\t\t\tvar sort = 'desc';\r\n\t\t\t\t\t\t\tif (Plugin.getObject('field', meta) === field) {\r\n\t\t\t\t\t\t\t\tsort = Plugin.getObject('sort', meta);\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t// toggle sort\r\n\t\t\t\t\t\t\tsort = typeof sort === 'undefined' || sort === 'desc'\r\n\t\t\t\t\t\t\t\t? 'asc'\r\n\t\t\t\t\t\t\t\t: 'desc';\r\n\r\n\t\t\t\t\t\t\t// update field and sort params\r\n\t\t\t\t\t\t\tmeta = {field: field, sort: sort};\r\n\t\t\t\t\t\t\tPlugin.setDataSourceParam('sort', meta);\r\n\r\n\t\t\t\t\t\t\tsortObj.setIcon();\r\n\r\n\t\t\t\t\t\t\tsetTimeout(function () {\r\n\t\t\t\t\t\t\t\tPlugin.dataRender('sort');\r\n\t\t\t\t\t\t\t\t$(datatable).trigger('m-datatable--on-sort', meta);\r\n\t\t\t\t\t\t\t}, 300);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t};\r\n\t\t\t\tsortObj.init();\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * Update JSON data list linked with sort, filter and pagination.\r\n\t\t\t * Call this method, before using dataSet variable.\r\n\t\t\t * @returns {*|null}\r\n\t\t\t */\r\n\t\t\tlocalDataUpdate: function () {\r\n\t\t\t\t// todo; fix twice execution\r\n\t\t\t\tvar params = Plugin.getDataSourceParam();\r\n\t\t\t\tif (typeof datatable.originalDataSet === 'undefined') {\r\n\t\t\t\t\tdatatable.originalDataSet = datatable.dataSet;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar field = Plugin.getObject('sort.field', params);\r\n\t\t\t\tvar sort = Plugin.getObject('sort.sort', params);\r\n\t\t\t\tvar column = Plugin.getColumnByField(field);\r\n\t\t\t\tif (typeof column !== 'undefined' && Plugin.getOption('data.serverSorting') !== true) {\r\n\t\t\t\t\tif (typeof column.sortCallback === 'function') {\r\n\t\t\t\t\t\tdatatable.dataSet = column.sortCallback(datatable.originalDataSet, sort, column);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tdatatable.dataSet = Plugin.sortCallback(datatable.originalDataSet, sort, column);\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tdatatable.dataSet = datatable.originalDataSet;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// if server filter enable, don't pass local filter\r\n\t\t\t\tif (typeof params.query === 'object' && !Plugin.getOption('data.serverFiltering')) {\r\n\t\t\t\t\tparams.query = params.query || {};\r\n\r\n\t\t\t\t\tvar nestedSearch = function (obj) {\r\n\t\t\t\t\t\tfor (var field in obj) {\r\n\t\t\t\t\t\t\tif (!obj.hasOwnProperty(field)) continue;\r\n\t\t\t\t\t\t\tif (typeof obj[field] === 'string') {\r\n\t\t\t\t\t\t\t\tif (obj[field].toLowerCase() == search || obj[field].toLowerCase().indexOf(search) !== -1) {\r\n\t\t\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse if (typeof obj[field] === 'number') {\r\n\t\t\t\t\t\t\t\tif (obj[field] === search) {\r\n\t\t\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse if (typeof obj[field] === 'object') {\r\n\t\t\t\t\t\t\t\treturn nestedSearch(obj[field]);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\tvar search = $(Plugin.getOption('search.input')).val();\r\n\t\t\t\t\tif (typeof search !== 'undefined' && search !== '') {\r\n\t\t\t\t\t\tsearch = search.toLowerCase();\r\n\t\t\t\t\t\tdatatable.dataSet = $.grep(datatable.dataSet, nestedSearch);\r\n\t\t\t\t\t\t// remove generalSearch as we don't need this for next columns filter\r\n\t\t\t\t\t\tdelete params.query[Plugin.getGeneralSearchKey()];\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// remove empty element from array\r\n\t\t\t\t\t$.each(params.query, function (k, v) {\r\n\t\t\t\t\t\tif (v === '') {\r\n\t\t\t\t\t\t\tdelete params.query[k];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\t// filter array by query\r\n\t\t\t\t\tdatatable.dataSet = Plugin.filterArray(datatable.dataSet, params.query);\r\n\r\n\t\t\t\t\t// reset array index\r\n\t\t\t\t\tdatatable.dataSet = datatable.dataSet.filter(function () {\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn datatable.dataSet;\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * Utility helper to filter array by object pair of {key:value}\r\n\t\t\t * @param list\r\n\t\t\t * @param args\r\n\t\t\t * @param operator\r\n\t\t\t * @returns {*}\r\n\t\t\t */\r\n\t\t\tfilterArray: function (list, args, operator) {\r\n\t\t\t\tif (typeof list !== 'object') {\r\n\t\t\t\t\treturn [];\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (typeof operator === 'undefined') operator = 'AND';\r\n\r\n\t\t\t\tif (typeof args !== 'object') {\r\n\t\t\t\t\treturn list;\r\n\t\t\t\t}\r\n\r\n\t\t\t\toperator = operator.toUpperCase();\r\n\r\n\t\t\t\tif ($.inArray(operator, ['AND', 'OR', 'NOT']) === -1) {\r\n\t\t\t\t\treturn [];\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar count = Object.keys(args).length;\r\n\t\t\t\tvar filtered = [];\r\n\r\n\t\t\t\t$.each(list, function (key, obj) {\r\n\t\t\t\t\tvar to_match = obj;\r\n\r\n\t\t\t\t\tvar matched = 0;\r\n\t\t\t\t\t$.each(args, function (m_key, m_value) {\r\n\t\t\t\t\t\tm_value = m_value instanceof Array ? m_value : [m_value];\r\n\t\t\t\t\t\tif (to_match.hasOwnProperty(m_key)) {\r\n\t\t\t\t\t\t\tvar lhs = to_match[m_key].toString().toLowerCase();\r\n\t\t\t\t\t\t\tm_value.forEach(function (item, index) {\r\n\t\t\t\t\t\t\t\tif (item.toString().toLowerCase() == lhs || lhs.indexOf(item.toString().toLowerCase()) !== -1) {\r\n\t\t\t\t\t\t\t\t\tmatched++;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\tif (('AND' == operator && matched == count) ||\r\n\t\t\t\t\t\t('OR' == operator && matched > 0) ||\r\n\t\t\t\t\t\t('NOT' == operator && 0 == matched)) {\r\n\t\t\t\t\t\tfiltered[key] = obj;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\tlist = filtered;\r\n\r\n\t\t\t\treturn list;\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * Reset lock column scroll to 0 when resize\r\n\t\t\t */\r\n\t\t\tresetScroll: function () {\r\n\t\t\t\tif (typeof options.detail === 'undefined' && Plugin.getDepth() === 1) {\r\n\t\t\t\t\tif (mUtil.isRTL()) {\r\n\t\t\t\t\t\t$(datatable.table).find('.m-datatable__row').css('right', 0);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t$(datatable.table).find('.m-datatable__row').css('left', 0);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t$(datatable.table).find('.m-datatable__lock').css('top', 0);\r\n\t\t\t\t\t$(datatable.tableBody).scrollTop(0);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * Get column options by field\r\n\t\t\t * @param field\r\n\t\t\t * @returns {boolean}\r\n\t\t\t */\r\n\t\t\tgetColumnByField: function (field) {\r\n\t\t\t\tif (typeof field === 'undefined') return;\r\n\t\t\t\tvar result;\r\n\t\t\t\t$.each(options.columns, function (i, column) {\r\n\t\t\t\t\tif (field === column.field) {\r\n\t\t\t\t\t\tresult = column;\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\treturn result;\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * Get default sort column\r\n\t\t\t */\r\n\t\t\tgetDefaultSortColumn: function () {\r\n\t\t\t\tvar result;\r\n\t\t\t\t$.each(options.columns, function (i, column) {\r\n\t\t\t\t\tif (typeof column.sortable !== 'undefined'\r\n\t\t\t\t\t\t&& $.inArray(column.sortable, ['asc', 'desc']) !== -1) {\r\n\t\t\t\t\t\tresult = {sort: column.sortable, field: column.field};\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\treturn result;\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * Helper to get element dimensions, when the element is hidden\r\n\t\t\t * @param element\r\n\t\t\t * @param includeMargin\r\n\t\t\t * @returns {{width: number, height: number, innerWidth: number,\r\n\t\t\t *     innerHeight: number, outerWidth: number, outerHeight: number}}\r\n\t\t\t */\r\n\t\t\tgetHiddenDimensions: function (element, includeMargin) {\r\n\t\t\t\tvar props = {\r\n\t\t\t\t\t\tposition: 'absolute',\r\n\t\t\t\t\t\tvisibility: 'hidden',\r\n\t\t\t\t\t\tdisplay: 'block',\r\n\t\t\t\t\t},\r\n\t\t\t\t\tdim = {\r\n\t\t\t\t\t\twidth: 0,\r\n\t\t\t\t\t\theight: 0,\r\n\t\t\t\t\t\tinnerWidth: 0,\r\n\t\t\t\t\t\tinnerHeight: 0,\r\n\t\t\t\t\t\touterWidth: 0,\r\n\t\t\t\t\t\touterHeight: 0,\r\n\t\t\t\t\t},\r\n\t\t\t\t\thiddenParents = $(element).parents().addBack().not(':visible');\r\n\t\t\t\tincludeMargin = (typeof includeMargin === 'boolean')\r\n\t\t\t\t\t? includeMargin\r\n\t\t\t\t\t: false;\r\n\r\n\t\t\t\tvar oldProps = [];\r\n\t\t\t\thiddenParents.each(function () {\r\n\t\t\t\t\tvar old = {};\r\n\r\n\t\t\t\t\tfor (var name in props) {\r\n\t\t\t\t\t\told[name] = this.style[name];\r\n\t\t\t\t\t\tthis.style[name] = props[name];\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\toldProps.push(old);\r\n\t\t\t\t});\r\n\r\n\t\t\t\tdim.width = $(element).width();\r\n\t\t\t\tdim.outerWidth = $(element).outerWidth(includeMargin);\r\n\t\t\t\tdim.innerWidth = $(element).innerWidth();\r\n\t\t\t\tdim.height = $(element).height();\r\n\t\t\t\tdim.innerHeight = $(element).innerHeight();\r\n\t\t\t\tdim.outerHeight = $(element).outerHeight(includeMargin);\r\n\r\n\t\t\t\thiddenParents.each(function (i) {\r\n\t\t\t\t\tvar old = oldProps[i];\r\n\t\t\t\t\tfor (var name in props) {\r\n\t\t\t\t\t\tthis.style[name] = old[name];\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\treturn dim;\r\n\t\t\t},\r\n\r\n\t\t\tgetGeneralSearchKey: function () {\r\n\t\t\t\tvar searchInput = $(Plugin.getOption('search.input'));\r\n\t\t\t\treturn $(searchInput).prop('name') || $(searchInput).prop('id');\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * Get value by dot notation path string and to prevent undefined errors\r\n\t\t\t * @param path String Dot notation path in string\r\n\t\t\t * @param object Object to iterate\r\n\t\t\t * @returns {*}\r\n\t\t\t */\r\n\t\t\tgetObject: function (path, object) {\r\n\t\t\t\treturn path.split('.').reduce(function (obj, i) {\r\n\t\t\t\t\treturn obj !== null && typeof obj[i] !== 'undefined' ? obj[i] : null;\r\n\t\t\t\t}, object);\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * Extend object\r\n\t\t\t * @param obj\r\n\t\t\t * @param path\r\n\t\t\t * @param value\r\n\t\t\t * @returns {*}\r\n\t\t\t */\r\n\t\t\textendObj: function (obj, path, value) {\r\n\t\t\t\tvar levels = path.split('.'),\r\n\t\t\t\t\ti = 0;\r\n\r\n\t\t\t\tfunction createLevel(child) {\r\n\t\t\t\t\tvar name = levels[i++];\r\n\t\t\t\t\tif (typeof child[name] !== 'undefined' && child[name] !== null) {\r\n\t\t\t\t\t\tif (typeof child[name] !== 'object' &&\r\n\t\t\t\t\t\t\ttypeof child[name] !== 'function') {\r\n\t\t\t\t\t\t\tchild[name] = {};\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tchild[name] = {};\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (i === levels.length) {\r\n\t\t\t\t\t\tchild[name] = value;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tcreateLevel(child[name]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcreateLevel(obj);\r\n\t\t\t\treturn obj;\r\n\t\t\t},\r\n\r\n\t\t\trowEvenOdd: function () {\r\n\t\t\t\t// row even class\r\n\t\t\t\t$(datatable.tableBody).find('.m-datatable__row').removeClass('m-datatable__row--even');\r\n\t\t\t\tif ($(datatable.wrap).hasClass('m-datatable--subtable')) {\r\n\t\t\t\t\t$(datatable.tableBody).find('.m-datatable__row:not(.m-datatable__row-detail):even').addClass('m-datatable__row--even');\r\n\t\t\t\t} else {\r\n\t\t\t\t\t$(datatable.tableBody).find('.m-datatable__row:nth-child(even)').addClass('m-datatable__row--even');\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\t/********************\r\n\t\t\t ** PUBLIC API METHODS\r\n\t\t\t ********************/\r\n\r\n\t\t\t// delay timer\r\n\t\t\ttimer: 0,\r\n\r\n\t\t\t/**\r\n\t\t\t * Redraw datatable by recalculating its DOM elements, etc.\r\n\t\t\t * @returns {jQuery}\r\n\t\t\t */\r\n\t\t\tredraw: function () {\r\n\t\t\t\tPlugin.adjustCellsWidth.call();\r\n\t\t\t\tif (Plugin.isLocked()) {\r\n\t\t\t\t\t// fix hiding cell width issue\r\n\t\t\t\t\tPlugin.scrollbar();\r\n\t\t\t\t\tPlugin.resetScroll();\r\n\r\n\t\t\t\t\tPlugin.adjustCellsHeight.call();\r\n\t\t\t\t}\r\n\t\t\t\tPlugin.adjustLockContainer.call();\r\n\t\t\t\tPlugin.initHeight.call();\r\n\t\t\t\treturn datatable;\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * Shortcode to reload\r\n\t\t\t * @returns {jQuery}\r\n\t\t\t */\r\n\t\t\tload: function () {\r\n\t\t\t\tPlugin.reload();\r\n\t\t\t\treturn datatable;\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * Datasource reload\r\n\t\t\t * @returns {jQuery}\r\n\t\t\t */\r\n\t\t\treload: function () {\r\n\t\t\t\tvar delay = (function () {\r\n\t\t\t\t\treturn function (callback, ms) {\r\n\t\t\t\t\t\tclearTimeout(Plugin.timer);\r\n\t\t\t\t\t\tPlugin.timer = setTimeout(callback, ms);\r\n\t\t\t\t\t};\r\n\t\t\t\t})();\r\n\t\t\t\tdelay(function () {\r\n\t\t\t\t\t// local only. remote pagination will skip this block\r\n\t\t\t\t\tif (!options.data.serverFiltering) {\r\n\t\t\t\t\t\tPlugin.localDataUpdate();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tPlugin.dataRender();\r\n\t\t\t\t\t$(datatable).trigger('m-datatable--on-reloaded');\r\n\t\t\t\t}, Plugin.getOption('search.delay'));\r\n\t\t\t\treturn datatable;\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * Get record by record ID\r\n\t\t\t * @param id\r\n\t\t\t * @returns {jQuery}\r\n\t\t\t */\r\n\t\t\tgetRecord: function (id) {\r\n\t\t\t\tif (typeof datatable.tableBody === 'undefined') datatable.tableBody = $(datatable.table).children('tbody');\r\n\t\t\t\t$(datatable.tableBody).find('.m-datatable__cell:first-child').each(function (i, cell) {\r\n\t\t\t\t\tif (id == $(cell).text()) {\r\n\t\t\t\t\t\tvar rowNumber = $(cell).closest('.m-datatable__row').index() + 1;\r\n\t\t\t\t\t\tdatatable.API.record = datatable.API.value = Plugin.getOneRow(datatable.tableBody, rowNumber);\r\n\t\t\t\t\t\treturn datatable;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\treturn datatable;\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * @deprecated in v5.0.6\r\n\t\t\t * Get column of current record ID\r\n\t\t\t * @param columnName\r\n\t\t\t * @returns {jQuery}\r\n\t\t\t */\r\n\t\t\tgetColumn: function (columnName) {\r\n\t\t\t\tPlugin.setSelectedRecords();\r\n\t\t\t\tdatatable.API.value = $(datatable.API.record).find('[data-field=\"' + columnName + '\"]');\r\n\t\t\t\treturn datatable;\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * Destroy datatable to original DOM state before datatable was\r\n\t\t\t * initialized\r\n\t\t\t * @returns {jQuery}\r\n\t\t\t */\r\n\t\t\tdestroy: function () {\r\n\t\t\t\t$(datatable).parent().find('.m-datatable__pager').remove();\r\n\t\t\t\tvar initialDatatable = $(datatable.initialDatatable).addClass('m-datatable--destroyed').show();\r\n\t\t\t\t$(datatable).replaceWith(initialDatatable);\r\n\t\t\t\tdatatable = initialDatatable;\r\n\t\t\t\t$(datatable).trigger('m-datatable--on-destroy');\r\n\t\t\t\tPlugin.isInit = false;\r\n\t\t\t\tinitialDatatable = null;\r\n\t\t\t\treturn initialDatatable;\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * Sort by column field\r\n\t\t\t * @param field\r\n\t\t\t * @param sort\r\n\t\t\t */\r\n\t\t\tsort: function (field, sort) {\r\n\t\t\t\t// toggle sort\r\n\t\t\t\tsort = typeof sort === 'undefined' ? 'asc' : sort;\r\n\r\n\t\t\t\tPlugin.spinnerCallback(true);\r\n\r\n\t\t\t\t// update field and sort params\r\n\t\t\t\tvar meta = {field: field, sort: sort};\r\n\t\t\t\tPlugin.setDataSourceParam('sort', meta);\r\n\r\n\t\t\t\tsetTimeout(function () {\r\n\t\t\t\t\tPlugin.dataRender('sort');\r\n\t\t\t\t\t$(datatable).trigger('m-datatable--on-sort', meta);\r\n\t\t\t\t\t$(datatable.tableHead).find('.m-datatable__cell > span > i').remove();\r\n\t\t\t\t}, 300);\r\n\r\n\t\t\t\treturn datatable;\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * @deprecated in v5.0.6\r\n\t\t\t * Get current selected column value\r\n\t\t\t * @returns {jQuery}\r\n\t\t\t */\r\n\t\t\tgetValue: function () {\r\n\t\t\t\treturn $(datatable.API.value).text();\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * Set checkbox active\r\n\t\t\t * @param cell JQuery selector or checkbox ID\r\n\t\t\t */\r\n\t\t\tsetActive: function (cell) {\r\n\t\t\t\tif (typeof cell === 'string') {\r\n\t\t\t\t\t// set by checkbox id\r\n\t\t\t\t\tcell = $(datatable.tableBody).find('.m-checkbox--single > [type=\"checkbox\"][value=\"' + cell + '\"]');\r\n\t\t\t\t}\r\n\r\n\t\t\t\t$(cell).prop('checked', true);\r\n\r\n\t\t\t\t// normal table\r\n\t\t\t\tvar row = $(cell).closest('.m-datatable__row').addClass('m-datatable__row--active');\r\n\r\n\t\t\t\tvar index = $(row).index() + 1;\r\n\t\t\t\t// lock table\r\n\t\t\t\t$(row).closest('.m-datatable__lock').parent().find('.m-datatable__row:nth-child(' + index + ')').addClass('m-datatable__row--active');\r\n\r\n\t\t\t\tvar ids = [];\r\n\t\t\t\t$(row).each(function (i, td) {\r\n\t\t\t\t\tvar id = $(td).find('.m-checkbox--single:not(.m-checkbox--all) > [type=\"checkbox\"]').val();\r\n\t\t\t\t\tif (typeof id !== 'undefined') {\r\n\t\t\t\t\t\tids.push(id);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\t$(datatable).trigger('m-datatable--on-check', [ids]);\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * Set checkbox inactive\r\n\t\t\t * @param cell JQuery selector or checkbox ID\r\n\t\t\t */\r\n\t\t\tsetInactive: function (cell) {\r\n\t\t\t\tif (typeof cell === 'string') {\r\n\t\t\t\t\t// set by checkbox id\r\n\t\t\t\t\tcell = $(datatable.tableBody).find('.m-checkbox--single > [type=\"checkbox\"][value=\"' + cell + '\"]');\r\n\t\t\t\t}\r\n\r\n\t\t\t\t$(cell).prop('checked', false);\r\n\r\n\t\t\t\t// normal table\r\n\t\t\t\tvar row = $(cell).closest('.m-datatable__row').removeClass('m-datatable__row--active');\r\n\t\t\t\tvar index = $(row).index() + 1;\r\n\r\n\t\t\t\t// lock table\r\n\t\t\t\t$(row).closest('.m-datatable__lock').parent().find('.m-datatable__row:nth-child(' + index + ')').removeClass('m-datatable__row--active');\r\n\r\n\t\t\t\tvar ids = [];\r\n\t\t\t\t$(row).each(function (i, td) {\r\n\t\t\t\t\tvar id = $(td).find('.m-checkbox--single:not(.m-checkbox--all) > [type=\"checkbox\"]').val();\r\n\t\t\t\t\tif (typeof id !== 'undefined') {\r\n\t\t\t\t\t\tids.push(id);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\t$(datatable).trigger('m-datatable--on-uncheck', [ids]);\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * Set all checkboxes active or inactive\r\n\t\t\t * @param active\r\n\t\t\t */\r\n\t\t\tsetActiveAll: function (active) {\r\n\t\t\t\t// todo; check if child table also will set active?\r\n\t\t\t\tvar checkboxes = $(datatable.table).find('.m-datatable__body .m-datatable__row').find('.m-datatable__cell--check .m-checkbox [type=\"checkbox\"]');\r\n\t\t\t\tif (active) {\r\n\t\t\t\t\tPlugin.setActive(checkboxes);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tPlugin.setInactive(checkboxes);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * @deprecated in v5.0.6\r\n\t\t\t * Get selected rows which are active\r\n\t\t\t * @returns {jQuery}\r\n\t\t\t */\r\n\t\t\tsetSelectedRecords: function () {\r\n\t\t\t\tdatatable.API.record = $(datatable.tableBody).find('.m-datatable__row--active');\r\n\t\t\t\treturn datatable;\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * Get selected records\r\n\t\t\t * @returns {null}\r\n\t\t\t */\r\n\t\t\tgetSelectedRecords: function () {\r\n\t\t\t\t// support old method\r\n\t\t\t\tPlugin.setSelectedRecords();\r\n\t\t\t\tdatatable.API.record = datatable.rows('.m-datatable__row--active').nodes();\r\n\t\t\t\treturn datatable.API.record;\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * Get options by dots notation path\r\n\t\t\t * @param path String Dot notation path in string\r\n\t\t\t * @returns {*}\r\n\t\t\t */\r\n\t\t\tgetOption: function (path) {\r\n\t\t\t\treturn Plugin.getObject(path, options);\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * Set global options nodes by dots notation path\r\n\t\t\t * @param path\r\n\t\t\t * @param object\r\n\t\t\t */\r\n\t\t\tsetOption: function (path, object) {\r\n\t\t\t\toptions = Plugin.extendObj(options, path, object);\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * Search filter for local & remote\r\n\t\t\t * @param value\r\n\t\t\t * @param columns. Optional list of columns to be filtered.\r\n\t\t\t */\r\n\t\t\tsearch: function (value, columns) {\r\n\t\t\t\tif (typeof columns !== 'undefined') columns = $.makeArray(columns);\r\n\t\t\t\tvar delay = (function () {\r\n\t\t\t\t\treturn function (callback, ms) {\r\n\t\t\t\t\t\tclearTimeout(Plugin.timer);\r\n\t\t\t\t\t\tPlugin.timer = setTimeout(callback, ms);\r\n\t\t\t\t\t};\r\n\t\t\t\t})();\r\n\r\n\t\t\t\tdelay(function () {\r\n\t\t\t\t\t// get query parameters\r\n\t\t\t\t\tvar query = Plugin.getDataSourceQuery();\r\n\r\n\t\t\t\t\t// search not by columns\r\n\t\t\t\t\tif (typeof columns === 'undefined' && typeof value !== 'undefined') {\r\n\t\t\t\t\t\tvar key = Plugin.getGeneralSearchKey();\r\n\t\t\t\t\t\tquery[key] = value;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// search by columns, support multiple columns\r\n\t\t\t\t\tif (typeof columns === 'object') {\r\n\t\t\t\t\t\t$.each(columns, function (k, column) {\r\n\t\t\t\t\t\t\tquery[column] = value;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t// remove empty element from arrays\r\n\t\t\t\t\t\t$.each(query, function (k, v) {\r\n\t\t\t\t\t\t\tif (v === '' || $.isEmptyObject(v)) {\r\n\t\t\t\t\t\t\t\tdelete query[k];\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tPlugin.setDataSourceQuery(query);\r\n\r\n\t\t\t\t\t// local filter only. remote pagination will skip this block\r\n\t\t\t\t\tif (!options.data.serverFiltering) {\r\n\t\t\t\t\t\tPlugin.localDataUpdate();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tPlugin.dataRender('search');\r\n\t\t\t\t}, Plugin.getOption('search.delay'));\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * Set datasource paramsextractextract\r\n\t\t\t * @param param\r\n\t\t\t * @param value\r\n\t\t\t */\r\n\t\t\tsetDataSourceParam: function (param, value) {\r\n\t\t\t\tdatatable.API.params = $.extend({}, {\r\n\t\t\t\t\tpagination: {page: 1, perpage: Plugin.getOption('data.pageSize')},\r\n\t\t\t\t\tsort: Plugin.getDefaultSortColumn(),\r\n\t\t\t\t\tquery: {},\r\n\t\t\t\t}, datatable.API.params, Plugin.stateGet(Plugin.stateId));\r\n\r\n\t\t\t\tdatatable.API.params = Plugin.extendObj(datatable.API.params, param, value);\r\n\r\n\t\t\t\tPlugin.stateKeep(Plugin.stateId, datatable.API.params);\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * Get datasource params\r\n\t\t\t * @param param\r\n\t\t\t */\r\n\t\t\tgetDataSourceParam: function (param) {\r\n\t\t\t\tdatatable.API.params = $.extend({}, {\r\n\t\t\t\t\tpagination: {page: 1, perpage: Plugin.getOption('data.pageSize')},\r\n\t\t\t\t\tsort: Plugin.getDefaultSortColumn(),\r\n\t\t\t\t\tquery: {},\r\n\t\t\t\t}, datatable.API.params, Plugin.stateGet(Plugin.stateId));\r\n\r\n\t\t\t\tif (typeof param === 'string') {\r\n\t\t\t\t\treturn Plugin.getObject(param, datatable.API.params);\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn datatable.API.params;\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * Shortcode to datatable.getDataSourceParam('query');\r\n\t\t\t * @returns {*}\r\n\t\t\t */\r\n\t\t\tgetDataSourceQuery: function () {\r\n\t\t\t\treturn Plugin.getDataSourceParam('query') || {};\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * Shortcode to datatable.setDataSourceParam('query', query);\r\n\t\t\t * @param query\r\n\t\t\t */\r\n\t\t\tsetDataSourceQuery: function (query) {\r\n\t\t\t\tPlugin.setDataSourceParam('query', query);\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * Get current page number\r\n\t\t\t * @returns {number}\r\n\t\t\t */\r\n\t\t\tgetCurrentPage: function () {\r\n\t\t\t\treturn $(datatable.table).siblings('.m-datatable__pager').last().find('.m-datatable__pager-nav').find('.m-datatable__pager-link.m-datatable__pager-link--active').data('page') || 1;\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * Get selected dropdown page size\r\n\t\t\t * @returns {*|number}\r\n\t\t\t */\r\n\t\t\tgetPageSize: function () {\r\n\t\t\t\treturn $(datatable.table).siblings('.m-datatable__pager').last().find('select.m-datatable__pager-size').val() || 10;\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * Get total rows\r\n\t\t\t */\r\n\t\t\tgetTotalRows: function () {\r\n\t\t\t\treturn datatable.API.params.pagination.total;\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * Get full dataset in grid\r\n\t\t\t * @returns {*|null|Array}\r\n\t\t\t */\r\n\t\t\tgetDataSet: function () {\r\n\t\t\t\treturn datatable.originalDataSet;\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * @deprecated in v5.0.6\r\n\t\t\t * Hide column by column's field name\r\n\t\t\t * @param fieldName\r\n\t\t\t */\r\n\t\t\thideColumn: function (fieldName) {\r\n\t\t\t\t// add hide option for this column\r\n\t\t\t\t$.map(options.columns, function (column) {\r\n\t\t\t\t\tif (fieldName === column.field) {\r\n\t\t\t\t\t\tcolumn.responsive = {hidden: 'xl'};\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn column;\r\n\t\t\t\t});\r\n\t\t\t\t// hide current displayed column\r\n\t\t\t\tvar tds = $.grep($(datatable.table).find('.m-datatable__cell'), function (n, i) {\r\n\t\t\t\t\treturn fieldName === $(n).data('field');\r\n\t\t\t\t});\r\n\t\t\t\t$(tds).hide();\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * @deprecated in v5.0.6\r\n\t\t\t * Show column by column's field name\r\n\t\t\t * @param fieldName\r\n\t\t\t */\r\n\t\t\tshowColumn: function (fieldName) {\r\n\t\t\t\t// add hide option for this column\r\n\t\t\t\t$.map(options.columns, function (column) {\r\n\t\t\t\t\tif (fieldName === column.field) {\r\n\t\t\t\t\t\tdelete column.responsive;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn column;\r\n\t\t\t\t});\r\n\t\t\t\t// hide current displayed column\r\n\t\t\t\tvar tds = $.grep($(datatable.table).find('.m-datatable__cell'), function (n, i) {\r\n\t\t\t\t\treturn fieldName === $(n).data('field');\r\n\t\t\t\t});\r\n\t\t\t\t$(tds).show();\r\n\t\t\t},\r\n\r\n\t\t\tnodeTr: [],\r\n\t\t\tnodeTd: [],\r\n\t\t\tnodeCols: [],\r\n\t\t\trecentNode: [],\r\n\r\n\t\t\ttable: function () {\r\n\t\t\t\treturn datatable.table;\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * Select a single row from the table\r\n\t\t\t * @param selector\r\n\t\t\t * @returns {jQuery}\r\n\t\t\t */\r\n\t\t\trow: function (selector) {\r\n\t\t\t\tPlugin.rows(selector);\r\n\t\t\t\tPlugin.nodeTr = Plugin.recentNode = $(Plugin.nodeTr).first();\r\n\t\t\t\treturn datatable;\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * Select multiple rows from the table\r\n\t\t\t * @param selector\r\n\t\t\t * @returns {jQuery}\r\n\t\t\t */\r\n\t\t\trows: function (selector) {\r\n\t\t\t\tif (Plugin.isLocked()) {\r\n\t\t\t\t\tPlugin.nodeTr = Plugin.recentNode = $(datatable.tableBody).children().first().find(selector).filter('.m-datatable__row');\r\n\t\t\t\t} else {\r\n\t\t\t\t\tPlugin.nodeTr = Plugin.recentNode = $(datatable.tableBody).find(selector).filter('.m-datatable__row');\r\n\t\t\t\t}\r\n\t\t\t\treturn datatable;\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * Select a single column from the table\r\n\t\t\t * @param index zero-based index\r\n\t\t\t * @returns {jQuery}\r\n\t\t\t */\r\n\t\t\tcolumn: function (index) {\r\n\t\t\t\tif (Plugin.isLocked()) {\r\n\t\t\t\t\tPlugin.nodeCols = Plugin.recentNode = $(datatable.tableBody).children().first().find('.m-datatable__cell:nth-child(' + (index + 1) + ')');\r\n\t\t\t\t} else {\r\n\t\t\t\t\tPlugin.nodeCols = Plugin.recentNode = $(datatable.tableBody).find('.m-datatable__cell:nth-child(' + (index + 1) + ')');\r\n\t\t\t\t}\r\n\t\t\t\treturn datatable;\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * Select multiple columns from the table\r\n\t\t\t * @param selector\r\n\t\t\t * @returns {jQuery}\r\n\t\t\t */\r\n\t\t\tcolumns: function (selector) {\r\n\t\t\t\tvar context = datatable.table;\r\n\t\t\t\tif (Plugin.nodeTr === Plugin.recentNode) {\r\n\t\t\t\t\tcontext = Plugin.nodeTr;\r\n\t\t\t\t}\r\n\t\t\t\tvar columns = $(context).find('.m-datatable__cell[data-field=\"' + selector + '\"]');\r\n\t\t\t\tif (columns.length > 0) {\r\n\t\t\t\t\tPlugin.nodeCols = Plugin.recentNode = columns;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tPlugin.nodeCols = Plugin.recentNode = $(context).find(selector).filter('.m-datatable__cell');\r\n\t\t\t\t}\r\n\t\t\t\treturn datatable;\r\n\t\t\t},\r\n\r\n\t\t\tcell: function (selector) {\r\n\t\t\t\tPlugin.cells(selector);\r\n\t\t\t\tPlugin.nodeTd = Plugin.recentNode = $(Plugin.nodeTd).first();\r\n\t\t\t\treturn datatable;\r\n\t\t\t},\r\n\r\n\t\t\tcells: function (selector) {\r\n\t\t\t\tvar cells = $(datatable.tableBody).find('.m-datatable__cell');\r\n\t\t\t\tif (typeof selector !== 'undefined') {\r\n\t\t\t\t\tcells = $(cells).filter(selector);\r\n\t\t\t\t}\r\n\t\t\t\tPlugin.nodeTd = Plugin.recentNode = cells;\r\n\t\t\t\treturn datatable;\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * Delete the selected row from the table\r\n\t\t\t * @returns {jQuery}\r\n\t\t\t */\r\n\t\t\tremove: function () {\r\n\t\t\t\tif ($(Plugin.nodeTr.length) && Plugin.nodeTr === Plugin.recentNode) {\r\n\t\t\t\t\t$(Plugin.nodeTr).remove();\r\n\t\t\t\t}\r\n\t\t\t\tPlugin.layoutUpdate();\r\n\t\t\t\treturn datatable;\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * Show or hide the columns or rows\r\n\t\t\t */\r\n\t\t\tvisible: function (bool) {\r\n\t\t\t\tif ($(Plugin.recentNode.length)) {\r\n\t\t\t\t\tvar locked = Plugin.lockEnabledColumns();\r\n\t\t\t\t\tif (Plugin.recentNode === Plugin.nodeCols) {\r\n\t\t\t\t\t\tvar index = Plugin.recentNode.index();\r\n\r\n\t\t\t\t\t\tif (Plugin.isLocked()) {\r\n\t\t\t\t\t\t\tvar scrollColumns = $(Plugin.recentNode).closest('.m-datatable__lock--scroll').length;\r\n\t\t\t\t\t\t\tif (scrollColumns) {\r\n\t\t\t\t\t\t\t\t// is at center of scrollable area\r\n\t\t\t\t\t\t\t\tindex += locked.left.length + 1;\r\n\t\t\t\t\t\t\t} else if ($(Plugin.recentNode).closest('.m-datatable__lock--right').length) {\r\n\t\t\t\t\t\t\t\t// is at the right locked table\r\n\t\t\t\t\t\t\t\tindex += locked.left.length + scrollColumns + 1;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (bool) {\r\n\t\t\t\t\t\tif (Plugin.recentNode === Plugin.nodeCols) {\r\n\t\t\t\t\t\t\tdelete options.columns[index].responsive;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t$(Plugin.recentNode).show();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tif (Plugin.recentNode === Plugin.nodeCols) {\r\n\t\t\t\t\t\t\tPlugin.setOption('columns.' + index + '.responsive', {hidden: 'xl'});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t$(Plugin.recentNode).hide();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tPlugin.redraw();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * Get the the DOM element for the selected rows or columns\r\n\t\t\t * @returns {Array}\r\n\t\t\t */\r\n\t\t\tnodes: function () {\r\n\t\t\t\treturn Plugin.recentNode;\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * will be implemented soon\r\n\t\t\t * @returns {jQuery}\r\n\t\t\t */\r\n\t\t\tdataset: function () {\r\n\t\t\t\treturn datatable;\r\n\t\t\t},\r\n\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Public API methods can be used directly by datatable\r\n\t\t */\r\n\t\t$.each(Plugin, function (funcName, func) {\r\n\t\t\tdatatable[funcName] = func;\r\n\t\t});\r\n\r\n\t\t// initialize main datatable plugin\r\n\t\tif (typeof options !== 'undefined') {\r\n\t\t\tif (typeof options === 'string') {\r\n\t\t\t\tvar method = options;\r\n\t\t\t\tdatatable = $(this).data('mDatatable');\r\n\t\t\t\tif (typeof datatable !== 'undefined') {\r\n\t\t\t\t\toptions = datatable.options;\r\n\t\t\t\t\tPlugin[method].apply(this, Array.prototype.slice.call(arguments, 1));\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tif (!datatable.data('mDatatable') && !$(this).hasClass('m-datatable--loaded')) {\r\n\t\t\t\t\tdatatable.dataSet = null;\r\n\t\t\t\t\tdatatable.textAlign = {\r\n\t\t\t\t\t\tleft: 'm-datatable__cell--left',\r\n\t\t\t\t\t\tcenter: 'm-datatable__cell--center',\r\n\t\t\t\t\t\tright: 'm-datatable__cell--right',\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\t// merge default and user defined options\r\n\t\t\t\t\toptions = $.extend(true, {}, $.fn.mDatatable.defaults, options);\r\n\r\n\t\t\t\t\tdatatable.options = options;\r\n\r\n\t\t\t\t\t// init plugin process\r\n\t\t\t\t\tPlugin.init.apply(this, [options]);\r\n\r\n\t\t\t\t\t$(datatable.wrap).data('mDatatable', datatable);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\t// get existing instance datatable\r\n\t\t\tdatatable = $(this).data('mDatatable');\r\n\t\t\tif (typeof datatable === 'undefined') {\r\n\t\t\t\t$.error('mDatatable not initialized');\r\n\t\t\t}\r\n\t\t\toptions = datatable.options;\r\n\t\t}\r\n\r\n\t\treturn datatable;\r\n\t};\r\n\r\n\t// default options\r\n\t$.fn.mDatatable.defaults = {\r\n\t\t// datasource definition\r\n\t\tdata: {\r\n\t\t\ttype: 'local',\r\n\t\t\tsource: null,\r\n\t\t\tpageSize: 10, // display records per page\r\n\t\t\tsaveState: {\r\n\t\t\t\t// save datatable state(pagination, filtering, sorting, etc) in cookie or browser webstorage\r\n\t\t\t\tcookie: false,\r\n\t\t\t\twebstorage: true,\r\n\t\t\t},\r\n\r\n\t\t\tserverPaging: false,\r\n\t\t\tserverFiltering: false,\r\n\t\t\tserverSorting: false,\r\n\r\n\t\t\tautoColumns: false,\r\n\t\t\tattr: {\r\n\t\t\t\trowProps: [],\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t// layout definition\r\n\t\tlayout: {\r\n\t\t\ttheme: 'default', // datatable will support multiple themes and designs\r\n\t\t\tclass: 'm-datatable--brand', // custom wrapper class\r\n\t\t\tscroll: false, // enable/disable datatable scroll both horizontal and vertical when needed.\r\n\t\t\theight: null, // datatable's body's fixed height\r\n\t\t\tminHeight: 300,\r\n\t\t\tfooter: false, // display/hide footer\r\n\t\t\theader: true, // display/hide header\r\n\t\t\tcustomScrollbar: true, // set false to disable custom scrollbar\r\n\r\n\t\t\t// datatable spinner\r\n\t\t\tspinner: {\r\n\t\t\t\toverlayColor: '#000000',\r\n\t\t\t\topacity: 0,\r\n\t\t\t\ttype: 'loader',\r\n\t\t\t\tstate: 'brand',\r\n\t\t\t\tmessage: true,\r\n\t\t\t},\r\n\r\n\t\t\t// datatable UI icons\r\n\t\t\ticons: {\r\n\t\t\t\tsort: {asc: 'la la-arrow-up', desc: 'la la-arrow-down'},\r\n\t\t\t\tpagination: {\r\n\t\t\t\t\tnext: 'la la-angle-right',\r\n\t\t\t\t\tprev: 'la la-angle-left',\r\n\t\t\t\t\tfirst: 'la la-angle-double-left',\r\n\t\t\t\t\tlast: 'la la-angle-double-right',\r\n\t\t\t\t\tmore: 'la la-ellipsis-h',\r\n\t\t\t\t},\r\n\t\t\t\trowDetail: {expand: 'fa fa-caret-down', collapse: 'fa fa-caret-right'},\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t// column sorting\r\n\t\tsortable: true,\r\n\r\n\t\t// resize column size with mouse drag coming soon)\r\n\t\tresizable: false,\r\n\r\n\t\t// column based filtering (coming soon)\r\n\t\tfilterable: false,\r\n\r\n\t\tpagination: true,\r\n\r\n\t\t// inline and bactch editing (cooming soon)\r\n\t\teditable: false,\r\n\r\n\t\t// columns definition\r\n\t\tcolumns: [],\r\n\r\n\t\tsearch: {\r\n\t\t\t// enable trigger search by keyup enter\r\n\t\t\tonEnter: false,\r\n\t\t\t// input text for search\r\n\t\t\tinput: null,\r\n\t\t\t// search delay in milliseconds\r\n\t\t\tdelay: 400,\r\n\t\t},\r\n\r\n\t\trows: {\r\n\t\t\t// deprecated\r\n\t\t\tcallback: function () {\r\n\t\t\t},\r\n\t\t\t// call before row template\r\n\t\t\tbeforeTemplate: function () {\r\n\t\t\t},\r\n\t\t\t// call after row template\r\n\t\t\tafterTemplate: function () {\r\n\t\t\t},\r\n\t\t\t// auto hide columns, if rows overflow. work on non locked columns\r\n\t\t\tautoHide: false,\r\n\t\t},\r\n\r\n\t\t// toolbar\r\n\t\ttoolbar: {\r\n\t\t\t// place pagination and displayInfo blocks according to the array order\r\n\t\t\tlayout: ['pagination', 'info'],\r\n\r\n\t\t\t// toolbar placement can be at top or bottom or both top and bottom repeated\r\n\t\t\tplacement: ['bottom'],  //'top', 'bottom'\r\n\r\n\t\t\t// toolbar items\r\n\t\t\titems: {\r\n\t\t\t\t// pagination\r\n\t\t\t\tpagination: {\r\n\t\t\t\t\t// pagination type(default or scroll)\r\n\t\t\t\t\ttype: 'default',\r\n\r\n\t\t\t\t\t// number of pages to display by breakpoints\r\n\t\t\t\t\tpages: {\r\n\t\t\t\t\t\tdesktop: {\r\n\t\t\t\t\t\t\tlayout: 'default',\r\n\t\t\t\t\t\t\tpagesNumber: 6,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\ttablet: {\r\n\t\t\t\t\t\t\tlayout: 'default',\r\n\t\t\t\t\t\t\tpagesNumber: 3,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tmobile: {\r\n\t\t\t\t\t\t\tlayout: 'compact',\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\r\n\t\t\t\t\t// navigation buttons\r\n\t\t\t\t\tnavigation: {\r\n\t\t\t\t\t\tprev: true, // display prev link\r\n\t\t\t\t\t\tnext: true, // display next link\r\n\t\t\t\t\t\tfirst: true, // display first link\r\n\t\t\t\t\t\tlast: true // display last link\r\n\t\t\t\t\t},\r\n\r\n\t\t\t\t\t// page size select\r\n\t\t\t\t\tpageSizeSelect: [] // display dropdown to select pagination size. -1 is used for \"ALl\" option\r\n\t\t\t\t},\r\n\r\n\t\t\t\t// records info\r\n\t\t\t\tinfo: true,\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t// here we will keep all strings and message used by datatable UI so developer can easiliy translate to any language.\r\n\t\t// By default the stirngs will be in the plugin source and here can override it\r\n\t\ttranslate: {\r\n\t\t\trecords: {\r\n\t\t\t\tprocessing: 'Please wait...',\r\n\t\t\t\tnoRecords: 'No records found',\r\n\t\t\t},\r\n\t\t\ttoolbar: {\r\n\t\t\t\tpagination: {\r\n\t\t\t\t\titems: {\r\n\t\t\t\t\t\tdefault: {\r\n\t\t\t\t\t\t\tfirst: 'First',\r\n\t\t\t\t\t\t\tprev: 'Previous',\r\n\t\t\t\t\t\t\tnext: 'Next',\r\n\t\t\t\t\t\t\tlast: 'Last',\r\n\t\t\t\t\t\t\tmore: 'More pages',\r\n\t\t\t\t\t\t\tinput: 'Page number',\r\n\t\t\t\t\t\t\tselect: 'Select page size',\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tinfo: 'Displaying {{start}} - {{end}} of {{total}} records',\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\textensions: {},\r\n\t};\r\n\r\n}(jQuery));\nvar mLayout = function() {\r\n    var header;\r\n    var horMenu;\r\n    var asideMenu;\r\n    var asideMenuOffcanvas;\r\n    var horMenuOffcanvas;\r\n    var asideLeftToggle;\r\n    var asideLeftHide;\r\n    var scrollTop;\r\n    var quicksearch;\r\n    var mainPortlet;\r\n\r\n    //== Header\r\n    var initStickyHeader = function() {\r\n        var tmp;\r\n        var headerEl = mUtil.get('m_header');\r\n        var options = {\r\n            offset: {},\r\n            minimize: {}\r\n        };\r\n\r\n        if (mUtil.attr(headerEl, 'm-minimize-mobile') == 'hide') {\r\n            options.minimize.mobile = {};\r\n            options.minimize.mobile.on = 'm-header--hide';\r\n            options.minimize.mobile.off = 'm-header--show';\r\n        } else {\r\n            options.minimize.mobile = false;\r\n        }\r\n\r\n        if (mUtil.attr(headerEl, 'm-minimize') == 'hide') {\r\n            options.minimize.desktop = {};\r\n            options.minimize.desktop.on = 'm-header--hide';\r\n            options.minimize.desktop.off = 'm-header--show';\r\n        } else {\r\n            options.minimize.desktop = false;\r\n        }\r\n\r\n        if (tmp = mUtil.attr(headerEl, 'm-minimize-offset')) {\r\n            options.offset.desktop = tmp;\r\n        }\r\n\r\n        if (tmp = mUtil.attr(headerEl, 'm-minimize-mobile-offset')) {\r\n            options.offset.mobile = tmp;\r\n        }\r\n\r\n        header = new mHeader('m_header', options);\r\n    }\r\n\r\n    //== Hor menu\r\n    var initHorMenu = function() {\r\n        // init aside left offcanvas\r\n        horMenuOffcanvas = new mOffcanvas('m_header_menu', {\r\n            overlay: true,\r\n            baseClass: 'm-aside-header-menu-mobile',\r\n            closeBy: 'm_aside_header_menu_mobile_close_btn',\r\n            toggleBy: {\r\n                target: 'm_aside_header_menu_mobile_toggle',\r\n                state: 'm-brand__toggler--active'\r\n            }\r\n        });\r\n\r\n        horMenu = new mMenu('m_header_menu', {\r\n            submenu: {\r\n                desktop: 'dropdown',\r\n                tablet: 'accordion',\r\n                mobile: 'accordion'\r\n            },\r\n            accordion: {\r\n                slideSpeed: 200, // accordion toggle slide speed in milliseconds\r\n                expandAll: false // allow having multiple expanded accordions in the menu\r\n            }\r\n        });\r\n    }\r\n\r\n    //== Aside menu\r\n    var initLeftAsideMenu = function() {\r\n        //== Init aside menu\r\n        var menu = mUtil.get('m_ver_menu');\r\n        var menuDesktopMode = (mUtil.attr(menu, 'm-menu-dropdown') === '1' ? 'dropdown' : 'accordion');\r\n\r\n        var scroll;\r\n        if (mUtil.attr(menu, 'm-menu-scrollable') === '1') {\r\n            scroll = {\r\n                height: function() {\r\n                    return mUtil.getViewPort().height - parseInt(mUtil.css('m_header', 'height'));\r\n                }\r\n            };\r\n        }\r\n\r\n        asideMenu = new mMenu('m_ver_menu', {\r\n            // vertical scroll\r\n            scroll: scroll,\r\n\r\n            // submenu setup\r\n            submenu: {\r\n                desktop: {\r\n                    // by default the menu mode set to accordion in desktop mode\r\n                    default: menuDesktopMode,\r\n                    // whenever body has this class switch the menu mode to dropdown\r\n                    state: {\r\n                        body: 'm-aside-left--minimize',\r\n                        mode: 'dropdown'\r\n                    }\r\n                },\r\n                tablet: 'accordion', // menu set to accordion in tablet mode\r\n                mobile: 'accordion' // menu set to accordion in mobile mode\r\n            },\r\n\r\n            //accordion setup\r\n            accordion: {\r\n                autoScroll: false, // enable auto scrolling(focus) to the clicked menu item\r\n                expandAll: false // allow having multiple expanded accordions in the menu\r\n            }\r\n        });\r\n    }\r\n\r\n    //== Aside\r\n    var initLeftAside = function() {\r\n        // init aside left offcanvas\r\n        var body = mUtil.get('body');\r\n        var asideLeft = mUtil.get('m_aside_left');\r\n        var asideOffcanvasClass = mUtil.hasClass(asideLeft, 'm-aside-left--offcanvas-default') ? 'm-aside-left--offcanvas-default' : 'm-aside-left';\r\n\r\n        asideMenuOffcanvas = new mOffcanvas('m_aside_left', {\r\n            baseClass: asideOffcanvasClass,\r\n            overlay: true,\r\n            closeBy: 'm_aside_left_close_btn',\r\n            toggleBy: {\r\n                target: 'm_aside_left_offcanvas_toggle',\r\n                state: 'm-brand__toggler--active'\r\n            }\r\n        });\r\n\r\n        //== Handle minimzied aside hover\r\n        if (mUtil.hasClass(body, 'm-aside-left--fixed')) {\r\n            var insideTm;\r\n            var outsideTm;\r\n\r\n            mUtil.addEvent(asideLeft, 'mouseenter', function() {\r\n                if (outsideTm) {\r\n                    clearTimeout(outsideTm);\r\n                    outsideTm = null;\r\n                }\r\n\r\n                insideTm = setTimeout(function() {\r\n                    if (mUtil.hasClass(body, 'm-aside-left--minimize') && mUtil.isInResponsiveRange('desktop')) {\r\n                        mUtil.removeClass(body, 'm-aside-left--minimize');\r\n                        mUtil.addClass(body, 'm-aside-left--minimize-hover');\r\n                        asideMenu.scrollerUpdate();\r\n                        asideMenu.scrollerTop();\r\n                    }\r\n                }, 300);\r\n            });\r\n\r\n            mUtil.addEvent(asideLeft, 'mouseleave', function() {\r\n                if (insideTm) {\r\n                    clearTimeout(insideTm);\r\n                    insideTm = null;\r\n                }\r\n\r\n                outsideTm = setTimeout(function() {\r\n                    if (mUtil.hasClass(body, 'm-aside-left--minimize-hover') && mUtil.isInResponsiveRange('desktop')) {\r\n                        mUtil.removeClass(body, 'm-aside-left--minimize-hover');\r\n                        mUtil.addClass(body, 'm-aside-left--minimize');\r\n                        asideMenu.scrollerUpdate();\r\n                        asideMenu.scrollerTop();\r\n                    }\r\n                }, 500);\r\n            });\r\n        }\r\n    }\r\n\r\n    //== Sidebar toggle\r\n    var initLeftAsideToggle = function() {\r\n        if ($('#m_aside_left_minimize_toggle').length === 0) {\r\n            return;\r\n        }\r\n\r\n        asideLeftToggle = new mToggle('m_aside_left_minimize_toggle', {\r\n            target: 'body',\r\n            targetState: 'm-brand--minimize m-aside-left--minimize',\r\n            togglerState: 'm-brand__toggler--active'\r\n        }); \r\n\r\n        asideLeftToggle.on('toggle', function(toggle) {     \r\n            mainPortlet.updateSticky();       \r\n            \r\n            horMenu.pauseDropdownHover(800);\r\n            asideMenu.pauseDropdownHover(800);\r\n\r\n            //== Remember state in cookie\r\n            Cookies.set('sidebar_toggle_state', toggle.getState());\r\n            // to set default minimized left aside use this cookie value in your \r\n            // server side code and add \"m-brand--minimize m-aside-left--minimize\" classes to \r\n            // the body tag in order to initialize the minimized left aside mode during page loading.\r\n        });\r\n    }\r\n\r\n    //== Sidebar hide\r\n    var initLeftAsideHide = function() {\r\n        if ($('#m_aside_left_hide_toggle').length === 0 ) {\r\n            return;\r\n        }\r\n\r\n        initLeftAsideHide = new mToggle('m_aside_left_hide_toggle', {\r\n            target: 'body',\r\n            targetState: 'm-aside-left--hide',\r\n            togglerState: 'm-brand__toggler--active'\r\n        });\r\n\r\n        initLeftAsideHide.on('toggle', function(toggle) {\r\n            horMenu.pauseDropdownHover(800);\r\n            asideMenu.pauseDropdownHover(800);\r\n\r\n            //== Remember state in cookie\r\n            Cookies.set('sidebar_hide_state', toggle.getState());\r\n            // to set default minimized left aside use this cookie value in your \r\n            // server side code and add \"m-brand--minimize m-aside-left--minimize\" classes to \r\n            // the body tag in order to initialize the minimized left aside mode during page loading.\r\n        });\r\n    }\r\n\r\n    //== Topbar\r\n    var initTopbar = function() {\r\n        $('#m_aside_header_topbar_mobile_toggle').click(function() {\r\n            $('body').toggleClass('m-topbar--on');\r\n        });\r\n\r\n        // Animated Notification Icon \r\n        /*\r\n        setInterval(function() {\r\n            $('#m_topbar_notification_icon .m-nav__link-icon').addClass('m-animate-shake');\r\n            $('#m_topbar_notification_icon .m-nav__link-badge').addClass('m-animate-blink');\r\n        }, 3000);\r\n\r\n        setInterval(function() {\r\n            $('#m_topbar_notification_icon .m-nav__link-icon').removeClass('m-animate-shake');\r\n            $('#m_topbar_notification_icon .m-nav__link-badge').removeClass('m-animate-blink');\r\n        }, 6000);\r\n        */\r\n    }\r\n\r\n    //== Quicksearch\r\n    var initQuicksearch = function() {\r\n        if ($('#m_quicksearch').length === 0) {\r\n            return;\r\n        }\r\n\r\n        quicksearch = new mQuicksearch('m_quicksearch', {\r\n            mode: mUtil.attr('m_quicksearch', 'm-quicksearch-mode'), // quick search type\r\n            minLength: 1\r\n        });\r\n\r\n        //<div class=\"m-search-results m-search-results--skin-light\"><span class=\"m-search-result__message\">Something went wrong</div></div>\r\n\r\n        quicksearch.on('search', function(the) {\r\n            the.showProgress();\r\n\r\n            $.ajax({\r\n                url: 'inc/api/quick_search.php',\r\n                data: {\r\n                    query: the.query\r\n                },\r\n                dataType: 'html',\r\n                success: function(res) {\r\n                    the.hideProgress();\r\n                    the.showResult(res);\r\n                },\r\n                error: function(res) {\r\n                    the.hideProgress();\r\n                    the.showError('Connection error. Pleae try again later.');\r\n                }\r\n            });\r\n        });\r\n    }\r\n\r\n    //== Scrolltop\r\n    var initScrollTop = function() {\r\n        var scrollTop = new mScrollTop('m_scroll_top', {\r\n            offset: 300,\r\n            speed: 600\r\n        });\r\n    }\r\n\r\n    //== Main portlet(sticky portlet)\r\n    var createMainPortlet = function() {\r\n        return new mPortlet('main_portlet', {\r\n            sticky: {\r\n                offset: parseInt(mUtil.css( mUtil.get('m_header'), 'height')),\r\n                zIndex: 90,\r\n                position: {\r\n                    top: function() {\r\n                        return parseInt(mUtil.css( mUtil.get('m_header'), 'height') );\r\n                    },\r\n                    left: function() {\r\n                        var left = parseInt(mUtil.css( mUtil.getByClass('m-content'), 'paddingLeft'));\r\n                        \r\n                        if (mUtil.isInResponsiveRange('desktop')) {\r\n                            //left += parseInt(mUtil.css(mUtil.get('m_aside_left'), 'width') );\r\n                            if (mUtil.hasClass(mUtil.get('body'), 'm-aside-left--minimize')) {\r\n                                left += 78; // need to use hardcoded width of the minimize aside\r\n                            } else {\r\n                                left += 255; // need to use hardcoded width of the aside\r\n                            }\r\n                        } \r\n\r\n                        return left; \r\n                    },\r\n                    right: function() {\r\n                        return parseInt(mUtil.css( mUtil.getByClass('m-content'), 'paddingRight') );\r\n                    }\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    return {\r\n        init: function() {\r\n            this.initHeader();\r\n            this.initAside();\r\n            this.initMainPortlet();\r\n        },\r\n\r\n        initMainPortlet: function() {\r\n            if (!mUtil.get('main_portlet')) {\r\n                return;\r\n            }\r\n            \r\n            mainPortlet = createMainPortlet();\r\n            mainPortlet.initSticky();\r\n            \r\n            mUtil.addResizeHandler(function(){\r\n                mainPortlet.updateSticky();\r\n            });\r\n        },\r\n\r\n        resetMainPortlet: function() {\r\n            mainPortlet.destroySticky();\r\n            mainPortlet = createMainPortlet();\r\n            mainPortlet.initSticky();\r\n        },\r\n\r\n        initHeader: function() {\r\n            initStickyHeader();\r\n            initHorMenu();\r\n            initTopbar();\r\n            initQuicksearch();\r\n            initScrollTop();\r\n        },\r\n\r\n        initAside: function() { \r\n            initLeftAside();\r\n            initLeftAsideMenu();\r\n            initLeftAsideToggle();\r\n            initLeftAsideHide();\r\n\r\n            this.onLeftSidebarToggle(function(e) {\r\n                //== Update sticky portlet\r\n                if (mainPortlet) {\r\n                    mainPortlet.updateSticky();\r\n                }\r\n\r\n                //== Reload datatable\r\n                var datatables = $('.m-datatable');\r\n                if (datatables) {\r\n                    datatables.each(function() {\r\n                        $(this).mDatatable('redraw');\r\n                    });\r\n                }                \r\n            });\r\n        },\r\n\r\n        getAsideMenu: function() {\r\n            return asideMenu;\r\n        },\r\n\r\n        onLeftSidebarToggle: function(handler) {\r\n            if (asideLeftToggle) {\r\n                asideLeftToggle.on('toggle', handler);\r\n            }\r\n        },\r\n\r\n        closeMobileAsideMenuOffcanvas: function() {\r\n            if (mUtil.isMobileDevice()) {\r\n                asideMenuOffcanvas.hide();\r\n            }\r\n        },\r\n\r\n        closeMobileHorMenuOffcanvas: function() {\r\n            if (mUtil.isMobileDevice()) {\r\n                horMenuOffcanvas.hide();\r\n            }\r\n        }\r\n    };\r\n}();\n"]}